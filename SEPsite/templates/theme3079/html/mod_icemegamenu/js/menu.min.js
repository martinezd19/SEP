(function(b){b.isScrollToFixed=function(c){return !!b(c).data("ScrollToFixed")};b.ScrollToFixed=function(P,Y){function Z(){Q.trigger("preUnfixed.ScrollToFixed");G();Q.trigger("unfixed.ScrollToFixed");ad=-1;af=Q.offset().top;aa=Q.offset().left;if(U.options.offsets){aa+=Q.offset().left-Q.position().left}if(ah==-1){ah=aa}X=Q.css("position");ac=true;if(U.options.bottom!=-1){Q.trigger("preFixed.ScrollToFixed");K();Q.trigger("fixed.ScrollToFixed")}}function ae(){var c=U.options.limit;if(!c){return 0}if(typeof c==="function"){return c.apply(Q)}return c}function F(){return X==="fixed"}function ai(){return X==="absolute"}function H(){return !(F()||ai())}function K(){if(!F()){W.css({display:Q.css("display"),width:(Q.outerWidth(true)*100/Q.parent().width()).toFixed(2)-0.04+"%",height:Q.outerHeight(true),"float":Q.css("float")});cssOptions={position:"fixed",top:U.options.bottom==-1?z():"",bottom:U.options.bottom==-1?"":U.options.bottom,"margin-left":"0px"};if(!U.options.dontSetWidth){cssOptions.width=Q.width()}Q.css(cssOptions);Q.addClass(U.options.baseClassName);if(U.options.className){Q.addClass(U.options.className)}X="fixed"}}function j(){var d=ae();var c=aa;if(U.options.removeOffsets){c="";d=d-af}cssOptions={position:"absolute",top:d,left:c,"margin-left":"0px",bottom:""};if(!U.options.dontSetWidth){cssOptions.width=Q.width()}Q.css(cssOptions);X="absolute"}function G(){if(!H()){ad=-1;W.css("display","none");Q.css({width:"",position:J,left:"",top:aj,"margin-left":""});Q.removeClass("scroll-to-fixed-fixed");if(U.options.className){Q.removeClass(U.options.className)}X=null}}function e(c){if(c!=ad){Q.css("left",aa-c);ad=c}}function z(){var c=U.options.marginTop;if(!c){return 0}if(typeof c==="function"){return c.apply(Q)}return c}function R(){if(!b.isScrollToFixed(Q)){return}var d=ac;if(!ac){Z()}var g=b(window).scrollLeft();var f=b(window).scrollTop();var c=ae();if(U.options.minWidth&&b(window).width()<U.options.minWidth){if(!H()||!d){D();Q.trigger("preUnfixed.ScrollToFixed");G();Q.trigger("unfixed.ScrollToFixed")}}else{if(U.options.maxWidth&&b(window).width()>U.options.maxWidth){if(!H()||!d){D();Q.trigger("preUnfixed.ScrollToFixed");G();Q.trigger("unfixed.ScrollToFixed")}}else{if(U.options.bottom==-1){if(c>0&&f>=c-z()){if(!ai()||!d){D();Q.trigger("preAbsolute.ScrollToFixed");j();Q.trigger("unfixed.ScrollToFixed")}}else{if(f>=af-z()){if(!F()||!d){D();Q.trigger("preFixed.ScrollToFixed");K();ad=-1;Q.trigger("fixed.ScrollToFixed")}e(g)}else{if(!H()||!d){D();Q.trigger("preUnfixed.ScrollToFixed");G();Q.trigger("unfixed.ScrollToFixed")}}}}else{if(c>0){if(f+b(window).height()-Q.outerHeight(true)>=c-(z()||-ab())){if(F()){D();Q.trigger("preUnfixed.ScrollToFixed");if(J==="absolute"){j()}else{G()}Q.trigger("unfixed.ScrollToFixed")}}else{if(!F()){D();Q.trigger("preFixed.ScrollToFixed");K()}e(g);Q.trigger("fixed.ScrollToFixed")}}else{e(g)}}}}}function ab(){if(!U.options.bottom){return 0}return U.options.bottom}function D(){var c=Q.css("position");if(c=="absolute"){Q.trigger("postAbsolute.ScrollToFixed")}else{if(c=="fixed"){Q.trigger("postFixed.ScrollToFixed")}else{Q.trigger("postUnfixed.ScrollToFixed")}}}var U=this;U.$el=b(P);U.el=P;U.$el.data("ScrollToFixed",U);var ac=false;var Q=U.$el;var X;var J;var aj;var af=0;var aa=0;var ah=-1;var ad=-1;var W=null;var ag;var I;var V=function(c){if(Q.is(":visible")){ac=false;R()}};var q=function(c){R()};var B=function(){var h=document.body;if(document.createElement&&h&&h.appendChild&&h.removeChild){var d=document.createElement("div");if(!d.getBoundingClientRect){return null}d.innerHTML="x";d.style.cssText="position:fixed;top:100px;";h.appendChild(d);var k=h.style.height,g=h.scrollTop;h.style.height="3000px";h.scrollTop=500;var c=d.getBoundingClientRect().top;h.style.height=k;var f=c===100;h.removeChild(d);h.scrollTop=g;return f}return null};var ak=function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}c.returnValue=false};U.init=function(){U.options=b.extend({},b.ScrollToFixed.defaultOptions,Y);U.$el.css("z-index",U.options.zIndex);W=b("<div />");X=Q.css("position");J=Q.css("position");aj=Q.css("top");if(H()){U.$el.after(W)}b(window).bind("resize.ScrollToFixed",V);b(window).bind("scroll.ScrollToFixed",q);if(U.options.preFixed){Q.bind("preFixed.ScrollToFixed",U.options.preFixed)}if(U.options.postFixed){Q.bind("postFixed.ScrollToFixed",U.options.postFixed)}if(U.options.preUnfixed){Q.bind("preUnfixed.ScrollToFixed",U.options.preUnfixed)}if(U.options.postUnfixed){Q.bind("postUnfixed.ScrollToFixed",U.options.postUnfixed)}if(U.options.preAbsolute){Q.bind("preAbsolute.ScrollToFixed",U.options.preAbsolute)}if(U.options.postAbsolute){Q.bind("postAbsolute.ScrollToFixed",U.options.postAbsolute)}if(U.options.fixed){Q.bind("fixed.ScrollToFixed",U.options.fixed)}if(U.options.unfixed){Q.bind("unfixed.ScrollToFixed",U.options.unfixed)}if(U.options.spacerClass){W.addClass(U.options.spacerClass)}Q.bind("resize.ScrollToFixed",function(){W.height(Q.height())});Q.bind("scroll.ScrollToFixed",function(){Q.trigger("preUnfixed.ScrollToFixed");G();Q.trigger("unfixed.ScrollToFixed");R()});Q.bind("detach.ScrollToFixed",function(c){ak(c);Q.trigger("preUnfixed.ScrollToFixed");G();Q.trigger("unfixed.ScrollToFixed");b(window).unbind("resize.ScrollToFixed",V);b(window).unbind("scroll.ScrollToFixed",q);Q.unbind(".ScrollToFixed");W.remove();U.$el.removeData("ScrollToFixed")});V()};U.init()};b.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1000,baseClassName:"scroll-to-fixed-fixed"};b.fn.scrollToFixed=function(c){return this.each(function(){new b.ScrollToFixed(this,c)})}})(jQuery);jQuery(function(e){var i=(e.browser.mozilla||e.browser.msie)?e("html"):e("body");if(screen.width>767){e(window).load(function(){e("#icemegamenu").closest(".row-container").parent().scrollToFixed({minWidth:768})})}e(".icemegamenu li>a.iceMenuTitle").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")});if(e("body").hasClass("desktop_mode")||(e("body").hasClass("mobile")&&screen.width>767)){e(".icemegamenu li").not(".parent").find('>a.iceMenuTitle[href^="#"]').click(function(){var k=e(this);b(k)});e('.icemegamenu li.parent>a.iceMenuTitle[href^="#"]').click(function(){var k=e(this);if(k.closest("li").hasClass("hover")){c(k);b(k)}else{e('.icemegamenu li.parent[class^="iceMenuLiLevel"]').not(k.closest("li").parents("li")).not(k.closest("li")).removeClass("hover");k.closest("li").addClass("hover").attr("data-hover","true");k.closest("li").find(">ul.icesubMenu").addClass("visible");return false}});e(".icemegamenu li.parent>a").not("[href]").click(function(){var k=e(this);if(k.closest("li").hasClass("hover")){if(!k.attr("href")){k.removeClass("hover");k.closest("li").attr("data-hover","false");c(k,0)}}else{e('.icemegamenu li.parent[class^="iceMenuLiLevel"]').not(k.closest("li").parents("li")).not(k.closest("li")).removeClass("hover");k.closest("li").addClass("hover").attr("data-hover","true");k.closest("li").find(">ul.icesubMenu").addClass("visible");return false}});e('.icemegamenu li[class^="iceMenuLiLevel"]').not(".parent").find(">a.iceMenuTitle[href]").not('[href^="#"]').click(function(){var k=e(this);if(window.location.href.split("#")[0]==k.attr("href")){b(k);return false}});e('.icemegamenu li.parent[class^="iceMenuLiLevel"]').find(">a.iceMenuTitle[href]").not('[href^="#"]').click(function(){var k=e(this);if(k.closest("li").hasClass("hover")){if(window.location.href.split("#")[0]==k.attr("href")){c(k);b(k);return false}}else{e('.icemegamenu li.parent[class^="iceMenuLiLevel"]').not(k.closest("li").parents("li")).not(k.closest("li")).removeClass("hover");k.closest("li").addClass("hover").attr("data-hover","true");k.closest("li").find(">ul.icesubMenu").addClass("visible");return false}})}else{e('.icemegamenu li.parent[class^="iceMenuLiLevel"]').hover(function(){e('#icemegamenu li.parent[class^="iceMenuLiLevel"]').not(e(this).parents("li")).not(e(this)).removeClass("hover");e(this).addClass("hover").attr("data-hover","true");e(this).find(">ul.icesubMenu").addClass("visible")},function(){e(this).attr("data-hover","false");a=e(this).find(">a");c(a)});e('.icemegamenu li.iceMenuLiLevel_1>a.iceMenuTitle[href^="#"]').click(function(){var k=e(this);b(k)});e('.icemegamenu li[class^="iceMenuLiLevel"]>a.iceMenuTitle[href]').click(function(){var k=e(this);if(window.location.href.split("#")[0]==k.attr("href")){b(k);return false}})}function c(k,l){l=typeof l!=="undefined"?l:800;k.delay(l).queue(function(m){if(k.closest("li").attr("data-hover")=="false"){k.closest("li").removeClass("hover").delay(250).queue(function(n){if(k.closest("li").attr("data-hover")=="false"){k.closest("li").find(">ul.icesubMenu").removeClass("visible")}n()})}m()})}if(e('.icemegamenu li[class^="iceMenuLiLevel"]>a.iceMenuTitle[href^="#"]').length&&e('.icemegamenu li[class^="iceMenuLiLevel"]>a.iceMenuTitle[href^="#"]').attr("href")!="#"){e(window).scroll(e.throttle(500,function(){f()}));e(window).load(function(){f();if(e(this).scrollTop()>24){e("body:first").addClass("scrolled")}else{e("body:first").removeClass("scrolled")}});var j=[],h=false,d=window.location.hash,g=0;e('.icemegamenu li[class^="iceMenuLiLevel"]>a.iceMenuTitle[href^="#"]').each(function(k){j[k]=e(this).attr("href")});function f(){if(!h){var l=e(window).scrollTop(),m="";y=e(document).height();if(!d||d==""){for(var k=0,n=j.length;k<n;k++){if(e('a[name="'+j[k].substring(1)+'"]').length){if(l+(e(window).height()-e(".scroll-to-fixed-fixed").outerHeight())/2>=e('a[name="'+j[k].substring(1)+'"]').offset().top&&y>l+(e(window).height()-e(".scroll-to-fixed-fixed").outerHeight())/2-e('a[name="'+j[k].substring(1)+'"]').offset().top){m=j[k];y=l+(e(window).height()-e(".scroll-to-fixed-fixed").outerHeight())/2-e('a[name="'+j[k].substring(1)+'"]').offset().top}}}g=l;if(window.location.hash!=m&&m!=""){if(history.pushState){history.pushState(null,null,m)}e('.icemegamenu li[class^="iceMenuLiLevel"]').removeClass("hover").find(">a.iceMenuTitle").removeClass("icemega_active").removeClass("hover");e("a.iceMenuTitle[href="+m+"]").addClass("icemega_active")}if(l==0){if(history.pushState&&window.location.hash){history.pushState(null,null,"#")}e('.icemegamenu li[class^="iceMenuLiLevel"]').removeClass("hover").find(">a.iceMenuTitle").removeClass("icemega_active").removeClass("hover");if(window.location.hash){e('a.iceMenuTitle[href="'+window.location.href+'"]').addClass("icemega_active")}else{e('a.iceMenuTitle[href="'+window.location.href.split("#")[0]+'"]').addClass("icemega_active")}}}else{if(e("a.iceMenuTitle[href="+d+"]").length){e('.icemegamenu li[class^="iceMenuLiLevel"]').removeClass("hover").find(">a.iceMenuTitle").removeClass("icemega_active").removeClass("hover");e("a.iceMenuTitle[href="+d+"]").addClass("icemega_active")}if(e('a[name="'+d.substring(1)+'"]').length){h=true;i.delay(100).queue(function(o){i.animate({scrollTop:e('a[name="'+d.substring(1)+'"]').offset().top-e(".scroll-to-fixed-fixed").outerHeight()},400,function(){e(this).delay(200).queue(function(p){h=false;d=false;e(this).delay(1200).queue(function(q){if(typeof e.fn.lazy=="function"){e(".lazy_container img").lazy({bind:"event",effect:"fadeIn",effectTime:500})}q()});p()})});o()})}}return false}}function b(k){if(window.location.href.split("#")[0]!=k.attr("href")){if(e('a[name="'+k.attr("href").substring(1)+'"]').length){h=true;e('.icemegamenu li[class^="iceMenuLiLevel"]').removeClass("hover").find(">a.iceMenuTitle").removeClass("icemega_active").removeClass("hover");k.addClass("icemega_active");if(history.pushState){history.pushState(null,null,k.attr("href"))}i.animate({scrollTop:e('a[name="'+k.attr("href").substring(1)+'"]').offset().top-e(".scroll-to-fixed-fixed").outerHeight()},400,function(){e(this).delay(200).queue(function(l){h=false;e(this).delay(1200).queue(function(m){if(typeof e.fn.lazy=="function"){e("img.lazy").lazy({bind:"event",effect:"fadeIn",effectTime:500})}m()});l()})})}}if(window.location.href.split("#")[0]==k.attr("href")){h=true;e('.icemegamenu li[class^="iceMenuLiLevel"]').removeClass("hover").find(">a.iceMenuTitle").removeClass("icemega_active").removeClass("hover");k.addClass("icemega_active");if(history.pushState){history.pushState(null,null,"#")}i.animate({scrollTop:0},400,function(){e(this).delay(200).queue(function(l){h=false;e(this).delay(1200).queue(function(m){if(typeof e.fn.lazy=="function"){e("img.lazy").lazy({bind:"event",effect:"fadeIn",effectTime:500})}m()});l()})})}return false}}});