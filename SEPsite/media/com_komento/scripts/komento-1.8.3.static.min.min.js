!function(d,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=d.document?c(d,!0):function(b){if(!b.document){throw new Error("jQuery requires a window with a document")}return c(b)}:c(d)}("undefined"!=typeof window?window:this,function(a){function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function x(a,b,c){if(n.isFunction(b)){return n.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return n.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(w.test(b)){return n.filter(b,a,c)}b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}function E(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else{c=void 0}}return c}function Q(a){var b;for(b in a){if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b){return !1}}return !0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b){return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;){delete d[b[e]]}if(c?!Q(d):!n.isEmptyObject(d)){return}}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function bb(){return !0}function cb(){return !1}function db(){try{return z.activeElement}catch(a){}}function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement){for(;b.length;){c.createElement(b.pop())}}return c}function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;if(!f){for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++){!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b))}}return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++){n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;e>d;d++){n.event.add(b,c,h[c][d])}}}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events){n.removeEvent(b,d,e.handle)}b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}function Mb(a,b){return{get:function(){var c=a();if(null!=c){return c?(delete this.get,void 0):(this.get=b).apply(this,arguments)}}}}function Vb(a,b){if(b in a){return b}for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;e--;){if(b=Ub[e]+c,b in a){return b}}return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++){d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))))}for(g=0;h>g;g++){d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"))}return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2){"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)))}return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e)){return e}d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b){c=U[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++){if(d=e[f].call(c,b,a)){return d}}}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d]){continue}q=!0}o[d]=r&&r[d]||n.style(a,d)}}if(!n.isEmptyObject(o)){r?"hidden" in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o){n.style(a,b,o[b])}});for(d in o){g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}}function kc(a,b){var c,d,e,f,g;for(c in a){if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;d>c;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++){if(d=ec[f].call(j,a,k,j.opts)){return d}}return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c)){for(;d=f[e++];){"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Nc(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===Jc;return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b){void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d])}return c&&n.extend(!0,a,c),a}function Pc(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];){i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"))}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0] in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}for(f=k.shift();f;){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}function Wc(a,b,c,d){var e;if(n.isArray(b)){n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==n.type(b)){d(a,b)}else{for(e in b){Wc(a+"["+e+"]",b[e],c,d)}}}}function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.1pre",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++){if(null!=(e=arguments[h])){for(d in e){a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c))}}}return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a)){return !1}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}if(l.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e&&(d=b.apply(a[e],c),d!==!1);e++){}}else{for(e in a){if(d=b.apply(a[e],c),d===!1){break}}}}else{if(g){for(;f>e&&(d=b.call(a[e],e,a[e]),d!==!1);e++){}}else{for(e in a){if(d=b.call(a[e],e,a[e]),d===!1){break}}}}return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;){a[e++]=b[d++]}if(c!==c){for(;void 0!==b[d];){a[e++]=b[d++]}}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h){for(;g>f;f++){d=b(a[f],f,c),null!=d&&i.push(d)}}else{for(f in a){d=b(a[f],f,c),null!=d&&i.push(d)}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0},now:function(){return +new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function eb(a,b,d,e){var f,g,i,j,k,n,q,r,v,w;if((b?b.ownerDocument||b:u)!==m&&l(b),b=b||m,d=d||[],!a||"string"!=typeof a){return d}if(1!==(j=b.nodeType)&&9!==j){return[]}if(o&&!e){if(f=$.exec(a)){if(i=f[1]){if(9===j){if(g=b.getElementById(i),!g||!g.parentNode){return d}if(g.id===i){return d.push(g),d}}else{if(b.ownerDocument&&(g=b.ownerDocument.getElementById(i))&&s(b,g)&&g.id===i){return d.push(g),d}}}else{if(f[2]){return H.apply(d,b.getElementsByTagName(a)),d}if((i=f[3])&&c.getElementsByClassName&&b.getElementsByClassName){return H.apply(d,b.getElementsByClassName(i)),d}}}if(c.qsa&&(!p||!p.test(a))){if(r=q=t,v=b,w=9===j&&a,1===j&&"object"!==b.nodeName.toLowerCase()){for(n=pb(a),(q=b.getAttribute("id"))?r=q.replace(ab,"\\$&"):b.setAttribute("id",r),r="[id='"+r+"'] ",k=n.length;k--;){n[k]=r+qb(n[k])}v=_.test(a)&&nb(b.parentNode)||b,w=n.join(",")}if(w){try{return H.apply(d,v.querySelectorAll(w)),d}catch(x){}finally{q||b.removeAttribute("id")}}}}return h(a.replace(Q,"$1"),b,d,e)}function fb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function gb(a){return a[t]=!0,a}function hb(a){var b=m.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ib(a,b){for(var c=a.split("|"),e=a.length;e--;){d.attrHandle[c[e]]=b}}function jb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d){return d}if(c){for(;c=c.nextSibling;){if(c===b){return -1}}}return a?1:-1}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function mb(a){return gb(function(b){return b=+b,gb(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function nb(a){return a&&typeof a.getElementsByTagName!==B&&a}function ob(){}function pb(a,b){var c,e,f,g,h,i,j,k=y[a+" "];if(k){return b?0:k.slice(0)}for(h=a,i=[],j=d.preFilter;h;){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter){!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?eb.error(a):y(a,i).slice(0)}function qb(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=w++;return b.first?function(b,c,f){for(;b=b[d];){if(1===b.nodeType||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[v,f];if(g){for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g)){return !0}}}else{for(;b=b[d];){if(1===b.nodeType||e){if(i=b[t]||(b[t]={}),(h=i[d])&&h[0]===v&&h[1]===f){return j[2]=h[2]}if(i[d]=j,j[2]=a(b,c,g)){return !0}}}}}}function sb(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++){eb(a,b[d],c)}return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++){(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h))}return g}function vb(a,b,c,d,e,f){return d&&!d[t]&&(d=vb(d)),e&&!e[t]&&(e=vb(e,f)),gb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){for(j=ub(r,n),d(j,[],h,i),k=j.length;k--;){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){for(j=[],k=r.length;k--;){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}for(k=r.length;k--;){(l=r[k])&&(j=e?J.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)}})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],j=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return J.call(b,a)>-1},h,!0),m=[function(a,c,d){return !g&&(d||c!==i)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++){if(c=d.relative[a[j].type]){m=[rb(sb(m),c)]}else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[t]){for(e=++j;f>e&&!d.relative[a[e].type];e++){}return vb(j>1&&sb(m),j>1&&qb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(Q,"$1"),c,e>j&&wb(a.slice(j,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,j,k){var l,n,o,p=0,q="0",r=f&&[],s=[],t=i,u=f||e&&d.find.TAG("*",k),w=v+=null==t?1:Math.random()||0.1,x=u.length;for(k&&(i=g!==m&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(n=0;o=a[n++];){if(o(l,g,h)){j.push(l);break}}k&&(v=w)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(n=0;o=b[n++];){o(r,s,g,h)}if(f){if(p>0){for(;q--;){r[q]||s[q]||(s[q]=F.call(j))}}s=ub(s)}H.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&eb.uniqueSort(j)}return k&&(v=w,i=t),r};return c?gb(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t="sizzle"+-new Date,u=a.document,v=0,w=0,x=fb(),y=fb(),z=fb(),A=function(a,b){return a===b&&(k=!0),0},B="undefined",C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=E.indexOf||function(a){for(var b=0,c=this.length;c>b;b++){if(this[b]===a){return b}}return -1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")"+L+"*(?:([*^$|!~]?=)"+L+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+N+")|)|)"+L+"*\\]",P=":("+M+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(P),V=new RegExp("^"+N+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,ab=/'|\\/g,bb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),cb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{H.apply(E=I.call(u.childNodes),u.childNodes),E[u.childNodes.length].nodeType}catch(db){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];){}a.length=c-1}}}c=eb.support={},f=eb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},l=eb.setDocument=function(a){var b,e=a?a.ownerDocument||a:u,g=e.defaultView;return e!==m&&9===e.nodeType&&e.documentElement?(m=e,n=e.documentElement,o=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){l()},!1):g.attachEvent&&g.attachEvent("onunload",function(){l()})),c.attributes=hb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=hb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(e.getElementsByClassName)&&hb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=hb(function(a){return n.appendChild(a).id=t,!e.getElementsByName||!e.getElementsByName(t).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==B&&o){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){var c=typeof a.getAttributeNode!==B&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==B?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==B&&o?b.getElementsByClassName(a):void 0},q=[],p=[],(c.qsa=Z.test(e.querySelectorAll))&&(hb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&p.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||p.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll(":checked").length||p.push(":checked")}),hb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&p.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||p.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),p.push(",.*:")})),(c.matchesSelector=Z.test(r=n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&hb(function(a){c.disconnectedMatch=r.call(a,"div"),r.call(a,"[s!='']:x"),q.push("!=",P)}),p=p.length&&new RegExp(p.join("|")),q=q.length&&new RegExp(q.join("|")),b=Z.test(n.compareDocumentPosition),s=b||Z.test(n.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){for(;b=b.parentNode;){if(b===a){return !0}}}return !1},A=b?function(a,b){if(a===b){return k=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===u&&s(u,a)?-1:b===e||b.ownerDocument===u&&s(u,b)?1:j?J.call(j,a)-J.call(j,b):0:4&d?-1:1)}:function(a,b){if(a===b){return k=!0,0}var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g){return a===e?-1:b===e?1:f?-1:g?1:j?J.call(j,a)-J.call(j,b):0}if(f===g){return jb(a,b)}for(c=a;c=c.parentNode;){h.unshift(c)}for(c=b;c=c.parentNode;){i.unshift(c)}for(;h[d]===i[d];){d++}return d?jb(h[d],i[d]):h[d]===u?-1:i[d]===u?1:0},e):m},eb.matches=function(a,b){return eb(a,null,null,b)},eb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==m&&l(a),b=b.replace(T,"='$1']"),!(!c.matchesSelector||!o||q&&q.test(b)||p&&p.test(b))){try{var d=r.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return eb(b,m,null,[a]).length>0},eb.contains=function(a,b){return(a.ownerDocument||a)!==m&&l(a),s(a,b)},eb.attr=function(a,b){(a.ownerDocument||a)!==m&&l(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!o):void 0;return void 0!==f?f:c.attributes||!o?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},eb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},eb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(k=!c.detectDuplicates,j=!c.sortStable&&a.slice(0),a.sort(A),k){for(;b=a[f++];){b===a[f]&&(e=d.push(f))}for(;e--;){a.splice(d[e],1)}}return j=null,a},e=eb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{for(;b=a[d++];){c+=e(b)}}return c},d=eb.selectors={cacheLength:50,createPseudo:gb,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(bb,cb),a[3]=(a[4]||a[5]||"").replace(bb,cb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||eb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&eb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return W.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&U.test(c)&&(b=pb(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(bb,cb).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=x[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&x(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==B&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=eb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];){if(h?l.nodeName.toLowerCase()===r:1===l.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[t]||(q[t]={}),j=k[a]||[],n=j[0]===v&&j[1],m=j[0]===v&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();){if(1===l.nodeType&&++m&&l===b){k[a]=[v,n,m];break}}}else{if(s&&(j=(b[t]||(b[t]={}))[a])&&j[0]===v){m=j[1]}else{for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[t]||(l[t]={}))[a]=[v,m]),l!==b));){}}}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||eb.error("unsupported pseudo: "+a);return e[t]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?gb(function(a,c){for(var d,f=e(a,b),g=f.length;g--;){d=J.call(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:gb(function(a){var b=[],c=[],d=g(a.replace(Q,"$1"));return d[t]?gb(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:gb(function(a){return function(b){return eb(a,b).length>0}}),contains:gb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:gb(function(a){return V.test(a||"")||eb.error("unsupported lang: "+a),a=a.replace(bb,cb).toLowerCase(),function(b){var c;do{if(c=o?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===n},focus:function(a){return a===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:mb(function(){return[0]}),last:mb(function(a,b){return[b-1]}),eq:mb(function(a,b,c){return[0>c?c+b:c]}),even:mb(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:mb(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:mb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;){a.push(d)}return a}),gt:mb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=kb(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=lb(b)}return ob.prototype=d.filters=d.pseudos,d.setFilters=new ob,g=eb.compile=function(a,b){var c,d=[],e=[],f=z[a+" "];if(!f){for(b||(b=pb(a)),c=b.length;c--;){f=wb(b[c]),f[t]?d.push(f):e.push(f)}f=z(a,xb(e,d)),f.selector=a}return f},h=eb.select=function(a,b,e,f){var h,i,j,k,l,m="function"==typeof a&&a,n=!f&&pb(a=m.selector||a);if(e=e||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&o&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(bb,cb),b)||[])[0],!b){return e}m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}for(h=W.needsContext.test(a)?0:i.length;h--&&(j=i[h],!d.relative[k=j.type]);){if((l=d.find[k])&&(f=l(j.matches[0].replace(bb,cb),_.test(i[0].type)&&nb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&qb(i),!a){return H.apply(e,f),e}break}}}return(m||g(a,n))(f,b,!o,e,_.test(a)&&nb(b.parentNode)||b),e},c.sortStable=t.split("").sort(A).join("")===t,c.detectDuplicates=!!k,l(),c.sortDetached=hb(function(a){return 1&a.compareDocumentPosition(m.createElement("div"))}),hb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ib("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&hb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ib("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),hb(function(a){return null==a.getAttribute("disabled")})||ib(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),eb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a){return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++){if(n.contains(d[b],this)){return !0}}}))}for(b=0;e>b;b++){n.find(a,d[b],c)}return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return !!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||y).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b)){for(c in b){n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2]){return y.find(a)}this.length=1,this[0]=d}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c));){1===e.nodeType&&d.push(e),e=e[b]}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++){if(n.contains(this,c[b])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++){if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){for(var d;(d=n.inArray(c,h,d))>-1;){h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return !h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return !i},fireWith:function(a,c){return !h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return !!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1){for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++){c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f}}return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body){return setTimeout(n.ready)}n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}}),n.ready.promise=function(b){if(!I){if(I=n.Deferred(),"complete"===z.readyState){setTimeout(n.ready)}else{if(z.addEventListener){z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1)}else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}}}return I.promise(b)};var M,L="undefined";for(M in n(l)){break}l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){for(c=g.length;c--;){d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]))}n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;){c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c){n.access(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b)){for(;i>h;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in {submit:!0,change:!0,focusin:!0}){c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1)}d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;h--;){f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){for(b=(b||"").match(F)||[""],j=b.length;j--;){if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;){g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g))}i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else{for(o in k){n.event.remove(a,o+b[j],c,d,!0)}}}n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),l=h}l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}for(m=0;(h=o[m++])&&!b.isPropagationStopped();){b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault())}if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();){for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();){(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type)){for(;i!=this;i=i.parentNode||this){if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++){d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d)}e.length&&g.push({elem:i,handlers:e})}}}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;){c=d[b],a[c]=f[c]}return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus){try{return this.focus(),!1}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),this[n.expando]=!0,void 0):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:(n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))}),void 0)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return n.nodeName(this,"form")?!1:(n.event.remove(this,"._submit"),void 0)}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):(n.event.add(this,"beforeactivate._change",function(a){var b=a.target;Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))}),void 0)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1){d=cb}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td,n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a))){for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g){d[g]&&Cb(e,d[g])}}if(b){if(c){for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++){Bb(e,d[g])}}else{Bb(a,f)}}return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++){if(f=a[q],f||0===f){if("object"===n.type(f)){n.merge(p,f.nodeType?[f]:f)}else{if(mb.test(f)){for(h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];e--;){h=h.lastChild}if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody){for(f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;){n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}}for(n.merge(p,h.childNodes),h.textContent="";h.firstChild;){h.removeChild(h.firstChild)}h=o.lastChild}else{p.push(b.createTextNode(f))}}}}for(h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;f=p[q++];){if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c)){for(e=0;f=h[e++];){pb.test(f.type||"")&&c.push(f)}}}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++){if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events){for(e in g.events){m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle)}}j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&n.cleanData(vb(a,!1));a.firstChild;){a.removeChild(a.firstChild)}a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a){return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0}if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p)){return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)})}if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++){d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j)}if(f){for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++){d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")))}}i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++){c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get())}return this.pushStack(e)}});var Db,Eb={};!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=z.getElementsByTagName("body")[0],!a){return}f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Jb,Kb,Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function j(){var b,c,g=z.getElementsByTagName("body")[0];g&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=h,g.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),g.removeChild(b),c=g=null)}var b,c,d,e,f,g=z.createElement("div"),h="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";g.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=g.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,b=g=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c){return c}var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f){return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=h,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c}},boxSizing:function(){return null==d&&j(),d},boxSizingReliable:function(){return null==e&&j(),e},pixelPosition:function(){return null==f&&j(),f},reliableMarginRight:function(){var b,c,d,e,f=!0;if(a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b){return}c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=h,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=i,e.style.marginRight=e.style.width="0",d.style.width="1px",f=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return f}})}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c){return g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]}if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set" in g&&void 0===(c=g.set(a,c,d))))){try{i[b]="",i[b]=c}catch(j){}}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get" in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+U[d]+b]=f[d]||f[d-2]||f[0]}return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++){f[b[g]]=n.css(a,b[g],!1,d)}return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}}),n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,n.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)}},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&dc.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++){a=b[c],a()||b[c]!==a||b.splice(c--,1)}b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++){if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f){return b}g.push(b)}}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;){if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0){try{d.selected=c=!0}catch(h){d.scrollHeight}}else{d.selected=!1}}return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):(n.removeAttr(a,b),void 0))}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType){for(;c=f[e++];){d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)}}},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?(a.defaultValue=b,void 0):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a)){return this.each(function(b){n(this).addClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(F)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){for(f=0;e=b[f++];){d.indexOf(" "+e+" ")<0&&(d+=e+" ")}g=n.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(n.isFunction(a)){return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(F)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){for(f=0;e=b[f++];){for(;d.indexOf(" "+e+" ")>=0;){d=d.replace(" "+e+" "," ")}}g=a?n.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c){for(var b,d=0,e=n(this),f=a.match(F)||[];b=f[d++];){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")}})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++){if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0){return !0}}return !1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b){return null}try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){for(j={};b=Dc.exec(f);){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>t){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t){return v}h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t)){return v.abort()}u="abort";for(d in {success:1,error:1,complete:1}){v[d](k[d])}if(i=Nc(Jc,k,b,v)){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t)){throw w}x(-1,w)}}else{x(-1,"No Transport")}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a)){return this.each(function(b){n(this).wrapAll(a.call(this,b))})}if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return !n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a)){n.each(a,function(){e(this.name,this.value)})}else{for(c in a){Wc(c,a[c],b,e)}}return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc){Yc[a](void 0,!0)}}),l.cors=!!Zc&&"withCredentials" in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){void 0!==c[e]&&f.setRequestHeader(e,c[e]+"")}f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState)){if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e){4!==f.readyState&&f.abort()}else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd){return cd.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;return n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using" in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f){return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dd;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");){a=a.offsetParent}return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e,void 0)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,function(){var a,b;n.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=n.uaMatch(navigator.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),n.browser=b}(),n.version="3.1",n.long_version="3.1.17",n.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")},n.globalNamespace=n.uid("Foundry"),a[n.globalNamespace]=n,n.run=function(a){return n.isFunction(a)?a(n):null},n.initialize=function(b){n.initialized||(n.extend(n,b),"development"==n.environment&&(a.F=n),n.initialized=!0,FD31.module.execute())},FD31.jquery(n),"function"==typeof define&&define.amd&&define("jquery",[],function(){return n}),n}),FD31.plugin("lodash",function(aZ){function ak(g,f,j){for(var i=(j||0)-1,h=g.length;++i<h;){if(g[i]===f){return i}}return -1}function aj(f,e){var h=typeof e;if(f=f.cache,"boolean"==h||null==e){return f[e]}"number"!=h&&"string"!=h&&(h="object");var g="number"==h?e:aT+e;return f=f[h]||(f[h]={}),"object"==h?f[g]&&ak(f[g],e)>-1?0:-1:f[g]?0:-1}function ai(g){var f=this.cache,j=typeof g;if("boolean"==j||null==g){f[g]=!0}else{"number"!=j&&"string"!=j&&(j="object");var i="number"==j?g:aT+g,h=f[j]||(f[j]={});"object"==j?(h[i]||(h[i]=[])).push(g)==this.array.length&&(f[j]=!1):h[i]=!0}}function ah(b){return b.charCodeAt(0)}function ag(f,e){var h=f.index,g=e.index;if(f=f.criteria,e=e.criteria,f!==e){if(f>e||"undefined"==typeof f){return 1}if(e>f||"undefined"==typeof e){return -1}}return g>h?-1:1}function af(g){var f=-1,j=g.length,i=ac();i["false"]=i["null"]=i["true"]=i.undefined=!1;var h=ac();for(h.array=g,h.cache=i,h.push=ai;++f<j;){h.push(g[f])}return i.object===!1?(aa(h),null):h}function ae(b){return"\\"+ao[b]}function ad(){return aX.pop()||[]}function ac(){return aW.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function ab(b){b.length=0,aX.length<aR&&aX.push(b)}function aa(d){var c=d.cache;c&&aa(c),d.array=d.cache=d.criteria=d.object=d.number=d.string=d.value=null,aW.length<aR&&aW.push(d)}function W(h,g,l){g||(g=0),"undefined"==typeof l&&(l=h?h.length:0);for(var k=-1,j=l-g||0,i=Array(0>j?0:j);++k<j;){i[k]=h[g+k]}return i}function az(b8){function o(c){return c&&"object"==typeof c&&!E(c)&&cN.call(c,"__wrapped__")?c:new cV(c)}function cV(c){this.__wrapped__=c}function cw(cc,cb,bd,bc){function J(){var i=arguments,c=P?this:cb;if(bb||(cc=cb[M]),bd.length&&(i=i.length?(i=bh.call(i),K?i.concat(bd):bd.concat(i)):bd),this instanceof J){c=ce(cc.prototype);var a=cc.apply(c,i);return q(a)?a:c}return cc.apply(c,i)}var bb=B(cc),P=!bd,M=cb;if(P){var K=bc;bd=cb}else{if(!bb){if(!bc){throw new cr}cb=cc}}return J}function ce(c){return q(c)?bp(c):{}}function bW(c){return cP[c]}function bL(){var a=(a=o.indexOf)===bq?ak:a;return a}function bA(c){return function(K,J,i,a){return"boolean"!=typeof J&&null!=J&&(a=i,i=a&&a[J]===K?aY:J,J=!1),null!=i&&(i=o.createCallback(i,a)),c(K,J,i,a)}}function bm(i){var K,J;return i&&bO.call(i)==au&&(K=i.constructor,!B(K)||K instanceof K)?(ct(i,function(d,c){J=c}),J===aY||cN.call(i,J)):!1}function a7(c){return cB[c]}function T(c){return bO.call(c)==aB}function b1(c0,cZ,cY,cd,cc,cb){var bd=c0;if("boolean"!=typeof cZ&&null!=cZ&&(cd=cY,cY=cZ,cZ=!1),"function"==typeof cY){if(cY="undefined"==typeof cd?cY:o.createCallback(cY,cd,1),bd=cY(bd),"undefined"!=typeof bd){return bd}bd=c0}var bc=q(bd);if(bc){var bb=bO.call(bd);if(!aq[bb]){return bd}var P=E(bd)}if(!bc||!cZ){return bc?P?W(bd):ck({},bd):bd}var M=z[bb];switch(bb){case ay:case ax:return new M(+bd);case av:case ar:return new M(bd);case at:return M(bd.source,aL.exec(bd))}var K=!cc;cc||(cc=ad()),cb||(cb=ad());for(var J=cc.length;J--;){if(cc[J]==c0){return cb[J]}}return bd=P?M(bd.length):{},P&&(cN.call(c0,"index")&&(bd.index=c0.index),cN.call(c0,"input")&&(bd.input=c0.input)),cc.push(c0),cb.push(bd),(P?y:l)(c0,function(c,d){bd[d]=b1(c,cZ,cY,aY,cc,cb)}),K&&(ab(cc),ab(cb)),bd}function bQ(i,d,J){return b1(i,!0,d,J)}function br(J,i,M){var K;return i=o.createCallback(i,M),l(J,function(d,bb,P){return i(d,bb,P)?(K=bb,!1):void 0}),K}function cG(d){var c=[];return ct(d,function(i,J){B(i)&&c.push(J)}),c.sort()}function cq(d,c){return d?cN.call(d,c):!1}function b4(J){for(var i=-1,bb=f(J),P=bb.length,M={};++i<P;){var K=bb[i];M[J[K]]=K}return M}function bS(c){return c===!0||c===!1||bO.call(c)==ay}function bH(c){return c?"object"==typeof c&&bO.call(c)==ax:!1}function bw(c){return c?1===c.nodeType:!1}function bi(J){var i=!0;if(!J){return i}var M=bO.call(J),K=J.length;return M==aA||M==ar||M==aB||M==au&&"number"==typeof K&&B(J.splice)?!K:(l(J,function(){return i=!1}),i)}function a3(c7,c6,c5,c4,c3,c2){var c1=c5===aU;if("function"==typeof c5&&!c1){c5=o.createCallback(c5,c4,2);var c0=c5(c7,c6);if("undefined"!=typeof c0){return !!c0}}if(c7===c6){return 0!==c7||1/c7==1/c6}var cZ=typeof c7,cY=typeof c6;if(c7===c7&&(!c7||"function"!=cZ&&"object"!=cZ)&&(!c6||"function"!=cY&&"object"!=cY)){return !1}if(null==c7||null==c6){return c7===c6}var cd=bO.call(c7),cc=bO.call(c6);if(cd==aB&&(cd=au),cc==aB&&(cc=au),cd!=cc){return !1}switch(cd){case ay:case ax:return +c7==+c6;case av:return c7!=+c7?c6!=+c6:0==c7?1/c7==1/c6:c7==+c6;case at:case ar:return c7==cH(c6)}var cb=cd==aA;if(!cb){if(cN.call(c7,"__wrapped__ ")||cN.call(c6,"__wrapped__")){return a3(c7.__wrapped__||c7,c6.__wrapped__||c6,c5,c4,c3,c2)}if(cd!=au){return !1}var bd=c7.constructor,bc=c6.constructor;if(bd!=bc&&!(B(bd)&&bd instanceof bd&&B(bc)&&bc instanceof bc)){return !1}}var bb=!c3;c3||(c3=ad()),c2||(c2=ad());for(var P=c3.length;P--;){if(c3[P]==c7){return c2[P]==c6}}var M=0;if(c0=!0,c3.push(c7),c2.push(c6),cb){if(P=c7.length,M=c6.length,c0=M==c7.length,!c0&&!c1){return c0}for(;M--;){var K=P,J=c6[M];if(c1){for(;K--&&!(c0=a3(c7[K],J,c5,c4,c3,c2));){}}else{if(!(c0=a3(c7[M],J,c5,c4,c3,c2))){break}}}return c0}return ct(c6,function(a,d,c){return cN.call(c,d)?(M++,c0=cN.call(c7,d)&&a3(c7[d],a,c5,c4,c3,c2)):void 0}),c0&&!c1&&ct(c7,function(i,d,c8){return cN.call(c8,d)?c0=--M>-1:void 0}),bb&&(ab(c3),ab(c2)),c0}function Q(c){return X(c)&&!H(parseFloat(c))}function B(c){return"function"==typeof c}function q(c){return !(!c||!ap[typeof c])}function cX(c){return cy(c)&&c!=+c}function cM(c){return null===c}function cy(c){return"number"==typeof c||bO.call(c)==av}function bY(c){return c?"object"==typeof c&&bO.call(c)==at:!1}function bN(c){return"string"==typeof c||bO.call(c)==ar}function bC(c){return"undefined"==typeof c}function bo(cd,cc,cb){var bd=arguments,bc=0,bb=2;if(!q(cd)){return cd}if(cb===aU){var P=bd[3],M=bd[4],K=bd[5]}else{var J=!0;M=ad(),K=ad(),"number"!=typeof cb&&(bb=bd.length),bb>3&&"function"==typeof bd[bb-2]?P=o.createCallback(bd[--bb-1],bd[bb--],2):bb>2&&"function"==typeof bd[bb-1]&&(P=bd[--bb])}for(;++bc<bb;){(E(bd[bc])?y:l)(bd[bc],function(i,c3){var c2,c1,c0=i,cZ=cd[c3];if(i&&((c1=E(i))||cg(i))){for(var cY=M.length;cY--;){if(c2=M[cY]==i){cZ=K[cY];break}}if(!c2){var a;P&&(c0=P(cZ,i),(a="undefined"!=typeof c0)&&(cZ=c0)),a||(cZ=c1?E(cZ)?cZ:[]:cg(cZ)?cZ:{}),M.push(i),K.push(cZ),a||(cZ=bo(cZ,i,aU,P,M,K))}}else{P&&(c0=P(cZ,i),"undefined"==typeof c0&&(c0=i)),"undefined"!=typeof c0&&(cZ=c0)}cd[c3]=cZ})}return J&&(ab(M),ab(K)),cd}function a9(J,i,bc){var bb=bL(),P="function"==typeof i,M={};if(P){i=o.createCallback(i,bc)}else{var K=R.apply(b5,bh.call(arguments,1))}return ct(J,function(d,cb,bd){(P?!i(d,cb,bd):bb(K,cb)<0)&&(M[cb]=d)}),M}function V(i){for(var c=-1,P=f(i),M=P.length,K=b7(M);++c<M;){var J=P[c];K[c]=[J,i[J]]}return K}function G(J,i,bd){var bc={};if("function"!=typeof i){for(var bb=-1,P=R.apply(b5,bh.call(arguments,1)),M=q(J)?P.length:0;++bb<M;){var K=P[bb];K in J&&(bc[K]=J[K])}}else{i=o.createCallback(i,bd),ct(J,function(d,cc,cb){i(d,cc,cb)&&(bc[cc]=d)})}return bc}function v(J,i,bc,bb){var P=E(J);if(i=o.createCallback(i,bb,4),null==bc){if(P){bc=[]}else{var M=J&&J.constructor,K=M&&M.prototype;bc=ce(K)}}return(P?y:l)(J,function(c,cb,bd){return i(bc,c,cb,bd)}),bc}function h(i){for(var c=-1,M=f(i),K=M.length,J=b7(K);++c<K;){J[c]=i[M[c]]}return J}function cR(i){for(var c=-1,M=R.apply(b5,bh.call(arguments,1)),K=M.length,J=b7(K);++c<K;){J[c]=i[M[c]]}return J}function cD(J,i,bc){var bb=-1,P=bL(),M=J?J.length:0,K=!1;return bc=(0>bc?j(0,M+bc):bc)||0,M&&"number"==typeof M?K=(bN(J)?J.indexOf(i,bc):P(J,i,bc))>-1:l(J,function(c){return ++bb>=bc?!(K=c===i):void 0}),K}function bt(J,i,M){var K={};return i=o.createCallback(i,M),y(J,function(d,bb,P){bb=cH(i(d,bb,P)),cN.call(K,bb)?K[bb]++:K[bb]=1}),K}function bf(J,i,bb){var P=!0;i=o.createCallback(i,bb);var M=-1,K=J?J.length:0;if("number"==typeof K){for(;++M<K&&(P=!!i(J[M],M,J));){}}else{l(J,function(d,bd,bc){return P=!!i(d,bd,bc)})}return P}function Z(J,i,bc){var bb=[];i=o.createCallback(i,bc);var P=-1,M=J?J.length:0;if("number"==typeof M){for(;++P<M;){var K=J[P];i(K,P,J)&&bb.push(K)}}else{l(J,function(d,cb,bd){i(d,cb,bd)&&bb.push(d)})}return bb}function L(J,i,bc){i=o.createCallback(i,bc);var bb=-1,P=J?J.length:0;if("number"!=typeof P){var K;return l(J,function(bd,cc,cb){return i(bd,cc,cb)?(K=bd,!1):void 0}),K}for(;++bb<P;){var M=J[bb];if(i(M,bb,J)){return M}}}function y(J,i,P){var M=-1,K=J?J.length:0;if(i=i&&"undefined"==typeof P?i:o.createCallback(i,P),"number"==typeof K){for(;++M<K&&i(J[M],M,J)!==!1;){}}else{l(J,i)}return J}function n(J,i,M){var K={};return i=o.createCallback(i,M),y(J,function(d,bb,P){bb=cH(i(d,bb,P)),(cN.call(K,bb)?K[bb]:K[bb]=[]).push(d)}),K}function cU(i,c){var bb=bh.call(arguments,2),P=-1,M="function"==typeof c,K=i?i.length:0,J=b7("number"==typeof K?K:0);return y(i,function(d){J[++P]=(M?c:d[c]).apply(d,bb)}),J}function cJ(i,c,P){var M=-1,K=i?i.length:0;if(c=o.createCallback(c,P),"number"==typeof K){for(var J=b7(K);++M<K;){J[M]=c(i[M],M,i)}}else{J=[],l(i,function(bb,bd,bc){J[++M]=c(bb,bd,bc)})}return J}function cv(J,i,bd){var bc=-1/0,bb=bc;if(!i&&E(J)){for(var P=-1,M=J.length;++P<M;){var K=J[P];K>bb&&(bb=K)}}else{i=!i&&bN(J)?ah:o.createCallback(i,bd),y(J,function(d,cd,cc){var cb=i(d,cd,cc);cb>bc&&(bc=cb,bb=d)})}return bb}function ca(J,i,bd){var bc=1/0,bb=bc;if(!i&&E(J)){for(var P=-1,M=J.length;++P<M;){var K=J[P];bb>K&&(bb=K)}}else{i=!i&&bN(J)?ah:o.createCallback(i,bd),y(J,function(d,cd,cc){var cb=i(d,cd,cc);bc>cb&&(bc=cb,bb=d)})}return bb}function bV(i,c){var M=-1,K=i?i.length:0;if("number"==typeof K){for(var J=b7(K);++M<K;){J[M]=i[M][c]}}return J||cJ(i,c)}function bK(J,i,bc,bb){if(!J){return bc}var P=arguments.length<3;i=o.createCallback(i,bb,4);var M=-1,K=J.length;if("number"==typeof K){for(P&&(bc=J[++M]);++M<K;){bc=i(bc,J[M],M,J)}}else{l(J,function(c,cb,bd){bc=P?(P=!1,c):i(bc,c,cb,bd)})}return bc}function bz(J,i,bd,bc){var bb=J,P=J?J.length:0,M=arguments.length<3;if("number"!=typeof P){var K=f(J);P=K.length}return i=o.createCallback(i,bc,4),y(J,function(c,cc,cb){cc=K?K[--P]:--P,bd=M?(M=!1,bb[cc]):i(bd,bb[cc],cc,cb)}),bd}function bl(i,d,J){return d=o.createCallback(d,J),Z(i,function(K,P,M){return !d(K,P,M)})}function a6(i){var c=-1,K=i?i.length:0,J=b7("number"==typeof K?K:0);return y(i,function(d){var M=C(bu()*(++c+1));J[c]=J[M],J[M]=d}),J}function S(d){var c=d?d.length:0;return"number"==typeof c?c:f(d).length}function D(J,i,bb){var P;i=o.createCallback(i,bb);var M=-1,K=J?J.length:0;if("number"==typeof K){for(;++M<K&&!(P=i(J[M],M,J));){}}else{l(J,function(d,bd,bc){return !(P=i(d,bd,bc))})}return !!P}function s(i,c,bb){var P=-1,M=i?i.length:0,K=b7("number"==typeof M?M:0);for(c=o.createCallback(c,bb),y(i,function(bc,cc,cb){var bd=K[++P]=ac();bd.criteria=c(bc,cc,cb),bd.index=P,bd.value=bc}),M=K.length,K.sort(ag);M--;){var J=K[M];K[M]=J.value,aa(J)}return K}function e(c){return c&&"number"==typeof c.length?W(c):h(c)}function cA(J){for(var i=-1,P=J?J.length:0,M=[];++i<P;){var K=J[i];K&&M.push(K)}return M}function cj(cc){var cb=-1,bd=bL(),bc=cc?cc.length:0,bb=R.apply(b5,bh.call(arguments,1)),P=[],M=bc>=aS&&bd===ak;if(M){var K=af(bb);K?(bd=aj,bb=K):M=!1}for(;++cb<bc;){var J=cc[cb];bd(bb,J)<0&&P.push(J)}return M&&aa(bb),P}function b0(J,i,P){var M=-1,K=J?J.length:0;for(i=o.createCallback(i,P);++M<K;){if(i(J[M],M,J)){return M}}return -1}function bP(J,i,bb){if(J){var P=0,M=J.length;if("number"!=typeof i&&null!=i){var K=-1;for(i=o.createCallback(i,bb);++K<M&&i(J[K],K,J);){P++}}else{if(P=i,null==P||bb){return J[0]}}return W(J,0,cS(j(0,P),M))}}function bq(J,i,P){if("number"==typeof P){var M=J?J.length:0;P=0>P?j(0,M+P):P||0}else{if(P){var K=bG(J,i);return J[K]===i?K:-1}}return J?ak(J,i,P):-1}function cs(J,i,bb){if(!J){return[]}var P=0,M=J.length;if("number"!=typeof i&&null!=i){var K=M;for(i=o.createCallback(i,bb);K--&&i(J[K],K,J);){P++}}else{P=null==i||bb?1:i||P}return W(J,0,cS(j(0,M-P),M))}function k(cZ){for(var cY=arguments,cd=cY.length,cc=-1,cb=ad(),bd=-1,bc=bL(),bb=cZ?cZ.length:0,P=[],M=ad();++cc<cd;){var K=cY[cc];cb[cc]=bc===ak&&(K?K.length:0)>=aS&&af(cc?cY[cc]:M)}cZ:for(;++bd<bb;){var J=cb[0];if(K=cZ[bd],(J?aj(J,K):bc(M,K))<0){for(cc=cd,(J||M).push(K);--cc;){if(J=cb[cc],(J?aj(J,K):bc(cY[cc],K))<0){continue cZ}}P.push(K)}}for(;cd--;){J=cb[cd],J&&aa(J)}return ab(cb),ab(M),P}function cF(J,i,bb){if(J){var P=0,M=J.length;if("number"!=typeof i&&null!=i){var K=M;for(i=o.createCallback(i,bb);K--&&i(J[K],K,J);){P++}}else{if(P=i,null==P||bb){return J[M-1]}}return W(J,j(0,M-P))}}function cp(J,i,M){var K=J?J.length:0;for("number"==typeof M&&(K=(0>M?j(0,K+M):cS(M,K-1))+1);K--;){if(J[K]===i){return K}}return -1}function b3(i,c,P){i=+i||0,P=+P||1,null==c&&(c=i,i=0);for(var M=-1,K=j(0,bj((c-i)/P)),J=b7(K);++M<K;){J[M]=i,i+=P}return J}function bR(J,i,bb){if("number"!=typeof i&&null!=i){var P=0,M=-1,K=J?J.length:0;for(i=o.createCallback(i,bb);++M<K&&i(J[M],M,J);){P++}}else{P=null==i||bb?1:j(0,i)}return W(J,P)}function bG(J,i,bc,bb){var P=0,M=J?J.length:P;for(bc=bc?o.createCallback(bc,bb,1):be,i=bc(i);M>P;){var K=P+M>>>1;bc(J[K])<i?P=K+1:M=K}return P}function bv(c){return E(c)||(arguments[0]=c?bh.call(c):b5),bg(R.apply(b5,arguments))}function a2(i){for(var c=-1,K=i?cv(bV(i,"length")):0,J=b7(0>K?0:K);++c<K;){J[c]=bV(i,c)}return J}function O(c){return cj(c,bh.call(arguments,1))}function A(c){return c?a2(arguments):[]}function p(J,i){for(var bb=-1,P=J?J.length:0,M={};++bb<P;){var K=J[bb];i?M[K]=i[bb]:M[K[0]]=K[1]}return M}function cW(d,c){return 1>d?c():function(){return --d<1?c.apply(this,arguments):void 0}}function cL(d,c){return cK.fastBind||bD&&arguments.length>2?bD.call.apply(bD,arguments):cw(d,c,bh.call(arguments,2))}function cx(J){for(var i=arguments.length>1?R.apply(b5,bh.call(arguments,1)):cG(J),P=-1,M=i.length;++P<M;){var K=i[P];J[K]=cL(J[K],J)}return J}function cf(d,c){return cw(d,c,bh.call(arguments,2),aU)}function bX(){var c=arguments;return function(){for(var a=arguments,d=c.length;d--;){a=[c[d].apply(this,a)]}return a[0]}}function bM(J,i,P){if(null==J){return be}var M=typeof J;if("function"!=M){if("object"!=M){return function(a){return a[J]}}var K=f(J);return function(a){for(var bc=K.length,bb=!1;bc--&&(bb=a3(a[K[bc]],J[K[bc]],aU));){}return bb}}return"undefined"==typeof i||aJ&&!aJ.test(r.call(J))?J:1===P?function(a){return J.call(i,a)}:2===P?function(bb,a){return J.call(i,bb,a)}:4===P?function(bd,bc,bb,a){return J.call(i,bd,bc,bb,a)}:function(bc,bb,a){return J.call(i,bc,bb,a)}}function bB(c2,c1,c0){function M(){a4(bc),a4(bb),cc=0,bc=bb=null}function K(){var a=P&&(!i||cc>1);M(),a&&(bd!==!1&&(cb=new b2),cY=c2.apply(cd,cZ))}function J(){M(),(P||bd!==c1)&&(cb=new b2,cY=c2.apply(cd,cZ))}var cZ,cY,cd,cc=0,cb=0,bd=!1,bc=null,bb=null,P=!0;if(c1=j(0,c1||0),c0===!0){var i=!0;P=!1}else{q(c0)&&(i=c0.leading,bd="maxWait" in c0&&j(c1,c0.maxWait||0),P="trailing" in c0?c0.trailing:P)}return function(){if(cZ=arguments,cd=this,cc++,a4(bb),bd===!1){i&&2>cc&&(cY=c2.apply(cd,cZ))}else{var d=new b2;bc||i||(cb=d);var a=bd-(d-cb);0>=a?(a4(bc),bc=null,cb=d,cY=c2.apply(cd,cZ)):bc||(bc=bZ(J,a))}return c1!==bd&&(bb=bZ(K,c1)),cY}}function bn(d){var i=bh.call(arguments,1);return bZ(function(){d.apply(aY,i)},1)}function a8(i,K){var J=bh.call(arguments,2);return bZ(function(){i.apply(aY,J)},K)}function U(i,d){function J(){var c=J.cache,a=aT+(d?d.apply(this,arguments):arguments[0]);return cN.call(c,a)?c[a]:c[a]=i.apply(this,arguments)}return J.cache={},J}function F(i){var d,J;return function(){return d?J:(d=!0,J=i.apply(this,arguments),i=null,J)}}function u(c){return cw(c,bh.call(arguments,1))}function g(c){return cw(c,bh.call(arguments,1),null,aU)}function cQ(J,i,bb){var P=!0,M=!0;bb===!1?P=!1:q(bb)&&(P="leading" in bb?bb.leading:P,M="trailing" in bb?bb.trailing:M),bb=ac(),bb.leading=P,bb.maxWait=i,bb.trailing=M;var K=bB(J,i,bb);return aa(bb),K}function cC(d,c){return function(){var a=[d];return cz.apply(a,arguments),c.apply(this,a)}}function bs(c){return null==c?"":cH(c).replace(aF,bW)}function be(c){return c}function Y(c){y(cG(c),function(a){var d=o[a]=c[a];o.prototype[a]=function(){var J=this.__wrapped__,i=[J];cz.apply(i,arguments);var K=d.apply(o,i);return J&&"object"==typeof J&&J===K?this:new cV(K)}})}function I(){return b8._=bI,this}function m(i,d){null==i&&null==d&&(d=1),i=+i||0,null==d?(d=i,i=0):d=+d||0;var J=bu();return i%1||d%1?i+cS(J*(d-i+parseFloat("1e-"+((J+"").length-1))),d):i+C(J*(d-i+1))}function cT(i,K){var J=i?i[K]:aY;return B(J)?i[K]():J}function cI(c1,cZ,cd){var cc=o.templateSettings;c1||(c1=""),cd=bF({},cd,cc);var bb,cb=bF({},cd.imports,cc.imports),bd=f(cb),bc=h(cb),P=0,M=cd.interpolate||aG,K="__p += '",J=ci((cd.escape||aG).source+"|"+M.source+"|"+(M===aK?aM:aG).source+"|"+(cd.evaluate||aG).source+"|$","g");c1.replace(J,function(a,c8,c7,c6,c5,i){return c7||(c7=c6),K+=c1.slice(P,i).replace(aE,ae),c8&&(K+="' +\n__e("+c8+") +\n'"),c5&&(bb=!0,K+="';\n"+c5+";\n__p += '"),c7&&(K+="' +\n((__t = ("+c7+")) == null ? '' : __t) +\n'"),P=i+a.length,a}),K+="';\n";var c4=cd.variable,c3=c4;c3||(c4="obj",K="with ("+c4+") {\n"+K+"\n}\n"),K=(bb?K.replace(aQ,""):K).replace(aP,"$1").replace(aO,"$1;"),K="function("+c4+") {\n"+(c3?"":c4+" || ("+c4+" = {});\n")+"var __t, __p = '', __e = _.escape"+(bb?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+K+"return __p\n}";var c2="\n/*\n//@ sourceURL="+(cd.sourceURL||"/lodash/template/source["+aC+++"]")+"\n*/";try{var c0=co(bd,"return "+K+c2).apply(aY,bc)}catch(cY){throw cY.source=K,cY}return cZ?c0(cZ):(c0.source=K,c0)}function cu(i,c,M){i=(i=+i)>-1?i:0;var K=-1,J=b7(i);for(c=o.createCallback(c,M,1);++K<i;){J[K]=c(K)}return J}function b9(c){return null==c?"":cH(c).replace(aN,a7)}function bU(d){var c=++aV;return cH(null==d?"":d)+c}function bJ(d,c){return c(d),d}function by(){return cH(this.__wrapped__)}function bk(){return this.__wrapped__}b8=b8?a0.defaults(window.Object(),b8,a0.pick(window,aD)):window;var b7=b8.Array,b6=b8.Boolean,b2=b8.Date,co=b8.Function,cn=b8.Math,cm=b8.Number,cl=b8.Object,ci=b8.RegExp,cH=b8.String,cr=b8.TypeError,b5=[],bT=cl.prototype,bI=b8._,bx=ci("^"+cH(bT.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),bj=cn.ceil,a4=b8.clearTimeout,R=b5.concat,C=cn.floor,r=co.prototype.toString,b=bx.test(b=cl.getPrototypeOf)&&b,cN=bT.hasOwnProperty,cz=b5.push,ch=b8.setImmediate,bZ=b8.setTimeout,bO=bT.toString,bD=bx.test(bD=bO.bind)&&bD,bp=bx.test(bp=cl.create)&&bp,ba=bx.test(ba=b7.isArray)&&ba,X=b8.isFinite,H=b8.isNaN,w=bx.test(w=cl.keys)&&w,j=cn.max,cS=cn.min,cE=b8.parseInt,bu=cn.random,bh=b5.slice,a1=bx.test(b8.attachEvent),N=bD&&!/\n|true/.test(bD+a1),z={};z[aA]=b7,z[ay]=b6,z[ax]=b2,z[aw]=co,z[au]=cl,z[av]=cm,z[at]=ci,z[ar]=cH,cV.prototype=o.prototype;var cK=o.support={};cK.fastBind=bD&&!N,o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:aK,variable:"",imports:{_:o}};var E=ba,t=function(J){var i,M=J,K=[];if(!M){return K}if(!ap[typeof J]){return K}for(i in M){cN.call(M,i)&&K.push(i)}return K},f=w?function(c){return q(c)?w(c):[]}:t,cP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cB=b4(cP),ck=function(c0,cZ,cY){var cd,cc=c0,cb=cc;if(!cc){return cb}var bd=arguments,bc=0,bb="number"==typeof cY?2:bd.length;if(bb>3&&"function"==typeof bd[bb-2]){var P=o.createCallback(bd[--bb-1],bd[bb--],2)}else{bb>2&&"function"==typeof bd[bb-1]&&(P=bd[--bb])}for(;++bc<bb;){if(cc=bd[bc],cc&&ap[typeof cc]){for(var M=-1,K=ap[typeof cc]&&f(cc),J=K?K.length:0;++M<J;){cd=K[M],cb[cd]=P?P(cb[cd],cc[cd]):cc[cd]}}}return cb},bF=function(cZ,cY,cd){var cc,cb=cZ,bd=cb;if(!cb){return bd}for(var bc=arguments,bb=0,P="number"==typeof cd?2:bc.length;++bb<P;){if(cb=bc[bb],cb&&ap[typeof cb]){for(var M=-1,K=ap[typeof cb]&&f(cb),J=K?K.length:0;++M<J;){cc=K[M],"undefined"==typeof bd[cc]&&(bd[cc]=cb[cc])}}}return bd},ct=function(J,i,bb){var P,M=J,K=M;if(!M){return K}if(!ap[typeof M]){return K}i=i&&"undefined"==typeof bb?i:o.createCallback(i,bb);for(P in M){if(i(M[P],P,J)===!1){return K}}return K},l=function(cc,cb,bd){var bc,bb=cc,P=bb;if(!bb){return P}if(!ap[typeof bb]){return P}cb=cb&&"undefined"==typeof bd?cb:o.createCallback(cb,bd);for(var M=-1,K=ap[typeof bb]&&f(bb),J=K?K.length:0;++M<J;){if(bc=K[M],cb(bb[bc],bc,cc)===!1){return P}}return P},cg=function(i){if(!i||bO.call(i)!=au){return !1}var d=i.valueOf,J="function"==typeof d&&(J=b(d))&&b(J);return J?i==J||b(i)==J:bm(i)},cO=Z,bE=bA(function a5(J,i,bc){for(var bb=-1,P=J?J.length:0,M=[];++bb<P;){var K=J[bb];bc&&(K=bc(K,bb,J)),E(K)?cz.apply(M,i?K:a5(K)):M.push(K)}return M}),bg=bA(function(cZ,cY,cd){var cc=-1,cb=bL(),bd=cZ?cZ.length:0,bc=[],bb=!cY&&bd>=aS&&cb===ak,P=cd||bb?ad():bc;if(bb){var M=af(P);M?(cb=aj,P=M):(bb=!1,P=cd?P:(ab(P),bc))}for(;++cc<bd;){var K=cZ[cc],J=cd?cd(K,cc,cZ):K;(cY?!cc||P[P.length-1]!==J:cb(P,J)<0)&&((cd||bb)&&P.push(J),bc.push(K))}return bb?(ab(P.array),aa(P)):cd&&ab(P),bc});N&&am&&"function"==typeof ch&&(bn=cL(ch,b8));var x=8==cE(aI+"08")?cE:function(d,c){return cE(bN(d)?d.replace(aH,""):d,c||0)};return o.after=cW,o.assign=ck,o.at=cR,o.bind=cL,o.bindAll=cx,o.bindKey=cf,o.compact=cA,o.compose=bX,o.countBy=bt,o.createCallback=bM,o.debounce=bB,o.defaults=bF,o.defer=bn,o.delay=a8,o.difference=cj,o.filter=Z,o.flatten=bE,o.forEach=y,o.forIn=ct,o.forOwn=l,o.functions=cG,o.groupBy=n,o.initial=cs,o.intersection=k,o.invert=b4,o.invoke=cU,o.keys=f,o.map=cJ,o.max=cv,o.memoize=U,o.merge=bo,o.min=ca,o.omit=a9,o.once=F,o.pairs=V,o.partial=u,o.partialRight=g,o.pick=G,o.pluck=bV,o.range=b3,o.reject=bl,o.rest=bR,o.shuffle=a6,o.sortBy=s,o.tap=bJ,o.throttle=cQ,o.times=cu,o.toArray=e,o.transform=v,o.union=bv,o.uniq=bg,o.unzip=a2,o.values=h,o.where=cO,o.without=O,o.wrap=cC,o.zip=A,o.zipObject=p,o.collect=cJ,o.drop=bR,o.each=y,o.extend=ck,o.methods=cG,o.object=p,o.select=Z,o.tail=bR,o.unique=bg,Y(o),o.chain=o,o.prototype.chain=function(){return this},o.clone=b1,o.cloneDeep=bQ,o.contains=cD,o.escape=bs,o.every=bf,o.find=L,o.findIndex=b0,o.findKey=br,o.has=cq,o.identity=be,o.indexOf=bq,o.isArguments=T,o.isArray=E,o.isBoolean=bS,o.isDate=bH,o.isElement=bw,o.isEmpty=bi,o.isEqual=a3,o.isFinite=Q,o.isFunction=B,o.isNaN=cX,o.isNull=cM,o.isNumber=cy,o.isObject=q,o.isPlainObject=cg,o.isRegExp=bY,o.isString=bN,o.isUndefined=bC,o.lastIndexOf=cp,o.mixin=Y,o.noConflict=I,o.parseInt=x,o.random=m,o.reduce=bK,o.reduceRight=bz,o.result=cT,o.runInContext=az,o.size=S,o.some=D,o.sortedIndex=bG,o.template=cI,o.unescape=b9,o.uniqueId=bU,o.all=bf,o.any=D,o.detect=L,o.findWhere=L,o.foldl=bK,o.foldr=bz,o.include=cD,o.inject=bK,l(o,function(d,c){o.prototype[c]||(o.prototype[c]=function(){var a=[this.__wrapped__];return cz.apply(a,arguments),d.apply(o,a)})}),o.first=bP,o.last=cF,o.take=bP,o.head=bP,l(o,function(d,c){o.prototype[c]||(o.prototype[c]=function(a,J){var i=d(this.__wrapped__,a,J);return null==a||J&&"function"!=typeof a?i:new cV(i)})}),o.VERSION="1.3.1",o.prototype.toString=by,o.prototype.value=bk,o.prototype.valueOf=bk,y(["join","pop","shift"],function(d){var c=b5[d];o.prototype[d]=function(){return c.apply(this.__wrapped__,arguments)}}),y(["push","reverse","sort","unshift"],function(d){var c=b5[d];o.prototype[d]=function(){return c.apply(this.__wrapped__,arguments),this}}),y(["concat","slice","splice"],function(d){var c=b5[d];o.prototype[d]=function(){return new cV(c.apply(this.__wrapped__,arguments))}}),o}var aY,aX=[],aW=[],aV=0,aU={},aT=+new Date+"",aS=75,aR=40,aQ=/\b__p \+= '';/g,aP=/\b(__p \+=) '' \+/g,aO=/(__e\(.*?\)|\b__t\)) \+\n'';/g,aN=/&(?:amp|lt|gt|quot|#39);/g,aM=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,aL=/\w*$/,aK=/<%=([\s\S]+?)%>/g,aJ=(aJ=/\bthis\b/)&&aJ.test(az)&&aJ,aI=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",aH=RegExp("^["+aI+"]*0+(?=.$)"),aG=/($^)/,aF=/[&<>"']/g,aE=/['\n\r\t\u2028\u2029\\]/g,aD=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],aC=0,aB="[object Arguments]",aA="[object Array]",ay="[object Boolean]",ax="[object Date]",aw="[object Function]",av="[object Number]",au="[object Object]",at="[object RegExp]",ar="[object String]",aq={};aq[aw]=!1,aq[aB]=aq[aA]=aq[ay]=aq[ax]=aq[av]=aq[au]=aq[at]=aq[ar]=!0;var ap={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ao={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},an=ap[typeof exports]&&exports,am=ap[typeof module]&&module&&module.exports==an&&module,al=ap[typeof global]&&global;!al||al.global!==al&&al.window!==al||(window=al);var a0=aZ._=az();aZ.each(a0,function(a,d){Object.hasOwnProperty.call(a0,a)&&!/VERSION/.test(name)&&(aZ[a]||(aZ[a]=d))})}),FD31.plugin("bootstrap",function(b){!function(c){c(function(){c.support.transition=function(){var d=function(){var g,f=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(g in e){if(void 0!==f.style[g]){return e[g]}}}();return d&&{end:d}}()})}(b),!function(e){var d='[data-foundry-dismiss="alert"]',f=function(a){e(a).on("click",d,this.close)};f.prototype.close=function(a){function g(){h.trigger("closed").remove()}var h,j=e(this),i=j.attr("data-target");i||(i=j.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),h=e(i),a&&a.preventDefault(),h.length||(h=j.hasClass("alert")?j:j.parent()),h.trigger(a=e.Event("close")),a.isDefaultPrevented()||(h.removeClass("in"),e.support.transition&&h.hasClass("fade")?h.on(e.support.transition.end,g):g())},e.fn.alert=function(a){return this.each(function(){var g=e(this),c=g.data("alert");c||g.data("alert",c=new f(this)),"string"==typeof a&&c[a].call(g)})},e.fn.alert.Constructor=f,e(document).on("click.alert.data-api",d,f.prototype.close)}(b),!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.button.defaults,e)};c.prototype.setState=function(g){var f="disabled",j=this.$element,i=j.data(),h=j.is("input")?"val":"html";g+="Text",i.resetText||j.data("resetText",j[h]()),j[h](i[g]||this.options[g]),setTimeout(function(){"loadingText"==g?j.addClass(f).attr(f,f):j.removeClass(f).removeAttr(f)},0)},c.prototype.toggle=function(){var e=this.$element.closest('[data-foundry-toggle="buttons-radio"]');e.hasClass("disabled")||(e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active"))},d.fn.button=function(a){return this.each(function(){var i=d(this),h=i.data("button"),g="object"==typeof a&&a;h||i.data("button",h=new c(this,g)),"toggle"==a?h.toggle():a&&h.setState(a)})},d.fn.button.defaults={loadingText:"loading..."},d.fn.button.Constructor=c,d(document).on("click.button.data-api","[data-foundry-toggle^=button]",function(a){var e=d(a.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})}(b),!function(d){var c=function(a,e){this.$element=d(a),this.options=e,this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",d.proxy(this.pause,this)).on("mouseleave",d.proxy(this.cycle,this))};c.prototype={cycle:function(a){return a||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},to:function(a){var j=this.$element.find(".item.active"),i=j.parent().children(),h=i.index(j),g=this;if(!(a>i.length-1||0>a)){return this.sliding?this.$element.one("slid",function(){g.to(a)}):h==a?this.pause().cycle():this.slide(a>h?"next":"prev",d(i[a]))}},pause:function(a){return a||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition.end&&(this.$element.trigger(d.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(r,q){var a,p=this.$element.find(".item.active"),o=q||p[r](),n=this.interval,m="next"==r?"left":"right",l="next"==r?"first":"last",k=this;if(this.sliding=!0,n&&this.pause(),o=o.length?o:this.$element.find(".item")[l](),a=d.Event("slide",{relatedTarget:o[0]}),!o.hasClass("active")){if(d.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(a),a.isDefaultPrevented()){return}o.addClass(r),o[0].offsetWidth,p.addClass(m),o.addClass(m),this.$element.one(d.support.transition.end,function(){o.removeClass([r,m].join(" ")).addClass("active"),p.removeClass(["active",m].join(" ")),k.sliding=!1,setTimeout(function(){k.$element.trigger("slid")},0)})}else{if(this.$element.trigger(a),a.isDefaultPrevented()){return}p.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return n&&this.cycle(),this}}},d.fn.carousel=function(a){return this.each(function(){var k=d(this),j=k.data("carousel"),i=d.extend({},d.fn.carousel.defaults,"object"==typeof a&&a),h="string"==typeof a?a:i.slide;j||k.data("carousel",j=new c(this,i)),"number"==typeof a?j.to(a):h?j[h]():i.interval&&j.cycle()})},d.fn.carousel.defaults={interval:5000,pause:"hover"},d.fn.carousel.Constructor=c,d(document).on("click.carousel.data-api","[data-foundry-slide]",function(a){var i,j=d(this),h=d(j.attr("data-target")||(i=j.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),g=d.extend({},h.data(),j.data());h.carousel(g),a.preventDefault()})}(b),!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.collapse.defaults,e),this.options.parent&&(this.$parent=d(this.options.parent)),this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var a,h,g,f;if(!this.transitioning){if(a=this.dimension(),h=d.camelCase(["scroll",a].join("-")),g=this.$parent&&this.$parent.find("> .accordion-group > .in"),g&&g.length){if(f=g.data("collapse"),f&&f.transitioning){return}g.collapse("hide"),f||g.data("collapse",null)}this.$element[a](0),d.support.transition&&this.$element[a](this.$element[0][h]),this.transition("addClass",d.Event("bootstrap-show"),"shown")}},hide:function(){var a;this.transitioning||(a=this.dimension(),this.reset(this.$element[a]()),this.transition("removeClass",d.Event("bootstrap-hide"),"hidden"),this.$element[a](0))},reset:function(f){var e=this.dimension();return this.$element.removeClass("collapse")[e](f||"auto")[0].offsetWidth,this.$element[null!==f?"addClass":"removeClass"]("collapse"),this},transition:function(a,j,i){var h=this,g=function(){"bootstrap-show"==j.type&&h.reset(),h.transitioning=0,h.$element.trigger(i)};this.$element.trigger(j),j.isDefaultPrevented()||(this.transitioning=1,this.$element[a]("in"),d.support.transition&&this.$element.hasClass("collapse")?this.$element.one(d.support.transition.end,g):g())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},d.fn.collapse=function(a){return this.each(function(){var i=d(this),h=i.data("collapse"),g="object"==typeof a&&a;h||i.data("collapse",h=new c(this,g)),"string"==typeof a&&h[a]()})},d.fn.collapse.defaults={toggle:!0},d.fn.collapse.Constructor=c,d(document).on("click.collapse.data-api","[data-foundry-toggle=collapse]",function(a){var i,j=d(this),h=j.attr("data-target")||a.preventDefault()||(i=j.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),g=d(h).data("collapse")?"toggle":j.data();j[d(h).hasClass("in")?"addClass":"removeClass"]("collapsed"),d(h).collapse(g)})}(b),!function(g){function i(a){g(f).each(function(){var c=h(g(this)),e=c.hasClass("open");c.removeClass("open"),e&&c.trigger("dropdownClose",[a.target])})}function h(a){var e,k=a.attr("data-target");return k||(k=a.attr("href"),k=k&&/#/.test(k)&&k.replace(/.*(?=#[^\s]*$)/,"")),e=g(k),e.length||(e=a.parent()),e}var f="[data-foundry-toggle=dropdown]",j=function(a){var d=g(a).on("click.dropdown.data-api",this.toggle);g("html").on("click.dropdown.data-api",function(){d.parent().removeClass("open")})};j.prototype={constructor:j,toggle:function(a){var e,d,k=g(this);if(!k.is(".disabled, :disabled")){return e=h(k),d=e.hasClass("open"),i(a),d||(e.toggleClass("open"),e.trigger("dropdownOpen",[a.target]),k.focus()),!1}},keydown:function(a){var n,m,l,k,e;if(/(38|40|27)/.test(a.keyCode)&&(n=g(this),a.preventDefault(),a.stopPropagation(),!n.is(".disabled, :disabled"))){if(l=h(n),k=l.hasClass("open"),!k||k&&27==a.keyCode){return n.click()}m=g("[role=menu] li:not(.divider) a",l),m.length&&(e=m.index(m.filter(":focus")),38==a.keyCode&&e>0&&e--,40==a.keyCode&&e<m.length-1&&e++,~e||(e=0),m.eq(e).focus())}}},g.fn.dropdown=function(a){return this.each(function(){var k=g(this),c=k.data("dropdown");c||k.data("dropdown",c=new j(this)),"string"==typeof a&&c[a].call(k)})},g.fn.dropdown.Constructor=j,g(document).on("click.dropdown.data-api",i).on("click.dropdown",".dropdown_ form, .dropdown-static",function(c){c.stopPropagation()}).on("click.dropdown.data-api",f,j.prototype.toggle).on("keydown.dropdown.data-api",f+", [role=menu]",j.prototype.keydown)}(b),!function(d){var c=function(a,e){this.options=e,this.$element=d(a).delegate('[data-dismiss="modal"]',"click.dismiss.modal",d.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};c.prototype={constructor:c,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var a=this,e=d.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var f=d.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(document.body),a.$element.show(),f&&a.$element[0].offsetWidth,a.$element.addClass("in").attr("aria-hidden",!1).focus(),a.enforceFocus(),f?a.$element.one(d.support.transition.end,function(){a.$element.focus().trigger("shown")}):a.$element.focus().trigger("shown")}))},hide:function(a){a&&a.preventDefault();a=d.Event("hide"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),d(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),d.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var a=this;d(document).on("focusin.modal",function(e){a.$element[0]===e.target||a.$element.has(e.target).length||a.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(a){27==a.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var a=this,e=setTimeout(function(){a.$element.off(d.support.transition.end),a.hideModal()},500);this.$element.one(d.support.transition.end,function(){clearTimeout(e),a.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(a){var g=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=d.support.transition&&g;this.$backdrop=d('<div class="modal-backdrop '+g+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?d.proxy(this.$element[0].focus,this.$element[0]):d.proxy(this.hide,this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),f?this.$backdrop.one(d.support.transition.end,a):a()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(d.support.transition.end,d.proxy(this.removeBackdrop,this)):this.removeBackdrop()):a&&a()}}},d.fn.modal=function(a){return this.each(function(){var i=d(this),h=i.data("modal"),g=d.extend({},d.fn.modal.defaults,i.data(),"object"==typeof a&&a);h||i.data("modal",h=new c(this,g)),"string"==typeof a?h[a]():g.show&&h.show()})},d.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},d.fn.modal.Constructor=c,d(document).on("click.modal.data-api",'[data-foundry-toggle="modal"]',function(a){var j=d(this),i=j.attr("href"),h=d(j.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),g=h.data("modal")?"toggle":d.extend({remote:!/#/.test(i)&&i},h.data(),j.data());a.preventDefault(),h.modal(g).one("hide",function(){j.focus()})})}(b),!function(d){var c=function(f,e){this.init("tooltip",f,e)};c.prototype={constructor:c,init:function(a,j,i){var h,g;this.type=a,this.$element=d(j),this.options=this.getOptions(i),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(h="hover"==this.options.trigger?"mouseenter":"focus",g="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(h+"."+this.type,this.options.selector,d.proxy(this.enter,this)),this.$element.on(g+"."+this.type,this.options.selector,d.proxy(this.leave,this))),this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(a){return a=d.extend({},d.fn[this.type].defaults,a,this.$element.data()),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},enter:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);return e.options.delay&&e.options.delay.show?(clearTimeout(this.timeout),e.hoverState="in",this.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show),void 0):e.show()},leave:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),e.options.delay&&e.options.delay.hide?(e.hoverState="out",this.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide),void 0):e.hide()},show:function(){var a,p,o,n,m,l,k;if(this.hasContent()&&this.enabled){switch(a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),l="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,p=/in/.test(l),a.detach().css({top:0,left:0,display:"block"}),this.options.container||"parent"){case"parent":a.insertAfter(this.$element);break;case"body":a.appendTo(document.body);break;default:var j=d(this.options.container);j.length?a.appendTo(j):a.insertAfter(this.$element)}switch(o=this.getPosition(p),n=a[0].offsetWidth,m=a[0].offsetHeight,p?l.split(" ")[1]:l){case"bottom":k={top:o.top+o.height,left:o.left+o.width/2-n/2};break;case"top":k={top:o.top-m,left:o.left+o.width/2-n/2};break;case"left":k={top:o.top+o.height/2-m/2,left:o.left-n};break;case"right":k={top:o.top+o.height/2-m/2,left:o.left+o.width}}a.offset(k).addClass(l).addClass("in")}},setContent:function(){var f=this.tip(),e=this.getTitle();f.find(".tooltip-inner")[this.options.html?"html":"text"](e),f.removeClass("fade in top bottom left right")},hide:function(){function a(){var f=setTimeout(function(){e.off(d.support.transition.end).detach()},500);e.one(d.support.transition.end,function(){clearTimeout(f),e.detach()})}var e=this.tip();return e.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?a():e.detach(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(a){return d.extend({},a?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var f,e=this.$element,g=this.options;return f=e.attr("data-original-title")||("function"==typeof g.title?g.title.call(e[0]):g.title)},tip:function(){return this.$tip=this.$tip||d(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);e[e.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},d.fn.tooltip=function(a){return this.each(function(){var i=d(this),h=i.data("tooltip"),g="object"==typeof a&&a;h||i.data("tooltip",h=new c(this,g)),"string"==typeof a&&h[a]()})},d.fn.tooltip.Constructor=c,d.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1,container:"parent"}}(b),!function(d){var c=function(f,e){this.init("popover",f,e)};c.prototype=d.extend({},d.fn.tooltip.Constructor.prototype,{constructor:c,setContent:function(){var f=this.tip(),e=this.getTitle(),g=this.getContent();f.find(".popover-title")[this.options.html?"html":"text"](e),f.find(".popover-content > *")[this.options.html?"html":"text"](g),f.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var f,e=this.$element,g=this.options;return f=e.attr("data-content")||("function"==typeof g.content?g.content.call(e[0]):g.content)},tip:function(){return this.$tip||(this.$tip=d(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),d.fn.popover=function(a){return this.each(function(){var i=d(this),h=i.data("popover"),g="object"==typeof a&&a;h||i.data("popover",h=new c(this,g)),"string"==typeof a&&h[a]()})},d.fn.popover.Constructor=c,d.fn.popover.defaults=d.extend({},d.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover popover-fd"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(b),!function(d){function c(a,j){var g,i=d.proxy(this.process,this),h=d(a).is("body")?d(window):d(a);this.options=d.extend({},d.fn.scrollspy.defaults,j),this.$scrollElement=h.on("scroll.scroll-spy.data-api",i),this.selector=(this.options.target||(g=d(a).attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=d("body"),this.refresh(),this.process()}c.prototype={constructor:c,refresh:function(){var e,a=this;this.offsets=d([]),this.targets=d([]),e=this.$body.find(this.selector).map(function(){var f=d(this),h=f.data("target")||f.attr("href"),g=/^#\w/.test(h)&&d(h);return g&&g.length&&[[g.position().top,h]]||null}).sort(function(g,f){return g[0]-f[0]}).each(function(){a.offsets.push(this[0]),a.targets.push(this[1])})},process:function(){var j,i=this.$scrollElement.scrollTop()+this.options.offset,h=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=h-this.$scrollElement.height(),m=this.offsets,l=this.targets,k=this.activeTarget;if(i>=n){return k!=(j=l.last()[0])&&this.activate(j)}for(j=m.length;j--;){k!=l[j]&&i>=m[j]&&(!m[j+1]||i<=m[j+1])&&this.activate(l[j])}},activate:function(a){var f,e;this.activeTarget=a,d(this.selector).parent(".active").removeClass("active"),e=this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]',f=d(e).parent("li").addClass("active"),f.parent(".dropdown-menu").length&&(f=f.closest("li.dropdown").addClass("active")),f.trigger("activate")}},d.fn.scrollspy=function(a){return this.each(function(){var i=d(this),h=i.data("scrollspy"),g="object"==typeof a&&a;h||i.data("scrollspy",h=new c(this,g)),"string"==typeof a&&h[a]()})},d.fn.scrollspy.Constructor=c,d.fn.scrollspy.defaults={offset:10},d(window).on("load",function(){d('[data-foundry-spy="scroll"]').each(function(){var a=d(this);a.scrollspy(a.data())})})}(b),!function(d){var c=function(a){this.element=d(a)};c.prototype={constructor:c,show:function(){var j,i,h,a=this.element,l=a.closest("ul:not(.dropdown-menu)"),k=a.attr("data-target");k||(k=a.attr("href"),k=k&&k.replace(/.*(?=#[^\s]*$)/,"")),a.parent("li").hasClass("active")||(j=l.find(".active:last a")[0],h=d.Event("show",{relatedTarget:j}),a.trigger(h),h.isDefaultPrevented()||(i=d(k),this.activate(a.parent("li"),l),this.activate(i,i.parent(),function(){a.trigger({type:"shown",relatedTarget:j})})))},activate:function(a,l,k){function h(){j.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),a.addClass("active"),i?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active"),k&&k()}var j=l.find("> .active"),i=k&&d.support.transition&&j.hasClass("fade");i?j.one(d.support.transition.end,h):h(),j.removeClass("in")}},d.fn.tab=function(a){return this.each(function(){var g=d(this),f=g.data("tab");f||g.data("tab",f=new c(this)),"string"==typeof a&&f[a]()})},d.fn.tab.Constructor=c,d(document).on("click.tab.data-api",'[data-foundry-toggle="tab"], [data-foundry-toggle="pill"]',function(a){a.preventDefault(),d(this).tab("show")})}(b),!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=d(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};c.prototype={constructor:c,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var a=d.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:a.top+a.height,left:a.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var a;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(a=d.isFunction(this.source)?this.source(this.query,d.proxy(this.process,this)):this.source,a?this.process(a):this)},process:function(a){var e=this;return a=d.grep(a,function(f){return e.matcher(f)}),a=this.sorter(a),a.length?this.render(a.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return ~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(g){for(var h,f=[],j=[],i=[];h=g.shift();){h.toLowerCase().indexOf(this.query.toLowerCase())?~h.indexOf(this.query)?j.push(h):i.push(h):f.push(h)}return f.concat(j,i)},highlighter:function(f){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return f.replace(new RegExp("("+e+")","ig"),function(h,g){return"<strong>"+g+"</strong>"})},render:function(a){var e=this;return a=d(a).map(function(f,g){return f=d(e.options.item).attr("data-value",g),f.find("a").html(e.highlighter(g)),f[0]}),a.first().addClass("active"),this.$menu.html(a),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),a=e.next();a.length||(a=d(this.$menu.find("li")[0])),a.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),e=a.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",d.proxy(this.blur,this)).on("keypress",d.proxy(this.keypress,this)).on("keyup",d.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",d.proxy(this.keydown,this)),this.$menu.on("click",d.proxy(this.click,this)).on("mouseenter","li",d.proxy(this.mouseenter,this))},eventSupported:function(f){var e=f in this.$element;return e||(this.$element.setAttribute(f,"return;"),e="function"==typeof this.$element[f]),e},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(a){this.suppressKeyPressRepeat=!~d.inArray(a.keyCode,[40,38,9,13,27]),this.move(a)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(){var a=this;setTimeout(function(){a.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(a){this.$menu.find(".active").removeClass("active"),d(a.currentTarget).addClass("active")}},d.fn.typeahead=function(a){return this.each(function(){var i=d(this),h=i.data("typeahead"),g="object"==typeof a&&a;h||i.data("typeahead",h=new c(this,g)),"string"==typeof a&&h[a]()})},d.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},d.fn.typeahead.Constructor=c,d(document).on("focus.typeahead.data-api",'[data-foundry-provide="typeahead"]',function(a){var e=d(this);e.data("typeahead")||(a.preventDefault(),e.typeahead(e.data()))})}(b),!function(d){var c=function(a,e){this.options=d.extend({},d.fn.affix.defaults,e),this.$window=d(window).on("scroll.affix.data-api",d.proxy(this.checkPosition,this)).on("click.affix.data-api",d.proxy(function(){setTimeout(d.proxy(this.checkPosition,this),1)},this)),this.$element=d(a),this.checkPosition()};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var j,a=d(document).height(),p=this.$window.scrollTop(),o=this.$element.offset(),n=this.options.offset,m=n.bottom,l=n.top,k="affix affix-top affix-bottom";"object"!=typeof n&&(m=l=n),"function"==typeof l&&(l=n.top()),"function"==typeof m&&(m=n.bottom()),j=null!=this.unpin&&p+this.unpin<=o.top?!1:null!=m&&o.top+this.$element.height()>=a-m?"bottom":null!=l&&l>=p?"top":!1,this.affixed!==j&&(this.affixed=j,this.unpin="bottom"==j?o.top-p:null,this.$element.removeClass(k).addClass("affix"+(j?"-"+j:"")))}},d.fn.affix=function(a){return this.each(function(){var i=d(this),h=i.data("affix"),g="object"==typeof a&&a;h||i.data("affix",h=new c(this,g)),"string"==typeof a&&h[a]()})},d.fn.affix.Constructor=c,d.fn.affix.defaults={offset:0},d(window).on("load",function(){d('[data-foundry-spy="affix"]').each(function(){var a=d(this),e=a.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),a.affix(e)})})}(b),!function(d){var c=function(a,f){if(this.$element=d(a),this.$note=d('<div class="alert"></div>'),this.options=d.extend(!0,d.fn.notify.defaults,f),this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message")),this.options.closable){var e=d('<a class="close pull-right" href="javascript: void(0);">&times;</a>')}return d(e).on("click",d.proxy(onClose,this)),this.$note.prepend(e),this};onClose=function(){this.options.onClose(),d(this.$note).remove(),this.options.onClosed()},c.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3000).fadeOut("slow",d.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},c.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3000).fadeOut("slow",d.proxy(onClose,this)):onClose.call(this)},d.fn.notify=function(e){return new c(this,e)},d.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3000},message:null,onClose:function(){},onClosed:function(){}}}(b)}),FD31.plugin("responsive",function(f){f.responsive=function(d,c){return new g(d,c)},f.fn.responsive=function(a){if(a){var j=this,i={elementWidth:function(b){return b.outerWidth(!0)},conditions:a};f.responsive(j,i)}return this};var e=f(window),h=f.isFunction,g=function(j,i){var b=this,j=f(j),a=j.data("$responsive");a&&a.destroy(),f.extend(b,{elem:j,options:i,conditions:f.sortBy(f.makeArray(i.conditions),function(c){return c.at}),event:"resize.responsive"+f.uid(),handler:f.debounce(function(){b.set()},250)}),delete i.conditions,j.data("$responsive",b),f(function(){e.on(b.event,b.handler),b.set()}),f(window).load(function(){b.set()})};f.extend(g.prototype,{set:function(){var a=this,c=a.options.elementWidth;a.elem.each(function(){var d=f(this),b=h(c)?c(d):c;a.removeCondition(d.data("currentCondition"),d),f.each(a.conditions,function(i,k){var j=k.at;return j>=b?(a.applyCondition(k,d),!1):void 0})})},applyCondition:function(a,l){var k,j,i,c;(k=a.switchTo)&&l.addClass(k),(j=a.alsoSwitch)&&f.each(j,function(d,m){f(d).addClass(m)}),(i=a.switchStylesheet)&&f.each(f.makeArray(i),function(m,o){var n=f('link[href$="'+o+'"]');n.length<1&&f("<link/>").attr({rel:"stylesheet",type:"text/css",href:o}).appendTo("head")}),(c=a.whenApplied)&&h(c)&&c(),l.data("currentCondition",a).trigger("responsive",[a])},removeCondition:function(a,l){if(a){var k,j,i,c;(k=a.switchTo)&&l.removeClass(k),(j=a.alsoSwitch)&&f.each(j,function(d,m){f(d).removeClass(m)}),(i=a.switchStylesheet)&&f.each(f.makeArray(i),function(d,m){f('link[href$="'+m+'"]').remove()}),(c=a.whenRemoved)&&h(c)&&c(),l.removeData("currentCondition")}},resetToDefault:function(a){var j=this,i=j.elem;f.each(j.conditions,function(b,c){a&&b==a||j.removeCondition(c,i)})},destroy:function(){e.off(this.event);var a=this;a.elem.each(function(){var c=f(this);a.removeCondition(c.data("currentCondition"),c)})}})}),FD31.plugin("utils",function(b){b.IE=function(){if(-1!=navigator.appVersion.indexOf("MSIE 10")){return 10}for(var f,e=3,h=document.createElement("div"),g=h.getElementsByTagName("i");e++,h.innerHTML="<!--[if gt IE "+e+"]><i></i><![endif]-->",g[0];){}return e>4?e:f}(),b.uid=function(d,c){return(d?d:"")+Math.random().toString().replace(".","")+(c?c:"")},b.isDeferred=function(a){return a&&b.isFunction(a.always)},b.distinct=function(a){var h=b.unique;if(!(a.length<1)){if(a[0].nodeType){return h.apply(this,arguments)}if("object"==typeof a[0]){var g=Math.random(),f=[];return b.each(a,function(c){a[c][g]||(f.push(a[c]),a[c][g]=!0)}),b.each(f,function(c){delete f[c][g]}),f}return b.grep(a,function(i,e){return b.inArray(i,a)===e})}},b.trimSeparators=function(a,h,g){var f=h;return a=a.replace(new RegExp("^["+f+"\\s]+|["+f+",\\s]+$","g"),"").replace(new RegExp(f+"["+f+"\\s]*"+f,"g"),f).replace(new RegExp("[\\s]+"+f,"g"),f).replace(new RegExp(f+"[\\s]+","g"),f),g&&(a=b.distinct(a.split(f)).join(f)),a},b.isNumeric=function(c){return !isNaN(parseFloat(c))&&isFinite(c)},b.Number={rotate:function(f,e,h,g){return void 0===g&&(g=0),f+=g,e>f?f+=h+1:f>h&&(f-=h+1),f}},b.fn.stretchToFit=function(){return b.each(this,function(){var a=b(this);a.css("width","100%").css("width",2*a.width()-a.outerWidth(!0)-parseInt(a.css("borderLeftWidth"))-parseInt(a.css("borderRightWidth")))})},b.fn.serializeObject=function(){var a={};return b.each(b(this).serializeArray(),function(f,e){a.hasOwnProperty(e.name)?(b.isArray(a[e.name])||(a[e.name]=[a[e.name]]),a[e.name].push(e.value)):a[e.name]=e.value}),a},b.fn.serializeJSON=function(){return JSON.stringify(b(this).serializeObject())},b.toHTML=function(a){return b("<div>").html(a).html()},b.fn.toHTML=function(){return b.toHTML(this.clone())},function(){var a=function(c){this.items=c,this.start=0,this.end=c.length-1,this.node=null,this.stopped=!1};b.extend(a.prototype,{isLooping:function(){return this.stopped?!1:Math.abs(this.start-this.end)>1?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(c){c?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=!0}}),b.Bloop=function(c){return new a(c)}}(),b.remap=function(a,f,e){return b.each(e,function(c,g){a[g]=f[g]}),obj},b.deletes=function(a,d){b.each(d,function(e,f){delete a[f]})},function(){var a=function(c){this.threads=[],this.threadCount=0,this.threadLimit=c.threadLimit||1,this.threadDelay=c.threadDelay||0};b.extend(a.prototype,{add:function(d,e){b.isFunction(d)&&(d.type=e||"normal","deferred"==e&&(d.deferred=b.Deferred().always(b.proxy(this.next,this))),this.threads.push(d),this.run())},addDeferred:function(c){return this.add(c,"deferred")},next:function(){this.threadCount--,this.run()},run:function(){var c=this;setTimeout(function(){if(!(c.threads.length<1)&&c.threadCount<c.threadLimit){c.threadCount++;var d=c.threads.shift();try{d.call(d,d.deferred)}catch(e){console.error(e)}!d.deferred&&c.next()}},c.threadDelay)}}),b.Threads=function(c){return new a(c)}}(),function(){var a=b.isFunction,d=function(){this.lastId=0};d.prototype.queue=function(h){var g=this,f=b.uid();return g.lastId=f,function(){if(g.lastId===f){var c=arguments,c=a(h)?h.apply(this,c):c;return a(g.fn)?g.fn.apply(this,c):c}}},b.Enqueue=function(c){var g=new d;b.isFunction(c)&&(g.fn=c);var f=b.proxy(g.queue,g);return f.reset=function(){g.lastId=0},f}}(),function(){var a="___eventable",h=["on","off","fire"],g=function(c){return c.split(".")[0]},f=function(c){this.fnList={},this.events={},this.mode=c};b.extend(f.prototype,{createEvent:function(c){return this.events[c]=b.Callbacks(this.mode)},on:function(d,k){if(!d||!b.isFunction(k)){return this}var j=this.fnList;(j[d]||(j[d]=[])).push(k);var i=g(d);return(this.events[i]||this.createEvent(i)).add(k),this},off:function(d){if(!d){return this}var k=g(d),j=this.events[k];if(!j){return this}var i=function(c){b.each(c,function(l,e){j.remove(e)})};return k!==d?b.each(this.fnList,function(e,c){e.indexOf(k)>-1&&i(c)}):i(this.fnList[d]),this},fire:function(d){var e=this.events[d];if(e){return e.fire.apply(e,b.makeArray(arguments).slice(1)),this}},destroy:function(){for(name in this.events){this.events[name].disable()}}}),b.eventable=function(i,e){var c=i[a];return c&&"destroy"===e?(c.destroy(),b.deletes(i,h),delete i[a]):(c=i[a]=new f(e),i.on=b.proxy(c.on,c),i.off=b.proxy(c.off,c),i.fire=b.proxy(c.fire,c),i)}}(),b.Chunk=function(a,f){b.isArray(a)&&(a=[]);var f=b.extend({},{size:256,every:1000},f),e=b.extend(b.Deferred(),{size:f.size,every:f.every,from:0,to:a.length,process:function(c){return e.process.fn=c,e},chunkStart:function(c){return e.chunkStart.fn=c,e},chunkEnd:function(c){return e.chunkEnd.fn=c,e},start:function(){return e.stopped=!1,e.iterate(),e},iterate:function(){if(!e.stopped){var d=e.process.fn;if(d){e.to=from.size+e.size;var h=a.length;e.to>h&&(e.to=h);var g={from:e.from,to:e.to};for(e.chunkStart.fn&&e.chunkStart.fn.call(e,g.from,g.to);e.from<e.to&&!e.stopped;){d.call(e,a[e.from]),e.from++}return e.chunkEnd.fn&&e.chunkEnd.fn.call(e,g.from,g.to),e.completed=e.from>=a.length-1,e.completed?e.resolveWith(e):e.nextIteration=setTimeout(e.iterate,e.every),e}}},pause:function(){return e.stopped=!0,clearTimeout(e.nextIteration),e},restart:function(){return"rejected"===e.state()?e:(e.from=0,e.start(),e)},stop:function(){return e.pause(),e.rejectWith(e,[e.from]),e}});return e},b.fn.disabled=function(c){return void 0===c?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!c).toggleClass("disabled",!!c)},b.fn.enabled=function(c){return void 0===c?!this.disabled():this.disabled(!c)},function(){var a=b.Ajax=function(h){var g=b.Deferred(),f=arguments;return b.isPlainObject(h)&&b.isFunction(h.beforeCreate)&&h.beforeCreate(g),a.queue.addDeferred(function(d){g.xhr=b.ajax.apply(null,f).pipe(g.resolve,g.reject,g.notify),setTimeout(d.resolve,a.requestInterval)}),g};a.queue=b.Threads({threadLimit:1}),a.requestInterval=1200}(),b.callback=function(a,f){if(b.isFunction(a)){var e=b.uid("cb");return window[e]=function(){return f||delete window[e],a.apply(null,arguments)},e}if(b.isString(a)){switch(a){case"destroy":var e=f;delete window[e]}}},b.fn.visible=function(r){var q=b(this),p=b(window);if(!(q.length<1)){var o=p.scrollTop(),n=o+p.height(),m=q.offset().top,l=m+q.height(),k=r===!0?l:m,a=r===!0?m:l;return n>=a&&k>=o}},b.fn.selectAll=function(){return this.each(function(){this.select()})},b.fn.unselect=function(){return this.each(function(){var d=this,c=d.value;d.value+=" ",d.value=c})},b.fn.addTransitionClass=function(e,d){var f=this.addClass(e);return setTimeout(function(){f.removeClass(e)},d||0),this},b.fn.switchClass=function(a,h){var h=h||"-",g=a.split(h)[0]+h,f=g.length;return this.each(function(){var e=b(this),d=b.map(e.attr("class").split(" "),function(c){return c.slice(0,f)==g||""==c?null:c});d.push(a),e.attr("class",d.join(" "))})},b.sanitizeHTML=function(a){return b(b.parseHTML(a,document,!0)).toHTML()},b.buildHTML=function(r,q){if(r instanceof b){return r}var r=b.trim(r),p=[],o=b.buildFragment([r],document,p),n=b.merge([],o.childNodes);if(!q&&p.length>0){var m=document.createElement("script");m.text=b.callback(function(){b(p).remove()})+"();";for(var k,a,l=n.length-1;(k=n[l--])&&("SCRIPT"===k.nodeName?a=n.push(m):1===k.nodeType&&(a=k.appendChild(m)),!a);){}a||n.push(m),p.push(m)}return b(n)},b.fn.filterBy=function(f,e,h){var h=h||"=",g="[data-"+f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+h+e+"]";return this.filter(g)},b.intersects=function(a,d){return b.isArray(d)&&(d={top:d.y,left:d.x,bottom:d.y,right:d.x}),d.left<=a.right&&a.left<=d.right&&d.top<=a.bottom&&a.top<=d.bottom},b.fn.intersectsWith=function(a,n,m,l){var k=this.offset(),j={top:k.top,left:k.left,bottom:k.top+(sourceHeight=this.height()),right:k.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight},i={top:a,left:n,bottom:a+(l||(l=0)),right:n+(m||(m=0)),width:m,height:l};return b.intersects(j,i)?{reference:j,subject:i}:!1},b.download=function(a){return b("<iframe>").hide().appendTo("body").bind("load",function(){b(this).remove()}).attr("src",a)}}),FD31.plugin("uri",function(e){e.isUrl=function(g){var c=/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return c.test(g)};var d=function(t){var s=function(j){var z,y,x,w,v,u,i=[];if("undefined"==typeof j||null===j||""===j){return i}for(0===j.indexOf("?")&&(j=j.substring(1)),y=j.toString().split(/[&;]/),z=0;z<y.length;z++){x=y[z],w=x.split("="),v=w[0],u=-1===x.indexOf("=")?null:null===w[1]?"":w[1],i.push([v,u])}return i},r=s(t),q=function(){var c,h,g="";for(c=0;c<r.length;c++){h=r[c],g.length>0&&(g+="&"),g+=null===h[1]?h[0]:h.join("=")}return g.length>0?"?"+g:g},p=function(b){return b=decodeURIComponent(b),b=b.replace("+"," ")},o=function(g){var c,h;for(h=0;h<r.length;h++){if(c=r[h],p(g)===p(c[0])){return c[1]}}},n=function(g){var i,h,c=[];for(i=0;i<r.length;i++){h=r[i],p(g)===p(h[0])&&c.push(h[1])}return c},m=function(j,c){var x,w,v,u,y=[];for(x=0;x<r.length;x++){w=r[x],v=p(w[0])===p(j),u=p(w[1])===p(c),(1===arguments.length&&!v||2===arguments.length&&!v&&!u)&&y.push(w)}return r=y,this},l=function(g,c,h){return 3===arguments.length&&-1!==h?(h=Math.min(h,r.length),r.splice(h,0,[g,c])):arguments.length>0&&r.push([g,c]),this},k=function(h,c,w){var u,i,v=-1;if(3===arguments.length){for(u=0;u<r.length;u++){if(i=r[u],p(i[0])===p(h)&&decodeURIComponent(i[1])===p(w)){v=u;break}}m(h,w).addParam(h,c,v)}else{for(u=0;u<r.length;u++){if(i=r[u],p(i[0])===p(h)){v=u;break}}m(h),l(h,c,v)}return this};return{getParamValue:o,getParamValues:n,deleteParam:m,addParam:l,replaceParam:k,toString:q}},f=function(al){var ak=!1,aj=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,ai=function(j){for(var i={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],n={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},m=i[ak?"strict":"loose"].exec(j),l={},k=14;k--;){l[o[k]]=m[k]||""}return l[n.name]={},l[o[12]].replace(n.parser,function(h,g,p){g&&(l[n.name][g]=p)}),l},ah=ai(al||""),ag=new d(ah.query),af=function(g){return"undefined"!=typeof g&&(ah.protocol=g),ah.protocol},ae=null,ad=function(g){return"undefined"!=typeof g&&(ae=g),null===ae?-1!==ah.source.indexOf("//"):ae},ac=function(g){return"undefined"!=typeof g&&(ah.userInfo=g),ah.userInfo},ab=function(g){return"undefined"!=typeof g&&(ah.host=g),ah.host},aa=function(g){return"undefined"!=typeof g&&(ah.port=g),ah.port},Z=function(g){return"undefined"!=typeof g&&(ah.path=g),ah.path},Y=function(g){return"undefined"!=typeof g&&(ag=new d(g)),ag},W=function(g){return"undefined"!=typeof g&&(ah.anchor=g),ah.anchor},U=function(g){return af(g),this},S=function(g){return ad(g),this},Q=function(g){return ac(g),this},O=function(g){return ab(g),this},M=function(g){return aa(g),this},K=function(g){return Z(g),this},I=function(g){return Y(g),this},c=function(g){return W(g),this},b=function(g){return Y().getParamValue(g)},X=function(g){return Y().getParamValues(g)},V=function(h,g){return 2===arguments.length?Y().deleteParam(h,g):Y().deleteParam(h),this},T=function(h,g,i){return 3===arguments.length?Y().addParam(h,g,i):Y().addParam(h,g),this},R=function(h,g,i){return 3===arguments.length?Y().replaceParam(h,g,i):Y().replaceParam(h,g),this},P=function(h){if(void 0===h){return ah.path}if("/"==h.substring(0,1)){return ah.path=h}var g=ah.path.split("/"),j=h.split("/");""===g.slice(-1)[0]&&g.pop();for(var i;i=j.shift();){switch(i){case"..":g.length>1&&g.pop();break;case".":break;default:g.push(i)}}return ah.path=g.join("/"),this},N=function(){var h="",g=function(i){return null!==i&&""!==i};return g(af())?(h+=af(),af().indexOf(":")!==af().length-1&&(h+=":"),h+="//"):ad()&&g(ab())&&(h+="//"),g(ac())&&g(ab())&&(h+=ac(),ac().indexOf("@")!==ac().length-1&&(h+="@")),g(ab())&&(h+=ab(),g(aa())&&(h+=":"+aa())),g(Z())?h+=Z():g(ab())&&(g(Y().toString())||g(W()))&&(h+="/"),g(Y().toString())&&(0!==Y().toString().indexOf("?")&&(h+="?"),h+=Y().toString()),g(W())&&(0!==W().indexOf("#")&&(h+="#"),h+=W()),h},L=function(a){var g=al.match(aj)||[];return void 0===a?g:g[a]||""},J=function(){return new f(N())};return{protocol:af,hasAuthorityPrefix:ad,userInfo:ac,host:ab,port:aa,path:Z,query:Y,anchor:W,setProtocol:U,setHasAuthorityPrefix:S,setUserInfo:Q,setHost:O,setPort:M,setPath:K,setQuery:I,setAnchor:c,getQueryParamValue:b,getQueryParamValues:X,deleteQueryParam:V,addQueryParam:T,replaceQueryParam:R,extract:L,toPath:P,toString:N,clone:J}};e.uri=function(b){return new f(b)}}),FD31.plugin("mvc",function($){!function(){var d,a={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},b=function(a,b,c){return void 0!==a[b]?a[b]:c&&(a[b]={})},c=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},e=$.String=$.extend($.String||{},{getObject:d=function(d,e,f){var i,j,k,g=d?d.split(a.dot):[],h=g.length,l=0;if(e=$.isArray(e)?e:[e||window],0==h){return e[0]}for(;i=e[l++];){for(k=0;h-1>k&&c(i);k++){i=b(i,g[k],f)}if(c(i)&&(j=b(i,g[k],f),void 0!==j)){return f===!1&&delete i[g[k]],j}}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){return a=e.classize(a),a.charAt(0).toLowerCase()+a.substr(1)},classize:function(b,c){for(var d=b.split(a.undHash),f=0;f<d.length;f++){d[f]=e.capitalize(d[f])}return d.join(c||"")},niceName:function(a){return e.classize(a," ")},underscore:function(b){return b.replace(a.colons,"/").replace(a.words,"$1_$2").replace(a.lowUp,"$1_$2").replace(a.dash,"_").toLowerCase()},sub:function(b,c,e){var f=[];return f.push(b.replace(a.replacer,function(a,b){var g=d(a,c,"boolean"==typeof e?!e:e)||d(b,c,"boolean"==typeof e?!e:e),h=typeof g;return"object"!==h&&"function"!==h||null===h?""+g:(f.push(g),"")})),f.length<=1?f[0]:f},_regs:a})}(),function(){$.String.rsplit=function(a,b){for(var e,f,c=b.exec(a),d=[];null!==c;){e=c.index,f=b.lastIndex,0!==e&&(d.push(a.substring(0,e)),a=a.slice(e)),d.push(c[0]),a=a.slice(c[0].length),c=b.exec(a)}return""!==a&&d.push(a),d}}(),function(){var a=/^\d+$/,b=/([^\[\]]+)|(\[\])/g,c=/\+/g,d=/([^?#]*)(#.*)?$/;$.String=$.extend($.String||{},{deparam:function(e){if(!e||!d.test(e)){return{}}for(var h,f={},g=e.split("&"),i=0;i<g.length;i++){h=f;var j=g[i].split("=");2!=j.length&&(j=[j[0],j.slice(1).join("=")]);for(var k=decodeURIComponent(j[0].replace(c," ")),l=decodeURIComponent(j[1].replace(c," ")),m=k.match(b),n=0;n<m.length-1;n++){var o=m[n];h[o]||(h[o]=a.test(m[n+1])||"[]"==m[n+1]?[]:{}),h=h[o]}lastPart=m[m.length-1],"[]"==lastPart?h.push(l):h[lastPart]=l}return f}})}(),function(){var a=$.cleanData;$.cleanData=function(b){for(var d,c=0;void 0!==(d=b[c]);c++){$(d).triggerHandler("destroyed")}a(b)}}(),function(){var a=$.fn.closest;$.fn.closest=function(b,c){var e,f,h,j,j,d={},k=!0,l=b;if("string"==typeof b&&(l=[b]),$.each(l,function(a,c){if(0==c.indexOf(">")){if(-1!=c.indexOf(" ")){throw" closest does not work with > followed by spaces!"}d[l[a]=c.substr(1)]=c,"string"==typeof b&&(b=c.substr(1)),k=!1}}),e=a.call(this,b,c),k){return e}for(h=0;h<e.length;){f=e[h],j=f.selector,void 0===d[j]||(f.selector=d[j],d[j]=!1,"string"==typeof f.selector&&f.elem.parentNode===c)?h++:e.splice(h,1)}return e}}(),function(){$.cookie=function(a,b,c){if("undefined"==typeof b){var i=null;if(document.cookie&&""!=document.cookie){for(var j=document.cookie.split(";"),k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}}if(jQuery.evalJSON&&i&&i.match(/^\s*\{/)){try{i=jQuery.evalJSON(i)}catch(m){}}return i}c=c||{},null===b&&(b="",c.expires=-1),"object"==typeof b&&jQuery.toJSON&&(b=jQuery.toJSON(b));var d="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var e;"number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+24*c.expires*60*60*1000)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")}}(),function(){var a=!1,b=$.makeArray,c=$.isFunction,d=$.isArray,e=$.extend,f=$.String.getObject,g=function(a,c){return a.concat(b(c))},h=/xyz/.test(function(){})?/\b_super\b/:/.*/,i=function(a,b,d){d=d||a;for(var e in a){d[e]=c(a[e])&&c(b[e])&&h.test(a[e])?function(a,c){return function(){var e,d=this._super;return this._super=b[a],e=c.apply(this,arguments),this._super=d,e}}(e,a[e]):a[e]}},j="prototype";clss=$.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)},e(clss,{proxy:function(a){var e,c=b(arguments);return a=c.shift(),d(a)||(a=[a]),e=this,function(){for(var f,j,b=g(c,arguments),h=a.length,i=0;h>i;i++){j=a[i],j&&(f="string"==typeof j,f&&e._set_called&&(e.called=j),b=(f?e[j]:j).apply(e,b||[]),h-1>i&&(b=!d(b)||b._use_call?[b]:b))}return b}},newInstance:function(){var b,a=this.rawInstance();return a.setup&&(b=a.setup.apply(a,arguments)),a.init&&a.init.apply(a,d(b)?b:arguments),a},setup:function(a){return this.defaults=e(!0,{},a.defaults,this.defaults),arguments},rawInstance:function(){a=!0;var b=new this;return a=!1,b},extend:function(b,c,d){function p(){return a?void 0:this.constructor!==p&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof b&&(d=c,c=b,b=null),d||(d=c,c=null),d=d||{};var l,m,n,o,h=this,k=this[j];a=!0,o=new this,a=!1,i(d,k,o);for(l in this){this.hasOwnProperty(l)&&(p[l]=this[l])}if(i(c,this,p),b){var q;c&&c.root&&(q=c.root,$.isString(q)&&(q=f(q,window,!0)));var r=b.split(/\./),m=r.pop(),s=f(r.join("."),q||window,!0),n=s;e(!0,p,s[m]),s[m]=p}e(p,{prototype:o,namespace:n,shortName:m,constructor:p,fullName:b}),p[j].Class=p[j].constructor=p;var t=p.setup.apply(p,g([h],arguments));return p.init&&p.init.apply(p,t||g([h],arguments)),p}}),clss.callback=clss[j].callback=clss[j].proxy=clss.proxy}(),function(){var w,a=function(a,b,c){var e,f=a.bind&&a.unbind?a:$(d(a)?[a]:a);return 0===b.indexOf(">")&&(b=b.substr(1),e=function(b){b.target===a&&c.apply(this,arguments)}),f.bind(b,e||c),function(){f.unbind(b,e||c),a=b=c=e=null}},b=$.makeArray,c=$.isArray,d=$.isFunction,e=$.isString,f=$.extend,g=$.String,h=$.each,i=g.getObject,j="prototype",k="constructor",l=Array[j].slice,m=function(a,b,c,e){0===b.indexOf(">")&&(b=(a.data("directSelector")+" "||"")+b);var f=a.delegate&&a.undelegate?a:$(d(a)?[a]:a);return f.delegate(b,c,e),function(){f.undelegate(b,c,e),f=a=c=e=b=null}},n=function(b,c,d,e){return e?m(b,e,c,d):a(b,c,d)},o=function(a,b){var c="string"==typeof b?a[b]:b;return function(){return a.called=b,c.apply(a,[this.nodeName?$(this):this].concat(l.call(arguments,0)))}},p=/\./g,q=/_?controllers?/gi,r=function(a){return g.underscore(a.replace($.globalNamespace+".","").replace(p,"_").replace(q,""))},s=/^\S(.*)\s(.*)/,t=/\{([^\}]+)\}/g,u=/\{([^\.]+[\.][^\.]+)\}/g,v=/^(?:(.*?)\s)?([\w\.\:>]+)$/,x=function(a,b){return $.data(a,"controllers",b)},y=$.globalNamespace+".Controller";$.Controller=function(a){var e,c=b(arguments),d={root:y};return c.length>2?(d=$.extend(d,c[1]),e=c[2]):e=c[1],d.namespace&&(a=d.namespace+"."+a),$.Controller.Class(a,d,e)};var z=y+".Class";$.Class(z,{setup:function(){if(this._super.apply(this,arguments),this.shortName&&this.fullName!=z){this._fullName=r(this.fullName),this._shortName=r(this.shortName);var g,f=this;if(e(this.pluginName)){var i=this._fullName,k=this.pluginName;$.fn[k]||($.fn[k]=function(a){var c=b(arguments);if($.isString(a)&&"controller"===a){var d=x(this[0]),e=d&&d[i];return e}return this.each(function(){var b=x(this),d=b&&b[i];if(d){if($.isString(a)){var e=d[a];return $.isFunction(e)&&e.apply(d,c.slice(1)),void 0}d.update.apply(d,c)}else{f.newInstance.apply(f,[this].concat(c))}})})}var l=b(arguments),m=this[j],n=l[l.length>3?3:2];d(n)&&(this.protoFactory=n,m=this.protoFactory.call(this,null)),this.actions={};for(g in m){"constructor"!=g&&d(m[g])&&this._isAction(g)&&(this.actions[g]=this._action(g))}$.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},_isAction:function(a){return s.test(a)?!0:$.inArray(a,this.listensTo)>-1||$.event.special[a]||A[a]},_action:function(a,b){if(t.lastIndex=0,!b&&t.test(a)){return null}a=a.replace("{self} ","");var d=a;if(b){var e=!1;if(u.test(a)){var f,h="";d=a.replace(u,function(a,c){var d=c.split(".");return f=b["{"+d[0]+"}"]||{},$.isControllerInstance(f)&&(h=(f[d[1]]||{}).selector),h}).match(v),e=!!h,d=[f.element].concat(d||[])}e||(d=g.sub(a,[b,window]))}var i=c(d),j=(i?d[1]:d).match(v),k=j[2],l=A[k]||w;return{processor:l,parts:j,delegate:i?d[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(a,c){var d=this,g=d[k],i=d[j],l=g._fullName;d.instanceId=$.uid(l+"_");var m=d.options=f(!0,{},g.defaults,g.defaultOptions,c),n=d.element=$(a);if(g.protoFactory&&(i=g.protoFactory.apply(g,[d,m,n]),f(!0,d,i)),(x(a)||x(a,{}))[l]=d,!n.data("directSelector")){var o=$.uid("DS");n.addClass(o).data("directSelector","."+o)}for(name in m){if(name.match(/^\{.+\}$/)){var p=name.replace(/^\{|\}$/g,""),q=m[name];d[p]=e(q)?function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var d=function(c){var d=a.element.find(b);return c&&(d=d.filter(c)),d};return d.selector=b,d.css=function(){var a=d.cssRule;if(!a){var c=n.data("directSelector"),e=$.map(b.split(","),function(a){return c+" "+a});a=d.cssRule=$.cssRule(e),a.important=!0}return arguments.length?a.css.apply(a,arguments):a},d}(d,q,p):q}}var r=m.view,s=d.view;d.view=function(){return s.apply(this,arguments)},h(r||{},function(a){d.view[a]=function(c){var e=b(arguments);return $.isBoolean(c)?e=e.slice(1):c=!1,d.view.apply(d,[c,a].concat(e))}}),$.extend(d,m.controller),d.pluginInstances={},d.called="init",d._bind();var t=d.init||$.noop;return d.init=function(){return d.init=t,result=t.apply(d,arguments),d.trigger("init."+g.fullName.toLowerCase(),[d]),result},[n,m].concat(b(arguments).slice(2))},on:function(a){var c=b(arguments),d=this.element,f=c.length;return 2==f?this._binder(d,a,c[1]):3==f&&e(c[1])?this._binder(d,a,c[2],c[1]):this._binder(c[1],a,c[2])},_bind:function(){var a=this,b=a[k],c=b.actions,d=a._bindings=[],e=a.element;h(c||{},function(f){if(c.hasOwnProperty(f)){var h=b.actions[f]||b._action(f,a.options);$.isControllerInstance(h.delegate)&&(h.delegate=h.delegate.element),d.push(h.processor(h.delegate||e,h.parts[2],h.parts[1],f,a))}});var f=o(this,"destroy");return e.bind("destroyed",f),d.push(function(a){$(a).unbind("destroyed",f)}),d.length},_binder:function(a,b,c,d){return"string"==typeof c&&(c=o(this,c)),this._bindings.push(n(a,b,c,d)),this._bindings.length},_unbind:function(){var a=this.element[0];h(this._bindings,function(b,c){c(a)}),this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=$.Event(a);return b.trigger.apply(b,[c].concat($.makeArray(arguments).slice(1))),c}},delegate:function(a,b,c,d){return"string"==typeof a&&(d=c,c=b,b=a,a=this.element),this._binder(a,c,d,b)},update:function(a){f(this.options,a),this._unbind(),this._bind()},destroy:function(){if(!this._destroyed){var a=this[k]._fullName;for(pname in this.pluginInstances){this.removePlugin(pname)}this._destroyed=!0,this.element.removeClass(a),this._unbind(),delete this._actions,delete this.element.data("controllers")[a],$(this).triggerHandler("destroyed"),this.element=$()}},find:function(a){return this.element.find(a)},view:function(){var c,a=b(arguments),d=a,e=!1,f=this[k].component||$,g="",h=this.options.view||{};return"boolean"==typeof a[0]&&(e=a[0],d=a.slice(1)),c=d[0]=h[d[0]],void 0==c?e?"":$(""):(g=f.View.apply(f,d),e?g:$($.parseHTML($.trim(g))))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){var b=$.isArray(a)?a:[a||{}],c=this,d=this.Class.hostname,e={};return e["{"+d+"}"]=c,$.map(b,function(a){return $.isControllerInstance(a)?a.options[d]===this?a:(a[d]=c,a.update(e)):!1}),b},addPlugin:function(a,b,c){if(a){(!b&&!c||$.isPlainObject(b))&&(c=b,b=[this.Class.root,this.Class.fullName,$.String.capitalize(a)].join(".")),$.isString(b)&&(b=$.getController(b));var e=$.isControllerInstance(b);if(d(b)||e){c=$.extend(!0,{element:this.element},c,(this.options.plugin||{})[a]||{});var f=e?"instance":$.isController(b)?"controller":"function";this.trigger("addPlugin",[a,b,c,f]);var g=this.Class.hostname;c["{"+g+"}"]=this;var h;switch(f){case"instance":h=b,b.update(c),b[g]=this;break;case"controller":h=c.element.addController(b,c);break;case"function":h=b(this,c)}if(h){if(this.pluginInstances[a]=h,"function"!==f){var i={};i["{"+a+"}"]=h,this.update(i)}return this.trigger("registerPlugin",[a,h,c,f]),h}}}},removePlugin:function(a){var b=this.getPlugin(a);if(b){return this.trigger("removePlugin",[a,b]),delete this.pluginInstances[a],$.isFunction(b.destroy)?b.destroy():null}},invokePlugin:function(a,b,c){var d=this.getPlugin(a);if(d&&$.isFunction(d[b])){return this.trigger("invokePlugin",[a,d,c]),d[b].apply(this,c)}},getMessageGroup:function(){var a=$.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");return a.length<1&&(a=$("<div data-message-group></div>").prependTo(this.element)),a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),element:$('<div class="alert fade in"><button type="button" class="close" data-foundry-dismiss="alert">\xd7</button></div>')},d={},e=$.isDeferred(a);d=$.isPlainObject(a)&&!e?a:{message:a,type:b||"warning"};var f=$.extend({},c,d),g=f.element;if($.isDeferred(a)){var h=arguments.callee,i=this;a.done(function(a,b){f.message=a,f.type=b||"warning",h.call(i,f),g.show()})}else{g.addClass("alert-"+f.type).append(f.message),$("html").has(g).length<1&&g.appendTo(f.parent)}return g},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var A=$.Controller.Class.processors,w=function(a,b,c,d,e){return n(a,b,o(e,d),c)};h("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){A[b]=w});var B=function(a){return a.replace("$.Controller",y)},C=function(a){return e(a)&&(a=B(a),a=i(a)||i(y+"."+a)),D(a)?a:void 0},D=function(a){return d(a)&&a.hasOwnProperty("_fullName")},E=function(a){return $.map(a,function(a){return c(a)?E(a):C(a)})};$.getController=C,$.isController=function(a){return !!C(a)},$.isControllerInstance=function(a){return a&&a[k]&&D(a[k])},$.isControllerOf=function(a,b){if(!b){return !1}c(b)||(b=[b]);for(var d=0;d<b.length;d++){var e=C(b[d]);if(a instanceof e){return !0}}return !1},$.fn.extend({controllers:function(){var a=E(b(arguments)),c=[];return this.each(function(){var b=$.data(this,"controllers");h(b||{},function(d,e){b.hasOwnProperty(d)&&(!a.length||$.isControllerOf(e,a))&&c.push(e)})}),c},controller:function(a,b){return void 0===b?this.controllers(a)[0]:(this.addController.apply(this,arguments),this)},hasController:function(a){var b=(C(a)||{})._fullName||(e(a)?r(B(a)):"");return b?($(this).data("controllers")||{}).hasOwnProperty(b):!1},addController:function(a,b,c){var e=C(a);if(e){var f=[];return this.each(function(){if(1===this.nodeType&&"SCRIPT"!=this.nodeName){var g=$(this).controller(a);if(g){return f.push(g),void 0}var h=new e(this,b);d(c)&&c.apply(h,[$(this),h]),f.push(h)}}),f.length>1?f:f[0]}},removeController:function(a){return this.each(function(){for(var b=$(this).controllers(a);b.length;){b.shift().destroy()}}),this},addControllerWhenAvailable:function(a){var b=this,c=arguments,d=$.Deferred();return $.isController(a)&&(a=a.fullName),e(a)?($.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,c);d.resolveWith(a,[b,a])},d.reject,d.fail),d):d.reject()},implement:function(){return this.addController.apply(this,arguments),this}})}(),function(){var a=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},b=$.makeArray,c=1,d=$.View=function(a,c,d,e){"function"==typeof d&&(e=d,d=void 0);var j=h(c);if(j.length){var k=$.Deferred();return j.push(f(a,!0)),$.when.apply($,j).then(function(a){var j,f=b(arguments),h=f.pop()[0];if(g(c)){c=i(a)}else{for(var l in c){g(c[l])&&(c[l]=i(f.shift()))}}j=h(c,d),k.resolve(j),e&&e(j)}),k.promise()}var l,m="function"==typeof e,k=f(a,m);return m?(l=k,k.done(function(a){e(a(c,d))})):k.done(function(a){l=a(c,d)}),l},e=function(a,b){if(!a.match(/[^\s]/)){throw"$.View ERROR: There is no template or an empty template at "+b}},f=function(a,b){return $.ajax({url:a,dataType:"view",async:b})},g=function(a){return a&&$.isFunction(a.always)},h=function(a){var b=[];if(g(a)){return[a]}for(var c in a){g(a[c])&&b.push(a[c])}return b},i=function(a){return $.isArray(a)&&3===a.length&&"success"===a[1]?a[0]:a};$.ajaxTransport("view",function(b,c){var h,i,j,k,f=c.url,g=f.match(/\.[\w\d]+$/),l=function(a){var b=h.renderer(j,a);return d.cache&&(d.cached[j]=b),{view:b}};if((i=document.getElementById(f))&&(g="."+i.type.match(/\/(x\-)?(.+)/)[2]),g||(g=d.ext,f+=d.ext),j=a(f),f.match(/^\/\//)){var m=f.substr(2);f="undefined"==typeof steal?f="/"+m:steal.root.mapJoin(m)+""}h=d.types[g];var n=$.template()[c.url];return{send:function(a,b){return n?(h=d.types["."+n.type],b(200,"success",l(n.content))):d.cached[j]?b(200,"success",{view:d.cached[j]}):(i?b(200,"success",l(i.innerHTML)):k=$.ajax({async:c.async,url:f,dataType:"text",error:function(){e("",f),b(404)},success:function(a){e(a,f),b(200,"success",l(a))}}),void 0)},abort:function(){k&&k.abort()}}}),$.extend(d,{hookups:{},hookup:function(a){var b=++c;return d.hookups[b]=a,b},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b,window.steal&&steal.type(b.suffix+" view scripts",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text=f.script(g,b.text),c()})},types:{},ext:".ejs",registerScript:function(a,b,c){return"$.View.preload('"+b+"',"+d.types["."+a].script(b,c)+");"},preload:function(a,b){d.cached[a]=function(a,c){return b.call(a,a,c)}}}),window.steal&&steal.type("view scripts",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text="steal('"+(f.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+g+"',"+b.text+");\n})",c()});var j,k,l,m,n,o,p,r={val:!0,text:!0};j=function(a){var c=$.fn[a];$.fn[a]=function(){var f,h,j,e=b(arguments),i=this;if(g(e[0])){return e[0].done(function(a){k.call(i,[a],c)}),this}if(l(e)){if(f=o(e)){return h=e[f],e[f]=function(a){k.call(i,[a],c),h.call(i,a)},d.apply(d,e),this}if(j=d.apply(d,e),g(j)){return j.done(function(a){k.call(i,[a],c)}),this}e=[j]}return r[a]?c.apply(this,e):k.call(this,e,c)}},k=function(a,b){var c,f;for(var g in d.hookups){break}return g&&a[0]&&m(a[0])&&(f=d.hookups,d.hookups={},a[0]=$(a[0])),c=b.apply(this,a),f&&p(a[0],f),c},l=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!n(a[1])},n=function(a){return a.nodeType||a.jquery},m=function(a){return n(a)?!0:"string"==typeof a?(a=$.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&a.length>=3):!1},o=function(a){return"function"==typeof a[3]?3:"function"==typeof a[2]&&2},p=function(a,b){var c,e,g,h,f=0;for(a=a.filter(function(){return 3!=this.nodeType}),c=a.add("[data-view-id]",a),e=c.length;e>f;f++){c[f].getAttribute&&(g=c[f].getAttribute("data-view-id"))&&(h=b[g])&&(h(c[f],g),delete b[g],c[f].removeAttribute("data-view-id"))}$.extend(d.hookups,b)},$.fn.hookup=function(){var a=d.hookups;return d.hookups={},p(this,a),this},$.each(["prepend","append","after","before","text","html","replaceWith","val"],function(a,b){j(b)})}(),function(){var myEval=function(script){eval(script)},rSplit=$.String.rsplit,extend=$.extend,isArray=$.isArray,returnReg=/\r\n/g,retReg=/\r/g,newReg=/\n/g,nReg=/\n/,slashReg=/\\/g,quoteReg=/"/g,singleQuoteReg=/'/g,tabReg=/\t/g,leftBracket=/\{/g,rightBracket=/\}/g,quickFunc=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,clean=function(a){return a.replace(slashReg,"\\\\").replace(newReg,"\\n").replace(quoteReg,'\\"').replace(tabReg,"\\t")},escapeHTML=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(quoteReg,"&#34;").replace(singleQuoteReg,"&#39;")},$View=$.View,bracketNum=function(a){var b=a.match(leftBracket),c=a.match(rightBracket);return(b?b.length:0)-(c?c.length:0)},EJS=function(a){if(this.constructor!=EJS){var b=new EJS(a);return function(a,c){return b.render(a,c)}}return"function"==typeof a?(this.template={fn:a},void 0):(extend(this,EJS.options,a),this.template=compile(this.text,this.type,this.name),void 0)};$&&($.EJS=EJS),EJS.prototype.render=function(a,b){a=a||{},this._extra_helpers=b;var c=new EJS.Helpers(a,b||{});return this.template.fn.call(a,a,c)},extend(EJS,{text:function(a){if("string"==typeof a){return a}if(null===a||void 0===a){return""}var b=a.hookup&&function(b,c){a.hookup.call(a,b,c)}||"function"==typeof a&&a||isArray(a)&&function(b,c){for(var d=0;d<a.length;d++){a[d].hookup?a[d].hookup(b,c):a[d](b,c)}};return b?"data-view-id='"+$View.hookup(b)+"'":a.toString?a.toString():""},clean:function(a){return"string"==typeof a?escapeHTML(a):"number"==typeof a?a:EJS.text(a)},options:{type:"[",ext:".ejs"}});var scan=function(a,b,c){for(var d=rSplit(b,nReg),e=0;e<d.length;e++){scanline(a,d[e],c)}},scanline=function(a,b,c){a.lines++;for(var e,d=rSplit(b,a.splitter),f=0;f<d.length;f++){e=d[f],null!==e&&c(e,a)}},makeScanner=function(a,b){var c={};return extend(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:scan,lines:0}),c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")"),c},compile=function(a,b){a=a.replace(returnReg,"\n").replace(retReg,"\n"),b=b||"[";var d="___v1ew.push(",e=d,f="var ___v1ew = [];",g="return ___v1ew.join('')",h=new EJS.Buffer([f],[]),i="",j=function(a){h.push(d,'"',clean(a),'");')},k=null,l=function(){i=""},m="));",n=[];scan(makeScanner(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===k){switch(a){case"\n":i+="\n",j(i),h.cr(),l();break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:k=a,i.length>0&&j(i),l();break;case b.dLeft:i+=b.left;break;default:i+=a}}else{switch(a){case b.right:switch(k){case b.left:c=bracketNum(i);var d=n.length&&-1==c?n.pop():";";d===m&&h.push(g),h.push(i,d),1===c&&n.push(";");break;case b.eLeft:if(c=bracketNum(i),c&&n.push(m),quickFunc.test(i)){var o=i.match(quickFunc);i="function(__){var "+o[1]+"=$(__);"+o[2]+"}"}h.push(e,$.globalNamespace+".EJS.clean(",i,c?f:m);break;case b.eeLeft:c=bracketNum(i),c&&n.push(m),h.push(e,$.globalNamespace+".EJS.text(",i,c?f:m)}k=null,l();break;case b.dRight:i+=b.right;break;default:i+=a}}}),i.length>0&&h.push(d,'"',clean(i)+'");');var o=h.close(),p={out:"try { with(_VIEW) { with (_CONTEXT) {"+o+" "+g+"}}}catch(e){e.lineNumber=null;throw e;}"};return myEval.call(p,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+$.globalNamespace+";"+p.out+"});"),p};EJS.Buffer=function(a,b){this.line=[],this.script=[],this.post=b,this.push.apply(this,a)},EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n"),this.line=[]},close:function(){return this.line.length>0&&(this.script.push(this.line.join("")),this.line=[]),this.post.length&&this.push.apply(this,this.post),this.script.push(";"),this.script.join("")}},EJS.Helpers=function(a,b){this._data=a,this._extras=b,extend(this,b)},EJS.Helpers.prototype={plugin:function(){var b=$.makeArray(arguments),c=b.shift();return function(a){var d=$(a);d[c].apply(d,b)}},view:function(a,b,c){return c=c||this._extras,b=b||this._data,$View(a,b,c)}},$View.register({suffix:"ejs",script:function(a,b){return $.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+new EJS({text:b,name:a}).template.out+" })"},renderer:function(a,b){return EJS({text:b,name:a})}})}(),function(){var a=$.isArray,b=function(a){return"object"==typeof a&&null!==a&&a},c=$.makeArray,d=$.each,e=function(b,c,d){return b instanceof $.Observe?f([b],d._namespace):b=a(b)?new $.Observe.List(b):new $.Observe(b),b.bind("change"+d._namespace,function(a){var f=$.makeArray(arguments),a=f.shift();f[0]="*"===c?d.indexOf(b)+"."+f[0]:c+"."+f[0],$.event.trigger(a,f,d)}),b},f=function(a,b){for(var c,d=0;d<a.length;d++){c=a[d],c&&c.unbind&&c.unbind("change"+b)}},g=0,h=null,i=function(){return h?void 0:(h=[],!0)},j=function(a,b,c){return a._init?void 0:h?(h.push({t:a,ev:b,args:c}),void 0):$.event.trigger(b,c,a,!0)},k=0,l=function(){var c,a=h.length,b=h.slice(0);h=null,k++;for(var d=0;a>d;d++){c=b[d],$.event.trigger({type:c.ev,batchNum:k},c.args,c.t)}},m=function(a,c,d){return a.each(function(a,e){d[a]=b(e)&&"function"==typeof e[c]?e[c]():e}),d};$.Class($.globalNamespace+".Observe",{init:function(a){this._data={},this._namespace=".observe"+ ++g,this._init=!0,this.attrs(a),delete this._init},attr:function(a,b){return void 0===b?this._get(a):(this._set(a,b),this)},each:function(){return d.apply(null,[this.__get()].concat(c(arguments)))},removeAttr:function(b){var c=a(b)?b:b.split("."),d=c.shift(),e=this._data[d];return c.length?e.removeAttr(c):(delete this._data[d],j(this,"change",[d,"remove",void 0,e]),e)},_get:function(b){var c=a(b)?b:(""+b).split("."),d=this.__get(c.shift());return c.length?d?d._get(c):void 0:d},__get:function(a){return a?this._data[a]:this._data},_set:function(c,d){var g=a(c)?c:(""+c).split("."),h=g.shift(),i=this.__get(h);if(b(i)&&g.length){i._set(g,d)}else{if(g.length){throw"jQuery.Observe: set a property on an object that does not exist"}if(d!==i){var k=this.__get().hasOwnProperty(h)?"set":"add";this.__set(h,b(d)?e(d,h,this):d),j(this,"change",[h,k,d,i]),i&&f([i],this._namespace)}}},__set:function(a,b){this._data[a]=b,a in this.constructor.prototype||(this[a]=b)},bind:function(){return $.fn.bind.apply($([this]),arguments),this},unbind:function(){return $.fn.unbind.apply($([this]),arguments),this},serialize:function(){return m(this,"serialize",{})},attrs:function(a,c){if(void 0===a){return m(this,"attrs",{})}a=$.extend(!0,{},a);var d,e=i();for(d in this._data){var f=this._data[d],g=a[d];void 0!==g?(b(f)&&b(g)?f.attrs(g,c):f!=g&&this._set(d,g),delete a[d]):c&&this.removeAttr(d)}for(var d in a){g=a[d],this._set(d,g)}e&&l()}});var n=$.Observe($.globalNamespace+".Observe.List",{init:function(a,b){this.length=0,this._namespace=".list"+ ++g,this._init=!0,this.bind("change",this.proxy("_changes")),this.push.apply(this,c(a||[])),$.extend(this,b),this.comparator&&this.sort(),delete this._init},_changes:function(a,b,c,d,e){if(this.comparator&&/^\d+./.test(b)){var f=+/^\d+/.exec(b)[0],g=this[f],h=this.sortedIndex(g);if(h!==f){return[].splice.call(this,f,1),[].splice.call(this,h,0,g),j(this,"move",[g,h,f]),a.stopImmediatePropagation(),j(this,"change",[b.replace(/^\d+/,h),c,d,e]),void 0}}-1===b.indexOf(".")&&("add"===c?j(this,c,[d,+b]):"remove"===c&&j(this,c,[e,+b]))},sortedIndex:function(a){for(var d,b=a.attr(this.comparator),c=0,d=0;d<this.length;d++){if(a!==this[d]){if(b<=this[d].attr(this.comparator)){return d+c}}else{c=-1}}return d+c},__get:function(a){return a?this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return m(this,"serialize",[])},splice:function(a,d){var h,g=c(arguments);for(h=2;h<g.length;h++){var i=g[h];b(i)&&(g[h]=e(i,"*",this))}void 0===d&&(d=g[1]=this.length-a);var k=[].splice.apply(this,g);return d>0&&(j(this,"change",[""+a,"remove",void 0,k]),f(k,this._namespace)),g.length>2&&j(this,"change",[""+a,"add",g.slice(2),k]),k},attrs:function(a,c){if(void 0===a){return m(this,"attrs",[])}a=a.slice(0);for(var d=Math.min(a.length,this.length),e=i(),f=0;d>f;f++){var g=this[f],h=a[f];b(g)&&b(h)?g.attrs(h,c):g!=h&&this._set(f,h)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length),e&&l()},sort:function(a,b){var c=this.comparator,d=c?[function(a,b){return a=a[c],b=b[c],a===b?0:b>a?-1:1}]:[];[].sort.apply(this,d);!b&&j(this,"reset")}}),o=function(a){return a[0]&&$.isArray(a[0])?a[0]:c(a)};d({push:"length",unshift:0},function(a,c){n.prototype[a]=function(){for(var d=o(arguments),f=c?this.length:0,g=0;g<d.length;g++){var h=d[g];b(h)&&(d[g]=e(h,"*",this))}if(1==d.length&&this.comparator){var i=this.sortedIndex(d[0]);return this.splice(i,0,d[0]),this.length}var k=[][a].apply(this,d);return this.comparator&&d.length>1?(this.sort(null,!0),j(this,"reset",[d])):j(this,"change",[""+f,"add",d,void 0]),k}}),d({pop:"length",shift:0},function(a,b){n.prototype[a]=function(){var c=o(arguments),d=b&&this.length?this.length-1:0,e=[][a].apply(this,c);return j(this,"change",[""+d,"remove",void 0,[e]]),e&&e.unbind&&e.unbind("change"+this._namespace),e}}),n.prototype.indexOf=[].indexOf||function(a){return $.inArray(a,this)},$.O=function(b,c){return a(b)||b instanceof $.Observe.List?new $.Observe.List(b,c):new $.Observe(b,c)}}()}),FD31.plugin("joomla",function(f){var e={squeezebox:function(){return h.isJoomla15?window.parent.document.getElementById("sbox-window"):window.parent.SqueezeBox}},h=f.Joomla=function(c,b){if(f.isFunction(b)){var a=b;return h.isJoomla15?window[c]=a:window.Joomla[c]=a,void 0}var c=e[c]||(h.isJoomla15?window[c]:window.Joomla[c]);return f.isFunction(c)?c.apply(window,b):void 0},g=parseFloat(f.joomla.version);h.isJoomla15=1.5>=g,h.isJoomla25=g>=1.6&&2.5>=g,h.isJoomla30=g>=3}),FD31.plugin("module",function(d){var c=function(a){var h=this,g=d.Callbacks("once memory");d.extend(this,d.Deferred(),{name:a,status:"pending",ready:function(e){e===!0&&g.fire.call(h,d),d.isFunction(e)&&g.add(e)}}),h.then(function(){h.exports=this,h.status="resolved"},function(){h.status="rejected"});var f=h.done;h.done=function(){h.required=!0;var e=h.factory;return e&&"ready"===h.status&&e.call(h,d),h.done=f,h.done.apply(this,arguments)}};d.module=function(){var a=function(g,j){var i;if("string"==typeof g){if(i=a.get(g),void 0===j){return i}if(d.isFunction(j)){return"resolved"==i.status?i:(i.factory=j,i.status="ready",i.ready("true"),i.required&&(i.status="executing",j.call(i,d)),i)}}if(d.isArray(g)){var h=d.map(g,function(e){var f=a.get(d.isString(e)?e:e.name);if(f){return"pending"===f.status&&(f.status="ready"),d.isPlainObject(e)?e:void 0}});d.each(h,function(f,e){a(e.name,e.factory)})}};return d.extend(a,{registry:{},get:function(e){return e?(d.isModule(e)&&(e=e.replace("module://","")),a.registry[e]||a.create(e)):void 0},create:function(b){return a.registry[b]=new c(b)},remove:function(b){delete a.registry[b]}}),a}(),d.isModule=function(a){return d.isString(a)?!!a.match("module://"):a&&a instanceof c}}),FD31.plugin("script",function(b){b.script=function(){var a=function(d){if(void 0!==d){"string"==typeof d&&(d={url:d});var c=new f(d);return c}},f=function(d){var g=b.extend(this,d);g.manager=b.Deferred(),b.extend(g,g.manager.promise()),g.load()},e=document.getElementsByTagName("head")[0];document.getElementsByTagName("base")[0];return b.extend(f.prototype,{timeout:7000,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,insert:function(){var c=this.node;e.appendChild(c)},remove:function(){var c=this.node;setTimeout(function(){c.onload=c.onerror=c.onreadystatechange=null;try{e.removeChild(c)}catch(d){}},1000)},load:function(){var g,d=this;d.endTime=void 0,d.startTime=new Date,d.node=g=document.createElement("script"),d.insert(),d._ready=b.proxy(d.ready,d),d._error=b.proxy(d.error,d),g.attachEvent&&!b.browser.opera?(g.attachEvent("onreadystatechange",d._ready),g.attachEvent("onerror",d._error)):(g.addEventListener("load",d._ready,!1),g.addEventListener("error",d._error,!1)),b(g).attr({type:d.type,async:d.async,charset:d.charset,src:d.url}),d.monitor()},monitor:function(){var c=this;return c.retryCount>c.retry?(c._error(),void 0):(setTimeout(function(){"resolved"!==c.state()&&(c.verbose&&console.warn("$.script: Load timeout. [Retry: "+c.retryCount+"]",c),c.remove(),c.retryCount++,c.load())},c.timeout*c.retryCount),void 0)},ready:function(g){var d=this,h=d.node;("load"===g.type||/loaded|complete/.test(h.readyState))&&(d.complete.call(d,g),d.manager.resolve(d))},error:function(d){var c=this;c.verbose&&console.error("$.script: Unable to load ",c),c.complete.call(c,d),c.remove(),c.manager.reject(c)},complete:function(){var h=this,g=h.node;h.endTime=new Date,g.detachEvent&&!b.browser.opera?(g.detachEvent("onreadystatechange",h._ready),g.detachEvent("onerror",h._error)):(g.removeEventListener("load",h._ready,!1),g.removeEventListener("error",h._error,!1))}}),a}()}),FD31.plugin("stylesheet",function(i){var h=document.getElementsByTagName("head")[0],n=document.styleSheets,m=document.createStyleSheet,l=31,k=31,j=4095;i.stylesheet=function(){var a=function(e,g){var f={};return i.extend(f,a.defaultOptions,i.isPlainObject(e)?e:{url:e,attr:g||{}}),void 0===f.url?a.create(f):a.load(f)};return i.extend(a,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(c){i.extend(a.defaultOptions,c)},availability:function(){var d={},e=i('link[rel*="stylesheet"]');return styles=i("style"),d.groups=l-e.length-styles.length,d.slots=d.groups*k,a.currentGroup&&(d.slots+=k-a.currentGroup.imports.length),d},get:function(e){for(var c=0;c<n.length;c++){var f=n[c];if((f.ownerNode||f.owningElement)==e){return f}}},create:function(o){var e,d,c=n.length;if(m){if(c>=l){return}e=document.createStyleSheet(),d=e.ownerNode||e.owningElement}else{d=document.createElement("style"),h.appendChild(d)}i.extend(d,{type:o.type,title:o.title,media:o.media,rel:o.rel});var b=o.content;return void 0!==b&&(m?e.cssText=b:d.appendChild(document.createTextNode(b))),d},nextAvailable:function(d){var c,o=n.length;if(o){var g;for(g=o;g--;0>g){c=n[g];if(!(m&&(c.cssRules||c.rules).length>=j)){break}c=void 0}}return c.ownerNode||c.owningElement||(d?a():void 0)},load:function(d){if(i.browser.msie&&!d.forceInject){return a._import(d)}var e=i("<link>").attr({href:d.url,type:d.type,rel:d.rel,media:d.media}).appendTo("head");return e[0]},_import:function(f){var e;if(void 0===a.currentGroup){var o;try{o=document.createStyleSheet(),o.media="all",o.title="jquery_stylesheet"}catch(g){e=!0,f.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(e){return !1}a.currentGroup=o}try{a.currentGroup.addImport(f.url)}catch(g){e=!0,f.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return e?(a.currentGroup=void 0,a._import(f)):!0}}),a}(),function(){var a=function(e,g,f){i.extend(this,{id:i.uid(),style:f,selectors:[],preRule:"",rules:{},legacy:8===i.IE,important:!1}),e&&this.set(e,g)};i.extend(a.prototype,{set:function(e,f){return this.selectors=i.isString(e)?e.split(","):e,i.isString(f)?(this.preRule=f+"\n",this.rules={}):(this.preRule="",this.rules=f||this.rules),this.update(),this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var c=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+i.map(this.rules,function(e,b){return i.isNumeric(e)&&!i.cssNumber[b]&&(e+="px"),c&&(e+=" !important"),b+":"+e}).join(";")},update:function(){if(this.legacy){return this.updateLegacy()}var b=this.cssText();return void 0===this.textNode?(this.textNode=document.createTextNode(b),this.style.appendChild(this.textNode)):this.textNode.nodeValue=b,this},updateLegacy:function(){this.removeLegacy();for(var f=i.stylesheet.get(this.style),p=this.selectors,o=this.ruleText(),g=0;g<p.length;g++){f.addRule(p[g],o)}return this},remove:function(){return this.legacy?this.removeLegacy():(void 0!==this.textNode&&(this.style.removeChild(this.textNode),delete this.textNode),this)},removeLegacy:function(){for(var e=i.stylesheet.get(this.style),g=e.rules,f=0;f<g.length;f++){null!==g[f].cssText.match(this.id)&&e.removeRule(f)}return this},css:function(e,f){return i.isString(e)&&void 0===f?this.rules[e]:(i.isPlainObject(e)?i.extend(this.rules,e):this.rules[e]=f,this.update(),this)}});var d=i.cssRule=function(g,c,b){var b=b||d.style||i.stylesheet.nextAvailable(!0);if(b){return new a(g,c,b)}};d.style=i.stylesheet()}(),function(){i.cssUrl=function(b){return'url("'+encodeURI(b)+'")'}}()}),FD31.plugin("language",function(d){d.sprintf=function(){var r=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,q=arguments,p=0,o=q[p++],n=function(g,f,s,i){s||(s=" ");var h=g.length>=f?"":Array(1+f-g.length>>>0).join(s);return i?g+h:h+g},m=function(i,e,w,v,u,t){var s=v-i.length;return s>0&&(i=w||!u?n(i,v,t,w):i.slice(0,e.length)+n("",s,"0",!0)+i.slice(e.length)),i},l=function(f,e,x,w,v,u,t){var s=f>>>0;return x=x&&s&&{2:"0b",8:"0",16:"0x"}[e]||"",f=x+n(s.toString(e),u||0,"0",!1),m(f,x,w,v,t)},k=function(h,f,u,t,s,i){return null!=t&&(h=h.slice(0,t)),m(h,"",f,u,s,i)},j=function(M,L,K,J,I,H,G){var F,E,D,C,B;if("%%"==M){return"%"}for(var A=!1,z="",h=!1,g=!1,f=" ",e=K.length,b=0;K&&e>b;b++){switch(K.charAt(b)){case" ":z=" ";break;case"+":z="+";break;case"-":A=!0;break;case"'":f=K.charAt(b+1);break;case"0":h=!0;break;case"#":g=!0}}if(J=J?"*"==J?+q[p++]:"*"==J.charAt(0)?+q[J.slice(1,-1)]:+J:0,0>J&&(J=-J,A=!0),!isFinite(J)){throw new Error("sprintf: (minimum-)width must be finite")}switch(H=H?"*"==H?+q[p++]:"*"==H.charAt(0)?+q[H.slice(1,-1)]:+H:"fFeE".indexOf(G)>-1?6:"d"==G?0:void 0,B=L?q[L.slice(0,-1)]:q[p++],G){case"s":return k(String(B),A,J,H,h,f);case"c":return k(String.fromCharCode(+B),A,J,H,h);case"b":return l(B,2,g,A,J,H,h);case"o":return l(B,8,g,A,J,H,h);case"x":return l(B,16,g,A,J,H,h);case"X":return l(B,16,g,A,J,H,h).toUpperCase();case"u":return l(B,10,g,A,J,H,h);case"i":case"d":return F=0|+B,E=0>F?"-":z,B=E+n(String(Math.abs(F)),H,"0",!1),m(B,E,A,J,h);case"e":case"E":case"f":case"F":case"g":case"G":return F=+B,E=0>F?"-":z,D=["toExponential","toFixed","toPrecision"]["efg".indexOf(G.toLowerCase())],C=["toString","toUpperCase"]["eEfFgG".indexOf(G)%2],B=E+Math.abs(F)[D](H),m(B,E,A,J,h)[C]();default:return M}};return o.replace(r,j)};var c=d.language=d.JText=function(b){return arguments.length<2?c._(b):c.sprintf.apply(null,arguments)};d.extend(c,{lang:{},add:function(b,a){d.isPlainObject(b)?d.extend(c.lang,b):c.lang[b]=a},remove:function(b){delete c.lang[b]},_:function(b){return c.lang[b]||""},sprintf:function(){var a=arguments[0];return arguments[0]=c.lang[a],d.sprintf.apply(null,arguments)}})}),FD31.plugin("template",function(b){b.template=function(){var a={content:"",type:"ejs"},d=function(h,g){if(void 0===h){return d.templates}var c;return"string"==typeof g?(c=b.isPlainObject(g)?g:b.extend({},a,{name:h,content:g}),d.templates[h]=c,c):(c=d.templates[h]||{},c.content||"")};return b.extend(d,{templates:{},remove:function(c){delete d.templates[c]}}),d}()}),FD31.plugin("require",function(b){b.require=function(){var a=function(c){return b.uri(c).setAnchor("").setQuery("").toPath("../").toString()},h=function(d){var c=new f(d);return h.batches[c.id]=c,c};b.extend(h,{defaultOptions:{path:function(){var d=b.path+"/scripts/"||b("[require-path]").attr("require-path")||a(b("script:last").attr("src"))||a(window.location.href);return/^(\/|\.)/.test(d)&&(d=b.uri(window.location.href).toPath(d).toString()),d}(),timeout:10000,retry:3,verbose:"development"==b.environment},setup:function(c){b.extend(h.defaultOptions,c)},batches:{},status:function(c){return b.each(h.batches,function(m,l){var k={pending:0,resolved:0,rejected:0,ready:0,total:0},j=[];b.each(l.tasks,function(e,d){state=d.module&&"ready"==d.module.status?"ready":d.state(),k[state]++,k.total++,j.push({state:state,content:"["+state+"] "+d.name})});var i=l.id+": "+l.state()+" ["+k.resolved+"/"+k.total+"]";c&&k[c]<1||(b.IE?(console.log('$.require.batches["'+l.id+'"]'),b.each(j,function(e,d){console.log(d.content)}),console.log("")):(console.groupCollapsed(i),console.log('$.require.batches["'+l.id+'"]',l),b.each(j,function(n,q){var p=q.state,o=q.content;if(!c||p==c){switch(p){case"pending":console.warn(o);break;case"rejected":console.error(o);break;default:console.info(o)}}}),console.groupEnd(i)))}),"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(d,c){h[d]=c,f.prototype[d]=function(){var e=this;return e.autoFinalize(),c.apply(e,arguments),e},h.loaders[d]=h[d]=c},removeLoader:function(c){delete f.prototype[c],delete h[c]}});var g=0,f=function(c){var j=b.Callbacks("once memory"),i=!1,d=b.extend(this,{id:++g,tasks:[],options:b.extend({},h.defaultOptions,c),autoFinalizeDuration:300,finalized:!1,required:function(e){return e===!0&&(i=!0&&j.fire()),b.isFunction(e)&&j.add(e),i}});return d};return b.extend(f.prototype,{addTask:function(d){var e=this;b.isDeferred(d)&&(e.finalized||(e.tasks.push(d),d.batch=e))},autoFinalize:function(){var d=this,c=d.autoFinalizeDuration;c!==!1&&(clearTimeout(d.autoFinalizeTimer),d.autoFinalizeTimer=setTimeout(function(){d.finalize()},c))},finalize:function(){var i=this;if(!i.finalized){i.finalized=!0;var m=i.manager=b.when.apply(null,i.tasks),l=m.promise(),k=b.Callbacks();b.extend(i,l,{progress:k.add,notify:k.fire,done:function(){return i.required(!0),i.done=l.done,i.done.apply(i,arguments)}});var j=i.options.verbose;m.progress(function(d,c){j&&"rejected"==d&&console.warn("Require: Task "+c.name+" failed to load.",c)}).fail(function(){j&&console.warn("Require: Batch "+i.id+" failed.",i)}),setTimeout(function(){b.each(i.tasks,function(d,e){e.then(function(){i.notify("resolved",e)},function(){i.notify("rejected",e)},function(){i.notify("progress",e)})})},1)}},expand:function(i,l){var i=b.makeArray(i),k=l||{},j=[];return b.isPlainObject(i[0])?(k=b.extend(i[0],l),j=i.slice(1)):j=i,{options:k,names:j}}}),b.each(["done","fail","progress","always","then"],function(d,c){f.prototype[c]=function(){var e=this;return e.finalize(),e[c].apply(e,arguments)}}),h}(),b.require.addLoader("script",function(){var a=b.uri(b.indexUrl).host(),f=b.uri(document.location.href).host();a!==f&&a.match("xn--")&&(b.support.cors=!0);var d=(document.createElement("script").async===!0||"MozAppearance" in document.documentElement.style||window.opera,function(){var j,i,e=this,k=b.makeArray(arguments);b.isPlainObject(k[0])?(j=k[0],i=k.slice(1)):i=k,j=b.extend({},d.defaultOptions,e.options,j,{batch:e});var h;b.each(i,function(g,m){var l=new d.task(m,j,h);e.addTask(l),j.serial&&void 0!==h?h.always(l.start):l.start(),h=l})});return b.extend(d,{defaultOptions:{path:"",extension:"compressed"==b.mode?"min.scripts":"scripts",serial:!1,async:!1,xhr:!1},setup:function(){b.extend(d.defaultOptions,options)},scripts:{},task:function(g,k,j){var i=b.extend(this,b.Deferred());if(i.name=g,i.options=k,i.taskBefore=j,b.isArray(g)){i.name=g[0]+"@"+g[1],i.moduleName=g[0];var h=g[2];h||(i.defineModule=!0,b.module.registry[i.moduleName]&&console.warn("$.require.script: "+i.moduleName+" exists! Using existing module instead."),i.options.xhr=!0),g=g[1],i.module=b.module(i.moduleName)}b.isUrl(g)?i.url=g:/^(\/|\.)/.test(g)?i.url=b.uri(i.options.path).toPath(g).toString():(i.url=b.uri(i.options.path).toPath("./"+g+"."+i.options.extension).toString(),i.module=b.module(g))}}),b.extend(d.task.prototype,{start:function(){var e=this,c=e.module;return c&&"pending"!==c.status?(e.waitForModule(),void 0):(e.load(),void 0)},waitForModule:function(){var e=this,c=e.module;c.then(e.resolve,e.reject,e.notify),e.batch.required(function(){c.done(e.resolve)})},load:function(){var e=this,g=e.taskBefore;e.script=d.scripts[e.url]||function(){var h=e.options.xhr?b.ajax({url:e.url,dataType:"text"}):b.script({url:e.url,type:"text/javascript",async:e.options.async,timeout:e.batch.options.timeout,retry:e.batch.options.retry,verbose:e.batch.options.verbose});return d.scripts[e.url]=h}(),e.script.done(function(h){var c=function(){e.module?e.waitForModule():e.resolve()};return e.options.xhr&&(e.defineModule&&(e.module=b.module(e.moduleName,function(){var i=this;b.globalEval(h),i.resolveWith(h)})),!e.options.async||g)?(g.done(function(){b.globalEval(h),c()}),void 0):(c(),void 0)}).fail(function(){e.reject()})}}),d}()),b.require.addLoader("stylesheet",function(){var a=function(){var h,g,j=this,i=b.makeArray(arguments);b.isPlainObject(i[0])?(h=i[0],g=i.slice(1)):g=i,h=b.extend({},a.defaultOptions,j.options,{path:b.path+"/styles/"},h,{batch:j}),b.each(g,function(c,l){var k=new a.task(l,h),e=a.stylesheets[k.url];k=e||k,j.addTask(k),e||(a.stylesheets[k.url]=k,k.start())})};return b.extend(a,{defaultOptions:{path:"",extension:"compressed"==b.mode?"min.css":"css",xhr:!1},setup:function(){b.extend(a.defaultOptions,options)},stylesheets:{},task:function(e,g){var f=b.extend(this,b.Deferred());f.name=e,f.options=g,f.url=b.isUrl(e)?e:/^(\/|\.)/.test(e)?b.uri(f.options.path).toPath(e).toString():b.uri(f.options.path).toPath("./"+e+"."+f.options.extension).toString(),f.options.url=f.url},loaders:{},loader:function(f){if(b.isArray(f)){return b.map(f,function(c){return a.loader(c)})}if(b.isPlainObject(f)){return b.map(f,function(d,g){return a.loader(d).resolve(g)})}var e=a.loaders[f];return e||(e=a.loaders[f]=b.Deferred().done(function(c){b.isPlainObject(c)||b.stylesheet(c)})),e}}),b.extend(a.task.prototype,{start:function(){var f=this,e=a.loaders[f.name];e||(e=a.loader(f.name),b.stylesheet(f.options)?e.resolve():e.reject()),e.then(f.resolve,f.reject)}}),a}()),b.require.addLoader("template",function(){var a=function(){var h,g,j=this,i=b.makeArray(arguments);b.isPlainObject(i[0])?(h=i[0],g=i.slice(1)):g=i,h=b.extend({},a.defaultOptions,j.options,h,{batch:j}),b.each(g,function(c,k){var e=new a.task(k,h);j.addTask(e),e.start()})};return b.extend(a,{defaultOptions:{path:"",extension:"htm"},setup:function(){b.extend(a.defaultOptions,options)},task:function(e,g){var f=b.extend(this,b.Deferred());f.name=e,f.options=g,b.isArray(e)&&(f.name=e[0],e=e[1]),f.url=b.isUrl(e)?e:/^(\/|\.)/.test(e)?b.uri(f.options.path).toPath(e).toString():b.uri(f.options.path).toPath("./"+e+"."+f.options.extension).toString()},loaders:{},loader:function(f){if(b.isArray(f)){return b.map(f,function(c){return a.loader(c)})}if(b.isPlainObject(f)){return b.map(f,function(d,g){return a.loader(g).resolve(d)})}var e=a.loaders[f];return e||(e=a.loaders[f]=b.Deferred().done(function(c){b.template(f,c)})),e}}),b.extend(a.task.prototype,{start:function(){var f=this,e=a.loaders[f.name];return e||(e=a.loader(f.name),e.xhr=b.Ajax({url:f.url,dataType:"text"}).then(e.resolve,e.reject).then(f.resolve,f.reject)),f.loader=e,f}}),a}()),b.require.addLoader("language",function(){var a=function(){var j,i,l=this,k=b.makeArray(arguments);b.isPlainObject(k[0])?(j=k[0],i=k.slice(1)):i=k,j=b.extend({},a.defaultOptions,l.options,j,{batch:l});var h=new a.task(i,j);l.addTask(h),h.start()};return b.extend(a,{defaultOptions:{path:""},setup:function(){b.extend(a.defaultOptions,options)},loaders:{},task:function(e,g){var f=b.extend(this,b.Deferred());f.name=e.join(","),f.options=g,f.url=g.path,f.names=e},loaders:{},loader:function(f){if(b.isArray(f)){return b.map(f,function(c){return a.loader(c)})}if(b.isPlainObject(f)){return b.map(f,function(d,g){return a.loader(g).resolve(d)})}var e=a.loaders[f];return e||(e=a.loaders[f]=b.Deferred().done(function(c){b.language.add(f,c)})),e}}),b.extend(a.task.prototype,{start:function(){var h=this,g=[],f=b.map(h.names,function(d){var e=a.loader(d);return e.push(e),/resolved|rejected/.test(e.state())?null:d});return h.fail(function(){b.each(f,function(d,e){a.loader(e).reject()})}),b.when.apply(null,g).then(h.resolve,h.reject),f.length<1?h:(h.xhr=b.Ajax({url:h.url,type:"POST",data:{keys:f}}).done(function(c){b.isPlainObject(c)?a.loader(c):h.reject()}).fail(function(){h.reject()}),h)}}),a}()),b.require.addLoader("library",function(){var f,a=this,h=b.makeArray(arguments),g={};return b.isPlainObject(h[0])?(g=h[0],f=h.slice(1)):f=h,b.extend(g,{path:b.scriptPath}),a.script.apply(a,[g].concat(f))}),b.require.addLoader("image",function(){var a=function(){var h,g,j=this,i=b.makeArray(arguments);b.isPlainObject(i[0])?(h=i[0],g=i.slice(1)):g=i,h=b.extend({},a.defaultOptions,j.options,h,{batch:j}),b.each(g,function(c,l){var k=new a.task(l,h),e=a.images[k.url];k=e||k,j.addTask(k),e||(a.images[k.url]=k,k.start())})};return b.extend(a,{defaultOptions:{path:""},setup:function(){b.extend(a.defaultOptions,options)},images:{},task:function(e,g){var f=b.extend(this,b.Deferred());f.name=e,f.options=g,f.url=b.isUrl(e)?e:/^(\/|\.)/.test(e)?b.uri(f.options.path).toPath(e).toString():b.uri(f.options.path).toPath("./"+e).toString(),f.options.url=f.url}}),b.extend(a.task.prototype,{start:function(){var c=this;c.image=b(new Image).load(function(){c.resolve()}).error(function(){c.reject()}).attr("src",c.options.url)}}),a}())}),FD31.plugin("iframe-transport",function(b){b.ajaxPrefilter(function(c){return c.iframe?"iframe":void 0}),b.ajaxTransport("iframe",function(a){function c(){l&&d.replaceWith(function(e){return m.get(e)}),p.remove(),o.attr("src","javascript:false;").remove()}var p=null,o=null,n="iframe-"+b.now(),m=b(a.files).filter(":file:enabled"),l=m.length>0,d=null;return a.dataTypes.shift(),p=b("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:a.url,target:n}),"string"==typeof a.data&&a.data.length>0&&b.error("data must not be serialized"),b.each(a.data||{},function(e,f){b.isPlainObject(f)&&(e=f.name,f=f.value),b.isArray(f)||(f=[f]),b.each(f,function(h,g){b("<input type='hidden' />").attr({name:e,value:g}).appendTo(p)})}),b("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(p),l&&(d=m.after(function(){return b(this).clone().prop("disabled",!0)}).next(),m.appendTo(p)),{send:function(e,f){o=b("<iframe src='javascript:false;' name='"+n+"' id='"+n+"' style='display:none'></iframe>"),o.bind("load",function(){o.unbind("load").bind("load",function(){var j=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,i=j.documentElement?j.documentElement:j.body,t=i.getElementsByTagName("textarea")[0],s=t?t.getAttribute("data-type"):null,r=t?t.getAttribute("data-status"):200,q=t?t.getAttribute("data-statusText"):"OK",k={html:i.innerHTML,text:s?t.value:i?i.textContent||i.innerText:null};c(),f(r,q,k,s?"Content-Type: "+s:null)}),p[0].submit()}),b("body").append(p,o)},abort:function(){null!==o&&(o.unbind("load").attr("src","javascript:false;"),c())}}})}),FD31.plugin("server",function($){var self=$.server=function(a){var b=$.Deferred(),c=$.extend(!0,{},self.defaultOptions,a,{success:function(){}});return b.xhr=$.Ajax(c).done(function(c){if("string"==typeof c){try{c=$.parseJSON(c)}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}}if($.isArray(c)){var e=function(c){var d=c.type,e=self.parsers[d]||a[d];return $.isFunction(e)?e.apply(b,c.data):void 0},c=$.map(c,function(a){return"notify"!=a.type?a:(e(a),void 0)});$.each(c,function(a,b){e(b)})}else{b.rejectWith(b,["Invalid ajax commands.","error"])}"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,c,d){b.rejectWith(b,[d,c])}),b};self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},dataType:"json"},self.parsers={script:function(){var data=$.makeArray(arguments);if("string"!=typeof data[0]){var chain=window,chainBroken=!1;$.each(data,function(a,b){"Foundry"===b.property&&(b.property=$.globalNamespace),"Foundry"===b.method&&(b.method=$.globalNamespace);try{switch(b.type){case"get":chain=chain[b.property];break;case"set":chain[b.property]=b.value,chainBroken=!0;break;case"call":chain=chain[b.method].apply(chain,b.args)}}catch(c){chainBroken=!0}})}else{try{eval(data[0])}catch(err){}}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)},notify:function(){this.notifyWith(this,arguments)},redirect:function(a){window.location=a}}}),FD31.plugin("component",function(f){var e=f.Component=function(b,d){return arguments.length<1?e.registry:arguments.length<2?e.registry[b]:e.register(b,d)};e.registry={},e.proxy=function(a,j,i){a[j]=f.isFunction(i)?f.proxy(i,a):i},e.register=function(l,k){var j;f.isFunction(l)&&(j=l,l=j.className,k=j.options);var i=e.registry[l]=window[l]=function(c){return f.isFunction(c)?c(f):component};if(f.each(e.prototype,function(d,m){e.proxy(i,d,m)}),i.$=f,i.options=k,i.className=l,i.identifier=l.toLowerCase(),i.componentName="com_"+i.identifier,i.prefix=i.identifier+"/",i.version=k.version,i.safeVersion=i.version.replace(/\./g,""),i.environment=k.environment||f.environment,i.mode=k.mode||f.mode,i.debug="development"===i.environment,i.console=e.console(i),i.language=k.language||f.locale.lang||"en",i.baseUrl=k.baseUrl||f.indexUrl+"?option="+i.componentName,i.ajaxUrl=k.ajaxUrl||f.basePath+"/?option="+i.componentName,i.scriptPath=k.scriptPath||f.rootPath+"/media/"+i.componentName+"/scripts/",i.stylePath=k.stylePath||f.rootPath+"/media/"+i.componentName+"/styles/",i.templatePath=k.templatePath||k.scriptPath,i.languagePath=k.languagePath||i.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage",i.viewPath=k.viewPath||i.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate",i.optimizeResources=!0,i.resourcePath=k.resourcePath||i.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource",i.resourceInterval=1200,i.scriptVersioning=k.scriptVersioning||!1,i.token=(j||{}).token,i.tasks=[],FD31.component(l,i),j){if(i.debug){j.queue.execute()}else{for(var b,a=FD31.installer(l);b=a.shift();){i.install.apply(i,b)}f.when(i.install("definitions"),i.install("scripts"),i.install("resources")).done(function(){j.queue.execute()})}}},e.extend=function(b,a){e.prototype[b]=a,f.each(e.registry,function(c,d){e.proxy(d,b,a)})},f.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>'),e.console=function(a){return function(i){var j,k=function(b){return arguments.length<1?k.toggle():k[b]&&k[b].apply(k,arguments)};return k.selector="#"+i.identifier+"-console",k.init=function(){return j=f(k.selector),j.length<1&&(j=f(f.View("component/console",{component:i})).appendTo("body"),j.find(".console-remove-button").click(function(){j.hide()})),k.element=j,arguments.callee}(),k.methods={log:function(n,m,l){m=m||"info";var d=j.find(".console-log-item-group"),b=f(document.createElement("div")).addClass("console-log-item type-"+m).attr("data-code",l).html(n);d.append(b),d[0].scrollTop=d[0].scrollHeight,i.debug&&j.show()},toggle:function(){j.toggle()},reset:function(){j.find(".console-log-item-group").empty()}},f.each(k.methods,function(d,c){k[d]=function(){return k.init(),c.apply(k,arguments)}}),k}(a)};var h=f(document),g=e.prototype;f.extend(g,{run:function(a){return f.isFunction(a)?a(f):this},ready:function(){return h.ready(function(){g.ready=g.run}),function(a){f.isFunction(a)&&h.ready(function(){a(f)})}}(),install:function(a,l){var k=this,j=k.tasks[a]||(k.tasks[a]=f.Deferred());if(!l){return j}var i=function(){return l(f,k),j.resolve()};return"definitions"==a?i():(f.when(k.install("definitions")).done(i),void 0)},template:function(a){var d=this;return void 0==a?f.grep(f.template(),function(b){return 0==b.indexOf(d.prefix)}):(arguments[0]=d.prefix+a,f.template.apply(null,arguments))},require:function(a){var k=this,a=a||{},j=f.require(a),i={};return f.each(["library","script","language","template","done"],function(d,c){i[c]=j[c]}),j.resource=function(c){if(f.isPlainObject(c)&&c.type&&c.name&&f.isDeferred(c.loader)){var l=k.resourceCollector;l||(l=k.resourceCollector=f.Deferred(),f.extend(l,{name:f.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){if(delete k.resourceCollector,l.manifest.length<0){return l.resolve(),void 0}var m=0,n=function(){m++,f.Ajax({type:"POST",url:k.resourcePath,dataType:"json",data:{resource:l.manifest}}).done(function(b){return f.isArray(b)?(f.each(b,function(p,o){var q=o.content;l.loaders[o.id][void 0!==q?"resolve":"reject"](q)}),m>1&&k.debug&&console.info("Attempt to try and get resources again was successful!"),void 0):(l.reject("Server did not return a valid resource manifest."),void 0)}).fail(function(){return m>2?(k.debug&&console.error("Unable to get resource again. Giving up!"),void 0):(k.debug&&console.warn("Unable to get resource. Trying again..."),n(),void 0)})};n(),f.when.apply(null,l.loaderList).done(l.resolve).fail(l.reject)}}),setTimeout(l.load,k.resourceCollectionInterval));var d=c.id=f.uid("Resource");return l.loaders[d]=c.loader,l.loaderList.push(c.loader),delete c.loader,l.manifest.push(c),j}},j.view=function(){var c=this,n=c.expand(arguments,{path:k.viewPath}),m={},l=n.options,d=f.map(n.names,function(p){var o=k.prefix+p,b=f.require.template.loaders[o];if(!b){return b=f.require.template.loader(o),b.name=o,c.addTask(b),k.optimizeResources?(j.resource({type:"view",name:p,loader:b}),void 0):(m[p]=b,p)}});return d.length>0&&f.Ajax({url:l.path,dataType:"json",data:{names:d}}).done(function(o){f.isArray(o)&&f.each(o,function(q,p){var r=p.content;m[p.name][void 0!==r?"resolve":"reject"](r)})}),j},j.language=function(){var c=this,d=c.expand(arguments,{path:k.languagePath});return k.optimizeResources?f.each(d.names,function(m,l){var b=f.require.language.loaders[l];b||(b=f.require.language.loader(l),b.name=l,c.addTask(b),j.resource({type:"language",name:l,loader:b}))}):i.language.apply(j,[d.options].concat(d.names)),j},j.library=function(){return i.script.apply(this,arguments),j},j.script=function(){var c=this,d=c.expand(arguments,{path:k.scriptPath});return names=f.map(d.names,function(l){if(f.isArray(l)||f.isUrl(l)||/^(\/|\.)/.test(l)){return l}var n=k.prefix+l,m=f.uri(d.options.path).toPath("./"+l+"."+(d.options.extension||"scripts")+(k.scriptVersioning?"?version="+k.safeVersion:"")).toString();return[[n,m,!0]]}),i.script.apply(j,[d.options].concat(names)),j},j.template=function(){var c=this,d=c.expand(arguments,{path:k.templatePath});return i.template.apply(j,[d.options].concat(f.map(d.names,function(b){return[[k.prefix+b,b]]}))),j},j.done=function(b){return i.done.call(j,function(){k.ready(b)})},j},module:function(a,k){var j=this;if(!f.isArray(a)){var i=j.prefix+a;return k?f.module.apply(null,[i,function(){var c=this;k.call(c,f)}]):f.module(i)}}}),f.Component.extend("getToken",function(){var a=this;return f("span#"+a.identifier+"-token input").attr("name")||a.token}),f.Component.extend("ajax",function(a,m,l){var k=this,j={url:k.ajaxUrl,data:f.extend(m,{option:k.componentName,namespace:a})};if(j=f.extend(!0,j,k.options.ajax),j.data[k.getToken()]=1,j.data.hasOwnProperty("args")&&(j.data.args=f.toJSON(j.data.args)),f.isPlainObject(l)){if(l.type){switch(l.type){case"jsonp":l.dataType="jsonp",l.crossDomain=!0,j.data.transport="jsonp";break;case"iframe":l.iframe=!0,l.processData=!1,l.files=j.data.files,delete j.data.files,j.data.transport="iframe"}delete l.type}f.extend(j,l)}f.isFunction(l)&&(j.success=l);var i=f.server(j);return i.progress(function(n,d,o){"debug"==d&&k.console.log(n,d,o)}),i}),f.Component.extend("Controller",function(){var j,i,a=this,l=f.makeArray(arguments),k=l[0];return 1==l.length?f.String.getObject(k):(l.length>2?(j=l[1],i=l[2]):(j={},i=l[1]),f.extend(j,{root:a.className+".Controller",component:a}),f.Controller.apply(this,[k,j,i]))}),f.Component.extend("Model",function(){var j,i,a=this,l=f.makeArray(arguments),k=a.className+".Model."+l[0];return 1==l.length?f.String.getObject(l[0]):(2==l.length&&(j={},i=l[1]),l.length>2&&(j=l[1],i=l[2]),f.extend(j,{component:a}),f.Model.apply(this,[k,j,i]))}),f.Component.extend("Model.List",function(){var j,i,a=this,l=f.makeArray(arguments),k=a.className+".Model.List."+l[0];return 1==l.length?f.String.getObject(l[0]):(2==l.length&&(j={},i=l[1]),l.length>2&&(j=l[1],i=l[2]),f.extend(j,{component:a}),f.Model.List.apply(this,[k,j,i]))}),f.Component.extend("View",function(){var a=this;return arguments.length<1?a.template():(arguments[0]=a.prefix+arguments[0],f.View.apply(this,arguments))}),FD31.module.execute(),f.each(FD31.component(),function(a,d){d.registered||f.Component.register(d)})}),FD31.plugin("static",function($){$.module(["dialog","ui/position","easing","ui/effect","scrollTo","markitup","fancybox","ui/stars","ui/core","ui/widget","ui/autocomplete","ui/menu"]),function(){var moduleFactory=function($){var module=this;$.require().script("ui/position","easing").done(function(){var exports=function(){$.template("dialog/default",'<div class="foundryDialog global"><div class="dialog-wrap"><div class="in"><div class="dialog-loader"><div class="loader-img"></div></div><div class="dialog-head"><span class="dialog-title"></span><a class="dialog-closeButton">Close</a></div><div class="dialog-body dialog-content"></div><div class="dialog-footer"><div class="dialog-loading"></div><div class="dialog-buttons"></div></div></div></div></div>'),$.Controller("Dialog",{pluginName:"dialog",defaultOptions:{title:"",content:void 0,buttons:{},customClass:"",width:"auto",height:"auto",css:{position:"absolute",width:"auto",height:"auto",zIndex:10001},position:{my:"center center",at:"center center",of:window},offset:100,showOverlay:!0,overlay:{css:{background:"#000",opacity:"0.4",position:"fixed",top:0,left:0,zIndex:10000,width:"100%",height:"100%",display:"none"}},body:{css:{minWidth:0,minHeight:0,overflow:"auto"}},loader:{width:300,height:100},loading:"",iframe:{css:{width:"100%",height:"100%",border:"none"}},transition:{show:"zoom",hide:"zoom"},escapeKey:!0,beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){},dialogHead:".dialog-head",dialogBody:".dialog-body",dialogFooter:".dialog-footer",dialogTitle:".dialog-title",dialogContent:".dialog-content",dialogButtons:".dialog-buttons",dialogLoader:".dialog-loader",dialogLoading:".dialog-loading","{closeButton}":".dialog-closeButton"}},function(self){return{ready:!1,contentReady:!1,init:function(){self.setInitOptions(self.options),self.initElement=self.element.clone(),self.element.finalizeContent=function(){return self.finalizeContent.apply(self,arguments)},$.each(["dialogHead","dialogBody","dialogFooter","dialogTitle","dialogContent","dialogButtons","dialogLoader","dialogLoading"],function(a,b){self[b]=self.find(self.options[b])}),void 0!==self.options.content&&self.display()},"{self} destroyed":function(){$(document).off("keydown.foundry.dialog")},setInitOptions:function(a){self.initOptions=$.extend(!0,{},a),$.each(["beforeShow","afterShow","beforeHide","afterHide"],function(a,b){self.initOptions[b]=function(){}}),$.each(["title","content","buttons","loading","selectors","bindings"],function(a,b){self.initOptions[b]=null})},update:function(a){if(a){if(a.hasOwnProperty("{binder}")){return}var a=$.extend(!0,{},self.initOptions,a);self.setInitOptions(a),self.display(a)}return self},determineContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":$.isUrl(a)?"iframe":$.isDeferred(a)?"deferred":"html"},displayQueue:[],display:function(options){if(self.resizing){return self.displayQueue.push(options)}$.isPlainObject(options)&&(self.options=$.extend(!0,{},self.Class.defaults,options)),self.ready||self.options.showOverlay&&self.createOverlay();var options=self.options,content=options.content;self.contentReady=null===content,self.contentType=self.determineContentType(content);var transition=options.transition;switch($.isString(transition)&&(options.transition={show:transition,hide:transition}),self.contentType){case"html":self.hideLoader(),self.show();break;case"iframe":var iframe=$(document.createElement("iframe")),iframeUrl=content,iframeCss=options.iframe.css,iframeButtons=options.buttons,dialogContent=self.dialogContent,iframeOptions=$.extend(!0,{},options,{content:iframe,buttons:iframeButtons});self.showLoader(function(){onIframeLoaded=function(){return function(){try{iframe[0].contentWindow.parentDialog=self}catch(b){}self.update(iframeOptions)}}(),self.dialogBody.addClass("type-iframe"),iframe.appendTo(dialogContent).css(iframeCss).css({position:"absolute",visibility:"hidden"}).one("load",onIframeLoaded).attr("src",iframeUrl)});break;case"deferred":var ajax=content;self.showLoader(function(){ajax.done(function(a){if(a){var b=$.isString(a)?{content:a}:a;b.content&&self.update($.extend(!0,{},options,b))}}).fail(function(a,b){var c=$.isString(b)?$.String.capitalize(b):"Error",d=$.isString(a)?a:"There was an error loading content.";self.update({title:c,content:d})})});break;case"dialog":var xmlOptions=$.buildHTML(content),newOptions={};$.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions[key]=val}),self.update($.extend(!0,{},options,newOptions))}},loading:function(a){var b=self.element;return void 0===a?b.hasClass("loading"):a===!1?(b.removeClass("loading"),void 0):(a===!0&&(a=self.options.loading||""),$.isString(a)&&(b.addClass("loading"),self.dialogLoading.html(a)),void 0)},showLoader:function(a){var b=self.options.width,c=self.options.height,d=function(){return self.dialogLoader.show().css({width:self.dialogBody.outerWidth(!0),height:self.dialogBody.outerHeight(!0)}).position({my:"top left",at:"top left",of:self.options.dialogContent}),self.options.width=b,self.options.height=c,a&&a()};return self.ready?d():self.update($.extend({title:self.options.title,content:"",width:self.initOptions.body.css.minWidth,height:self.initOptions.body.css.minHeight,afterShow:d},self.options.loader))},hideLoader:function(){self.element.removeClass("loading"),self.dialogLoader.hide()},autoSize:function(){return"auto"==self.initOptions.css.width||"auto"==self.initOptions.css.height},finalizeContent:function(a){var b=self.options,c=b.content;if(self.element.css(b.css),self.dialogContent.css(b.body.css),!self.refreshing){if(null!==b.title&&self.dialogTitle.html(b.title),null!==c){var d=!$.isString(c)&&$(c).is("iframe");if(self.dialogBody.toggleClass("type-iframe",d),d){for(var e=c.parent()[0],f=0;e.childNodes.length>1;){var g=e.childNodes[f];g!==c[0]&&e.removeChild(g),f++}c.css({position:"relative",visibility:"visible"})}else{var h;a?(h=c,b.content=self.stripScript(h)):h=self.stripScript(c),self.dialogContent.html(h)}}return self.contentReady||self.finalizeButtons(),self.element}},stripScript:function(a){if(!$.isString(a)){return a}var b=$($.parseHTML(a));return b.find("script").remove(),b},finalizeSize:function(a){var b=self.refElement,c=self.options,d=c.body,e=c.content,f=c.css,g=d.css;if(void 0===b?b=self.refElement=self.initElement.clone().removeClass("global").insertAfter(self.element):b.insertAfter(self.element),!a){refTitle=b.find(c.dialogTitle),refBody=b.find(c.dialogBody),refFooter=b.find(c.dialogFooter),refButtons=b.find(c.dialogButtons),b.css(self.initOptions.css).css({display:"block"}),refTitle.html(c.title),$.isEmptyObject(c.buttons)?refFooter.hide():(refFooter.show(),refButtons.append("<button>test</button>"));var h=!$.isString(e)&&$(e).is("iframe"),i=h?document.createElement("div"):self.stripScript(e);g.width=h&&"auto"==c.width?e.contents().width():c.width,g.height=h&&"auto"==c.height?e.contents().height():c.height,refBody.css(g).toggleClass("type-iframe",h).html(i);var j=refBody.width(),k=refBody.height();"border-box"!==refBody.css("boxSizing")&&(g.width=j,g.height=k),g.width<g.minWidth&&(g.width=g.minWidth),g.height<g.minHeight&&(g.height=g.minHeight);var l=c.offset,m=b.width(),n=b.height(),o=$(window).width()-l,p=$(window).height()-l,q=m>o,r=n>p;f.width=q?o:m,f.height=r?p:n,"auto"!==g.width&&(g.width-=m-f.width),g.width<=0&&(g.width="auto"),"auto"!==g.height&&(g.height-=n-f.height),g.height<=0&&(g.height="auto"),g.minWidth=g.minHeight="auto",refBody.css(g),g.overflowX=!q||h||refBody[0].scrollWidth<=g.width?"auto":"scroll",g.overflowY=!r||h||refBody[0].scrollHeight<=g.height?"auto":"scroll",refBody.html("")}b.css(f).css("visibility","hidden").position(c.position),f.top=b.css("top"),f.left=b.css("left")},finalizeButtons:function(){var a=self.dialogFooter,b=self.dialogButtons;b.empty();var c=self.options.buttons;return $.isEmptyObject(c)?(a.hide(),void 0):($.isString(c)&&b.html(c),$.isArray(c)&&$.each(c,function(a,c){var d=$.extend({},c),e=c.classNames?c.classNames:"";delete d.name,delete d.classNames,$(document.createElement("button")).attr("type","button").addClass(e).html(c.name).bind(d).appendTo(b)}),a.show(),void 0)},show:function(a){if(!self.ready||!self.resizing){var b=self.options;self.refElement&&self.refElement.remove(),self.contentReady||b.beforeShow.apply(self),$(document).off("keydown.foundry.dialog"),b.escapeKey&&$(document).on("keydown.foundry.dialog",function(a){27==a.keyCode&&self.close()}),self.resizing=!0,self.finalizeSize(),self.element.addClass("resizing"),$(window).trigger("dialogTransitionStart"),self.transition[b.transition.show].show.apply(self,[function(){self.ready||(self.on("resize.dialog scroll.dialog",window,$._.debounce(function(){self.refresh()},150)),self.ready=!0),self.contentReady||(a&&a.apply(self),b.afterShow.apply(self)),self.refElement.detach(),self.element.removeClass("resizing"),self.contentReady=!0,self.element.css({width:"auto",height:"auto"}),self.removePlugin("binder");var c=b.selectors,d=b.bindings;if(c&&d){var e=$.Controller($.uid("dialogBinder"),{defaultOptions:c},function(){return d});self.addPlugin("binder",e)}self.displayQueue.length>0?setTimeout(function(){self.resizing=!1,self.display(self.displayQueue.shift())},500):(self.resizing=!1,$(window).trigger("dialogTransitionEnd"))}])}},"{self} removePlugin":function(a,b,c,d){void 0!==d&&delete $.Controller[d.Class.fullName]},hide:function(a){self.contentReady||self.options.beforeHide.apply(self),$(window).trigger("dialogTransitionStart"),self.transition[self.options.transition.hide].hide.apply(self,[function(){a&&a.apply(self),self.options.afterHide.apply(self),$(window).trigger("dialogTransitionEnd")}])},refresh:function(){self.closing||self.resizing||(self.finalizeSize(!0),self.resizing=!0,self.refreshing=!0,$(window).trigger("dialogTransitionStart"),self.transition[self.options.transition.show].show.apply(self,[function(){$(window).trigger("dialogTransitionEnd"),self.resizing=!1,self.refreshing=!1,self.element.css({width:"auto",height:"auto"})}]))},transition:{none:{show:function(a){self.ready||self.overlay.show(),self.element.finalizeContent().show(0,a)},hide:function(a){self.overlay.hide(),self.element.hide(0,a)}},fade:{show:function(a){return self.ready||self.overlay.fadeOut(0).fadeIn("normal"),self.contentReady?(self.element.finalizeContent(),a&&a()):(self.element.fadeOut(self.contentReady?"fast":0,function(){self.element.finalizeContent().fadeIn("normal","easeInCubic",a)}),void 0)},hide:function(a){self.overlay.fadeOut("normal","easeOutCubic"),self.element.fadeOut("normal","easeOutCubic",a)}},zoom:{show:function(a){var b=self.dialogBody,c=self.dialogFooter,d=self.options.css;self.ready||(self.overlay.fadeIn("fast"),self.element.finalizeContent().css({top:parseInt(d.top)+parseInt(d.height)/2,left:parseInt(d.left)+parseInt(d.width)/2,width:0,height:0})),self.contentReady||(b.css({opacity:0}),c.css({opacity:0})),self.element.animate({top:d.top,left:d.left,width:d.width,height:d.height},"normal","easeInCubic",function(){return self.element.finalizeContent(!0),b.css({opacity:1}),c.css({opacity:1}),a&&a()})},hide:function(a){var b=self.options.css;self.element.animate({top:parseInt(b.top)+parseInt(b.height)/2,left:parseInt(b.left)+parseInt(b.width)/2,width:0,height:0},"normal","easeOutCubic",function(){return self.overlay.fadeOut("fast"),a&&a()})}}},overlay:$("<div></div>"),createOverlay:function(){self.overlay.css(self.options.overlay.css).click(function(){self.close()}).appendTo("body")},closing:!1,close:function(){return self.closing?void 0:(self.closing=!0,$(document).off("keydown.foundry.dialog"),self.hide(function(){self.removePlugin("binder"),self.element.remove(),self.refElement&&self.refElement.remove()}),self)},"{closeButton} click":function(){self.close()},content:function(){var a=self.dialogContent,b=a.find("> iframe");return b.length>0?b.contents():a},messageGroup:function(){var a=self.dialogBody,b=a.find("> [data-message-group]");return b.length<1&&(b=$("<div data-message-group></div>").prependTo(a)),b}}}),$.dialog=function(a){if(window.parentDialog){return window.parentDialog.update(a)}var b=$(".foundryDialog.global"),c=b.controllers("dialog")[0];if(arguments.length<1&&c){return c}if(b.length<1&&(b=$($.View("dialog/default")).addClass("global").addClass(a.customClass).appendTo("body")),"string"==typeof a||$.isDeferred(a)){var d=arguments[1];a={content:a,afterShow:$.isFunction(d)?d:$.noop}}return c?c.update(a):c=b.addController("Dialog",a),c}};exports(),module.resolveWith(exports)})};FD31.module("dialog",moduleFactory)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b){return c}var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of){return l.apply(this,arguments)}b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=k:"center"===b.at[0]&&(r.left+=k/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());"right"===b.my[0]?A.left-=j:"center"===b.my[0]&&(A.left-=j/2),"bottom"===b.my[1]?A.top-=l:"center"===b.my[1]&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:0>f?"left":c>0?"right":"center",vertical:0>h?"top":g>0?"bottom":"middle"};j>k&&e(c+f)<k&&(m.horizontal="center"),l>p&&e(g+h)<p&&(m.vertical="middle"),m.important=d(e(c),e(f))>d(e(g),e(h))?"horizontal":"vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&0>=i?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):a.left=i>0&&0>=h?e:h>i?e+f-b.collisionWidth:e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)},top:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&0>=i?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):a.top=i>0&&0>=h?e:h>i?e+f-b.collisionHeight:e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];0>i?(n=a.left+k+l+m+b.collisionWidth-f-d,(0>n||n<e(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-g,(o>0||e(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(0>p||p<e(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(a.top+=l+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d){b.style[f]=d[f]}b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(c)};d(),b.resolveWith(d)};FD31.module("ui/position",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){c.easing.jswing=c.easing.swing,c.extend(c.easing,{def:"easeOutQuad",swing:function(a,b,d,e,f){return c.easing[c.easing.def](a,b,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return -d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return -d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return -d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return -d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return -d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b){return c}if(1==(b/=e)){return c+d}if(g||(g=0.3*e),h<Math.abs(d)){h=d;var f=g/4}else{var f=g/(2*Math.PI)*Math.asin(d/h)}return -(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b){return c}if(1==(b/=e)){return c+d}if(g||(g=0.3*e),h<Math.abs(d)){h=d;var f=g/4}else{var f=g/(2*Math.PI)*Math.asin(d/h)}return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b){return c}if(2==(b/=e/2)){return c+d}if(g||(g=0.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else{var f=g/(2*Math.PI)*Math.asin(d/h)}return 1>b?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*0.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,d,e,f){return e-c.easing.easeOutBounce(a,f-b,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+0.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(a,b,d,e,f){return f/2>b?0.5*c.easing.easeInBounce(a,2*b,0,e,f)+d:0.5*c.easing.easeOutBounce(a,2*b-f,0,e,f)+0.5*e+d}})};d(),b.resolveWith(d)};FD31.module("easing",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){var d="ui-effects-";a.effects={effect:{}},function(a,b){function m(a,b,c){var d=h[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function n(b){var c=f(),d=c._rgba=[];return b=b.toLowerCase(),l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||"rgba";return i?(f=c[j](i),c[g[j].cache]=f[g[j].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,k.transparent),c):k[b]}function o(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var k,c="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},i=f.support={},j=a("<p>")[0],l=a.each;j.style.cssText="background-color:rgba(1,1,1,.5)",i.rgba=j.style.backgroundColor.indexOf("rgba")>-1,l(g,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b){return this._rgba=[null,null,null,null],this}(c.jquery||c.nodeType)&&(c=a(c).css(d),d=b);var i=this,j=a.type(c),o=this._rgba=[];return d!==b&&(c=[c,d,e,h],j="array"),"string"===j?this.parse(n(c)||k._default):"array"===j?(l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)}),this):"object"===j?(c instanceof f?l(g,function(a,b){c[b.cache]&&(i[b.cache]=c[b.cache].slice())}):l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if("alpha"===a||null==c[a]){return}i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,!0)}),i[e]&&a.inArray(null,i[e].slice(0,3))<0&&(i[e][3]=1,d.from&&(i._rgba=d.from(i[e])))}),this):void 0},is:function(a){var b=f(a),c=!0,d=this;return l(g,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],l(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return l(g,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=0===this.alpha()?f("transparent"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();return c=c[e.cache],l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};null!==g&&(null===f?k[e]=g:(i.mod&&(g-f>i.mod/2?f+=i.mod:f-g>i.mod/2&&(f-=i.mod)),k[e]=m((g-f)*b+f,d)))}),this[d](k)},blend:function(b){if(1===this._rgba[3]){return this}var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2]){return[null,null,null,a[3]]}var k,l,b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=0.5*i;return k=g===f?0:b===f?60*(c-d)/h+360:c===f?60*(d-b)/h+120:60*(b-c)/h+240,l=0===h?0:0.5>=j?h/i:h/(2-i),[Math.round(k)%360,l,j,null==e?1:e]},g.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2]){return[null,null,null,a[3]]}var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=0.5>=d?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(255*o(g,f,b+1/3)),Math.round(255*o(g,f,b)),Math.round(255*o(g,f,b-1/3)),e]},l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){if(i&&!this[h]&&(this[h]=i(this._rgba)),c===b){return this[h].slice()}var d,e=a.type(c),k="array"===e||"object"===e?c:arguments,n=this[h].slice();return l(g,function(a,b){var c=k["object"===e?a:b.idx];null==c&&(c=n[b.idx]),n[b.idx]=m(c,b)}),j?(d=f(j(n)),d[h]=n,d):f(n)},l(g,function(b,e){f.fn[b]||(f.fn[b]=function(f){var k,g=a.type(f),h="alpha"===b?this._hsla?"hsla":"rgba":c,i=this[h](),j=i[e.idx];return"undefined"===g?j:("function"===g&&(f=f.call(this,j),g=a.type(f)),null==f&&e.empty?this:("string"===g&&(k=d.exec(f),k&&(f=j+parseFloat(k[2])*("+"===k[1]?1:-1))),i[e.idx]=f,this[h](i)))})})}),f.hook=function(b){var c=b.split(" ");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h="";if("transparent"!==d&&("string"!==a.type(d)||(e=n(d)))){if(d=f(e||d),!i.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;){try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(j){}}d=d.blend(h&&"transparent"!==h?h:"_default")}d=d.toRgbaString()}try{b.style[c]=d}catch(j){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=f(b.elem,c),b.end=f(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},f.hook(c),a.cssHooks.borderColor={expand:function(a){var b={};return l(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},k=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(c),function(){function f(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]]){for(d=e.length;d--;){c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c])}}else{for(c in e){"string"==typeof e[c]&&(f[c]=e[c])}}return f}function g(b,c){var f,g,d={};for(f in c){g=c[f],b[f]!==g&&(e[f]||(a.fx.step[f]||!isNaN(parseFloat(g)))&&(d[f]=g))}return d}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,d){a.fx.step[d]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(c.style(a.elem,d,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,c,e,h){var i=a.speed(c,e,h);return this.queue(function(){var h,c=a(this),e=c.attr("class")||"",j=i.children?c.find("*").addBack():c;j=j.map(function(){var b=a(this);return{el:b,start:f(this)}}),h=function(){a.each(d,function(a,d){b[d]&&c[d+"Class"](b[d])})},h(),j=j.map(function(){return this.end=f(this.el[0]),this.diff=g(this.start,this.end),this}),c.attr("class",e),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){h(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(c[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function c(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return !b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.4pre",save:function(a,b){for(var c=0;c<b.length;c++){null!==b[c]&&a.data(d+b[c],a[0].style[b[c]])}},restore:function(a,c){var e,f;for(f=0;f<c.length;f++){null!==c[f]&&(e=a.data(d+c[f]),e===b&&(e=""),a.css(c[f],e))}},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=0.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=0.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper")){return b.parent()}var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function g(c){function h(){a.isFunction(e)&&e.call(d[0]),a.isFunction(c)&&c()}var d=a(this),e=b.complete,g=b.mode;(d.is(":hidden")?"hide"===g:"show"===g)?(d[g](),h()):f.call(d[0],b,h)}var b=c.apply(this,arguments),d=b.mode,e=b.queue,f=a.effects.effect[b.effect];return a.fx.off||!f?d?this[d](b.duration,b.complete):this.each(function(){b.complete&&b.complete.call(this)}):e===!1?this.each(g):this.queue(e||"fx",g)},show:function(a){return function(b){if(e(b)){return a.apply(this,arguments)}var d=c.apply(this,arguments);return d.mode="show",this.effect.call(this,d)}}(a.fn.show),hide:function(a){return function(b){if(e(b)){return a.apply(this,arguments)}var d=c.apply(this,arguments);return d.mode="hide",this.effect.call(this,d)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b){return a.apply(this,arguments)}var d=c.apply(this,arguments);return d.mode="toggle",this.effect.call(this,d)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;){}return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return 0.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(c),function(a){var c=/up|down|vertical/,d=/up|left|vertical|horizontal/;a.effects.effect.blind=function(b,e){var p,q,r,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i=b.direction||"up",j=c.test(i),k=j?"height":"width",l=j?"top":"left",m=d.test(i),n={},o="show"===h;f.parent().is(".ui-effects-wrapper")?a.effects.save(f.parent(),g):a.effects.save(f,g),f.show(),p=a.effects.createWrapper(f).css({overflow:"hidden"}),q=p[k](),r=parseFloat(p.css(l))||0,n[k]=o?q:0,m||(f.css(j?"bottom":"right",0).css(j?"top":"left","auto").css({position:"absolute"}),n[l]=o?r:q+r),o&&(p.css(k,0),m||p.css(l,r+q)),p.animate(n,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===h&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),e()}})}}(c),function(a){a.effects.effect.explode=function(b,c){function s(){l.push(this),l.length===d*e&&t()}function t(){f.css({visibility:"visible"}),a(l).remove(),h||f.hide(),c()}var m,n,o,p,q,r,d=b.pieces?Math.round(Math.sqrt(b.pieces)):3,e=d,f=a(this),g=a.effects.setMode(f,b.mode||"hide"),h="show"===g,i=f.show().css("visibility","hidden").offset(),j=Math.ceil(f.outerWidth()/e),k=Math.ceil(f.outerHeight()/d),l=[];for(m=0;d>m;m++){for(p=i.top+m*k,r=m-(d-1)/2,n=0;e>n;n++){o=i.left+n*j,q=n-(e-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*j,top:-m*k}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:j,height:k,left:o+(h?q*j:0),top:p+(h?r*k:0),opacity:h?0:1}).animate({left:o+(h?0:q*j),top:p+(h?0:r*k),opacity:h?1:0},b.duration||500,b.easing,s)}}}}(c),function(a){a.effects.effect.pulsate=function(b,c){var n,d=a(this),e=a.effects.setMode(d,b.mode||"show"),f="show"===e,g="hide"===e,h=f||"hide"===e,i=2*(b.times||5)+(h?1:0),j=b.duration/i,k=0,l=d.queue(),m=l.length;for((f||!d.is(":visible"))&&(d.css("opacity",0).show(),k=1),n=1;i>n;n++){d.animate({opacity:k},j,b.easing),k=1-k}d.animate({opacity:k},j,b.easing),d.queue(function(){g&&d.hide(),c()}),m>1&&l.splice.apply(l,[1,0].concat(l.splice(m,i+1))),d.dequeue()}}(c),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(c),function(a){a.effects.effect.bounce=function(b,c){var q,r,s,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"effect"),g="hide"===f,h="show"===f,i=b.direction||"up",j=b.distance,k=b.times||5,l=2*k+(h||g?1:0),m=b.duration/l,n=b.easing,o="up"===i||"down"===i?"top":"left",p="up"===i||"left"===i,t=d.queue(),u=t.length;for((h||g)&&e.push("opacity"),a.effects.save(d,e),d.show(),a.effects.createWrapper(d),j||(j=d["top"===o?"outerHeight":"outerWidth"]()/3),h&&(s={opacity:1},s[o]=0,d.css("opacity",0).css(o,p?2*-j:2*j).animate(s,m,n)),g&&(j/=Math.pow(2,k-1)),s={},s[o]=0,q=0;k>q;q++){r={},r[o]=(p?"-=":"+=")+j,d.animate(r,m,n).animate(s,m,n),j=g?2*j:j/2}g&&(r={opacity:0},r[o]=(p?"-=":"+=")+j,d.animate(r,m,n)),d.queue(function(){g&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,l+1))),d.dequeue()}}(c),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(c),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(c),function(a){a.effects.effect.clip=function(b,c){var m,n,o,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g="show"===f,h=b.direction||"vertical",i="vertical"===h,j=i?"height":"width",k=i?"top":"left",l={};a.effects.save(d,e),d.show(),m=a.effects.createWrapper(d).css({overflow:"hidden"}),n="IMG"===d[0].tagName?m:d,o=n[j](),g&&(n.css(j,0),n.css(k,o/2)),l[j]=g?o:0,l[k]=g?0:o/2,n.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){g||d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}})}}(c),function(a){a.effects.effect.fold=function(b,c){var o,p,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g="show"===f,h="hide"===f,i=b.size||15,j=/([0-9]+)%/.exec(i),k=!!b.horizFirst,l=g!==k,m=l?["width","height"]:["height","width"],n=b.duration/2,q={},r={};a.effects.save(d,e),d.show(),o=a.effects.createWrapper(d).css({overflow:"hidden"}),p=l?[o.width(),o.height()]:[o.height(),o.width()],j&&(i=parseInt(j[1],10)/100*p[h?0:1]),g&&o.css(k?{height:0,width:i}:{height:i,width:0}),q[m[0]]=g?p[0]:i,r[m[1]]=g?p[1]:0,o.animate(q,n,b.easing).animate(r,n,b.easing,function(){h&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()})}}(c),function(a){a.effects.effect.shake=function(b,c){var q,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"effect"),g=b.direction||"left",h=b.distance||20,i=b.times||3,j=2*i+1,k=Math.round(b.duration/j),l="up"===g||"down"===g?"top":"left",m="up"===g||"left"===g,n={},o={},p={},r=d.queue(),s=r.length;for(a.effects.save(d,e),d.show(),a.effects.createWrapper(d),n[l]=(m?"-=":"+=")+h,o[l]=(m?"+=":"-=")+2*h,p[l]=(m?"-=":"+=")+2*h,d.animate(n,k,b.easing),q=1;i>q;q++){d.animate(o,k,b.easing).animate(p,k,b.easing)}d.animate(o,k,b.easing).animate(n,k/2,b.easing).queue(function(){"hide"===f&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,j+1))),d.dequeue()}}(c),function(a){a.effects.effect.drop=function(b,c){var l,d=a(this),e=["position","top","bottom","left","right","opacity","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g="show"===f,h=b.direction||"left",i="up"===h||"down"===h?"top":"left",j="up"===h||"left"===h?"pos":"neg",k={opacity:g?1:0};a.effects.save(d,e),d.show(),a.effects.createWrapper(d),l=b.distance||d["top"===i?"outerHeight":"outerWidth"](!0)/2,g&&d.css("opacity",0).css(i,"pos"===j?-l:l),k[i]=(g?"pos"===j?"+=":"-=":"pos"===j?"-=":"+=")+l,d.animate(k,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}})}}(c),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(c),function(a){a.effects.effect.slide=function(b,c){var k,d=a(this),e=["position","top","bottom","left","right","width","height"],f=a.effects.setMode(d,b.mode||"show"),g="show"===f,h=b.direction||"left",i="up"===h||"down"===h?"top":"left",j="up"===h||"left"===h,l={};a.effects.save(d,e),d.show(),k=b.distance||d["top"===i?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(d).css({overflow:"hidden"}),g&&d.css(i,j?isNaN(k)?"-"+k:-k:k),l[i]=(g?j?"+=":"-=":j?"-=":"+=")+k,d.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}})}}(c)};d(),b.resolveWith(d)};FD31.module("ui/effect",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){function c(a){return"object"==typeof a?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c){return b}var d=(b.contentWindow||b).document||b.ownerDocument||b;return/webkit/i.test(navigator.userAgent)||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9000000000),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function m(a){h.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})}if(null!=d){var j,g=this,h=a(g),i=d,k={},l=h.is("html,body");switch(typeof i){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(i)){i=c(i);break}if(i=a(i,this),!i.length){return}case"object":(i.is||i.style)&&(j=(i=a(i)).offset())}a.each(f.axis.split(""),function(a,c){var d="x"==c?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=g[n],p=b.max(g,c);if(j){k[n]=j[e]+(l?0:o-h.offset()[e]),f.margin&&(k[n]-=parseInt(i.css("margin"+d))||0,k[n]-=parseInt(i.css("border"+d+"Width"))||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=i["x"==c?"width":"height"]()*f.over[e])}else{var q=i[e];k[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}f.limit&&/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!=k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}}).end()},a.fn.scrollIntoView=function(b){var b=a(b);if(!(b.length<1)){var c=this.offset(),d=this.height(),e=c.top,f=e+d,g=b.offset(),h=b.height(),i=g.top,j=i+h;return j>f?this.scrollTo(b):e>i?this.scrollTo(b,{offset:-1*(d-h)}):void 0}},b.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body")){return b[e]-a(b)[d.toLowerCase()]()}var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(c)};d(),b.resolveWith(d)};FD31.module("scrollTo",a)}(),function(){var moduleFactory=function($){var module=this,jQuery=$,exports=function(){!function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;return ctrlKey=shiftKey=altKey=!1,"string"==typeof settings&&(method=settings,params=extraSettings),options={id:"",nameSpace:"",root:"",previewHandler:!1,previewInWindow:"",previewInElement:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,$.markItUp.sets[(extraSettings||settings||{}).set],extraSettings),options.root||$("script").each(function(a,b){miuScript=$(b).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])}),this.each(function(){function localize(a,b){return b?a.replace(/("|')~\//g,"$1"+options.root):a.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),$$.wrap('<div class="markItUpExpanding"></div>'),options.resizeHandle===!0&&$.browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(a){var d,e,b=$$.height(),c=a.clientY;d=function(a){return $$.css("height",Math.max(20,a.clientY+b-c)+"px"),!1},e=function(){return $("html").unbind("mousemove.markItUp",d).unbind("mouseup.markItUp",e),!1},$("html").bind("mousemove.markItUp",d).bind("mouseup.markItUp",e)}),footer.append(resizeHandle)),$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed),$$.bind("insertion.markItUp",function(a,b){b.target!==!1&&get(),textarea===$.markItUp.focused&&markup(b)}),$$.bind("focus.markItUp",function(){$.markItUp.focused=this}),options.previewInElement&&refreshPreview()}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{for(i++,j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return !1}).bind("click.markItUp",function(){return !1}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).bind("mouseenter.markItUp",function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul}function magicMarkups(a){return a?(a=a.toString(),a=a.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(a,b){var c=b.split("|!|");return altKey===!0?void 0!==c[1]?c[1]:c[0]:void 0===c[1]?"":c[0]}),a=a.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(a,b){var c=b.split(":!:");return abort===!0?!1:(value=prompt(c[0],c[1]?c[1]:""),null===value&&(abort=!0),value)})):""}function prepare(a){return $.isFunction(a)&&(a=a(hash)),magicMarkups(a)}function build(a){var b=prepare(clicked.openWith),c=prepare(clicked.placeHolder),d=prepare(clicked.replaceWith),e=prepare(clicked.closeWith),f=prepare(clicked.openBlockWith),g=prepare(clicked.closeBlockWith),h=clicked.multiline;if(""!==d){block=b+d+e}else{if(""===selection&&""!==c){block=b+c+e}else{a=a||selection;var i=[a],j=[];h===!0&&(i=a.split(/\r?\n/));for(var k=0;k<i.length;k++){line=i[k];var l;(l=line.match(/ *$/))?j.push(b+line.replace(/ *$/g,"")+e+l):j.push(b+line+e)}block=j.join("\n")}}return block=f+block+g,{block:block,openWith:b,replaceWith:d,placeHolder:c,closeWith:e}}function markup(a){var b,c,d,e;if(hash=clicked=a,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(ctrlKey===!0&&shiftKey===!0||a.multiline===!0)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),ctrlKey===!0&&shiftKey===!0){for(lines=selection.split(/\r?\n/),c=0,d=lines.length,e=0;d>e;e++){""!==$.trim(lines[e])?($.extend(hash,{line:++c,selection:lines[e]}),lines[e]=build(lines[e]).block):lines[e]=""}string={block:lines.join("\n")},start=caretPosition,b=string.block.length+($.browser.opera?d-1:0)}else{ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,b-=string.block.match(/ $/)?1:0,b-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,b=string.block.length,b-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,b=0,start-=fixIeBug(string.block))}""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,b)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(ctrlKey===!0&&shiftKey===!0||a.multiline===!0)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(a){return $.browser.opera?a.length-a.replace(/\n*/g,"").length:0}function fixIeBug(a){return $.browser.msie?a.length-a.replace(/\r*/g,"").length:0}function insert(a){if(document.selection){var b=document.selection.createRange();b.text=a}else{textarea.value=textarea.value.substring(0,caretPosition)+a+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}}function set(a,b){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&0==b){return !1}range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",a),range.moveEnd("character",b),range.select()}else{textarea.setSelectionRange&&textarea.setSelectionRange(a,a+b)}textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection){if(selection=document.selection.createRange().text,$.browser.msie){var a=document.selection.createRange(),b=a.duplicate();for(b.moveToElementText(textarea),caretPosition=-1;b.inRange(a);){b.moveStart("character"),caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){"function"==typeof options.previewHandler?previewWindow=!0:options.previewInElement?previewWindow=$(options.previewInElement):!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()}function refreshPreview(){renderPreview()}function renderPreview(){if(options.previewHandler&&"function"==typeof options.previewHandler){options.previewHandler($$.val())}else{if(options.previewParser&&"function"==typeof options.previewParser){var b=options.previewParser($$.val());writeInPreview(localize(b,1))}else{""!==options.previewParserPath?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(a){writeInPreview(localize(a,1))}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(a){writeInPreview(localize(a,1).replace(/<!-- content -->/g,$$.val()))}})}}return !1}function writeInPreview(a){if(options.previewInElement){$(options.previewInElement).html(a)}else{if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(b){sp=0}previewWindow.document.open(),previewWindow.document.write(a),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}}}function keyPressed(a){if(shiftKey=a.shiftKey,altKey=a.altKey,ctrlKey=a.altKey&&a.ctrlKey?!1:a.ctrlKey||a.metaKey,"keydown"===a.type){if(ctrlKey===!0&&(li=$('a[accesskey="'+(13==a.keyCode?"\\n":String.fromCharCode(a.keyCode))+'"]',header).parent("li"),0!==li.length)){return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1}if(13===a.keyCode||10===a.keyCode){return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault)}if(9===a.keyCode){return 1==shiftKey||1==ctrlKey||1==altKey?!1:-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor"),$$.parents("div.markItUp").parent("div").replaceWith($$),$$.data("markItUp",null)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;if($$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),method){switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}}else{init()}})},$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})};var sets;"object"==typeof $.markItUp&&(sets=$.markItUp.sets),$.markItUp=function(a){var b={target:!1};return $.extend(b,a),b.target?$(b.target).each(function(){$(this).focus(),$(this).trigger("insertion",[b])}):($("textarea").trigger("insertion",[b]),void 0)},$.markItUp.sets={},sets&&$.extend($.markItUp.sets,sets)}(jQuery)};exports(),module.resolveWith(exports)};FD31.module("markitup",moduleFactory)}(),function(){var a=function(a){var b=this,c=function(){!function(b,c){var d=a(b),e=a(c),f=a.fancybox=function(){f.open.apply(this,arguments)},g=!1,h=null;a.extend(f,{version:"2.0.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:200,minHeight:200,maxWidth:9999,maxHeight:9999,autoSize:!0,fitToView:!0,aspectRatio:!1,topRatio:0.5,fixed:!(a.browser.msie&&a.browser.version<=6)&&"undefined"==typeof c.createTouch,scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3000,modal:!1,loop:!0,ajax:{dataType:"html"},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:0.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}},onCancel:a.noop,beforeLoad:a.noop,afterLoad:a.noop,beforeShow:a.noop,afterShow:a.noop,beforeClose:a.noop,afterClose:a.noop},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(b,c){a.isArray(b)||(b=b.jquery?a(b).get():[b]),b.length&&(f.close(!0),f.isActive=!0,f.opts=a.extend(!0,{},f.defaults,c),f.group=b,f._start(f.opts.index||0))},cancel:function(){f.coming&&!1===f.trigger("onCancel")||(f.coming=null,f.hideLoading(),f.ajaxLoad&&f.ajaxLoad.abort(),f.ajaxLoad=null,f.imgPreload&&(f.imgPreload.onload=f.imgPreload.onabort=f.imgPreload.onerror=null))},close:function(b){f.cancel(),f.current&&!1!==f.trigger("beforeClose")&&(f.unbindEvents(),!f.isOpen||b&&b[0]===!0?(a(".fancybox-wrap").stop().trigger("onReset").remove(),f._afterZoomOut()):(f.isOpen=f.isOpened=!1,a(".fancybox-item").remove(),f.wrap.stop(!0).removeClass("fancybox-opened"),f.inner.css("overflow","hidden"),f.transitions[f.current.closeMethod]()))},play:function(b){var c=function(){clearTimeout(f.player.timer)},d=function(){c(),f.current&&f.player.isActive&&(f.player.timer=setTimeout(f.next,f.current.playSpeed))},e=function(){c(),a("body").unbind(".player"),f.player.isActive=!1,f.trigger("onPlayEnd")},g=function(){f.current&&(f.current.loop||f.current.index<f.group.length-1)&&(f.player.isActive=!0,a("body").bind({"afterShow.player onUpdate.player":d,"onCancel.player beforeClose.player":e,"beforeLoad.player":c}),d(),f.trigger("onPlayStart"))};f.player.isActive||b&&b[0]===!1?e():g()},next:function(){f.current&&f.jumpto(f.current.index+1)},prev:function(){f.current&&f.jumpto(f.current.index-1)},jumpto:function(a){f.current&&(a=parseInt(a,10),f.group.length>1&&f.current.loop&&(a>=f.group.length?a=0:0>a&&(a=f.group.length-1)),"undefined"!=typeof f.group[a]&&(f.cancel(),f._start(a)))},reposition:function(a){f.isOpen&&f.wrap.css(f._getPosition(a))},update:function(){f.isOpen&&(g||(h=setTimeout(function(){g&&(g=!1,f.current&&(f.current.autoSize&&(f.inner.height("auto"),f.current.height=f.inner.height()),f._setDimension(),f.current.canGrow&&f.inner.height("auto"),f.reposition(),f.trigger("onUpdate")))},100)),g=!0)},toggle:function(){f.isOpen&&(f.current.fitToView=!f.current.fitToView,f.update())},hideLoading:function(){a("#fancybox-loading").remove()},showLoading:function(){f.hideLoading(),a('<div id="fancybox-loading"><div></div></div>').click(f.cancel).appendTo("body")},getViewport:function(){return{x:d.scrollLeft(),y:d.scrollTop(),w:d.width(),h:d.height()}},unbindEvents:function(){f.wrap&&f.wrap.unbind(".fb"),e.unbind(".fb"),d.unbind(".fb")},bindEvents:function(){var b=f.current,c=b.keys;b&&(d.bind("resize.fb, orientationchange.fb",f.update),c&&e.bind("keydown.fb",function(b){var d;b.ctrlKey||b.altKey||b.shiftKey||b.metaKey||!(a.inArray(b.target.tagName.toLowerCase(),["input","textarea","select","button"])<0)||(d=b.keyCode,a.inArray(d,c.close)>-1?(f.close(),b.preventDefault()):a.inArray(d,c.next)>-1?(f.next(),b.preventDefault()):a.inArray(d,c.prev)>-1&&(f.prev(),b.preventDefault()))}),a.fn.mousewheel&&b.mouseWheel&&f.group.length>1&&f.wrap.bind("mousewheel.fb",function(b,c){var d=a(b.target).get(0);(0===d.clientHeight||d.scrollHeight===d.clientHeight&&d.scrollWidth===d.clientWidth)&&(b.preventDefault(),f[c>0?"prev":"next"]())}))},trigger:function(b){var c,d=f[a.inArray(b,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(d){if(a.isFunction(d[b])&&(c=d[b].apply(d,Array.prototype.slice.call(arguments,1))),c===!1){return !1}d.helpers&&a.each(d.helpers,function(c,e){e&&"undefined"!=typeof f.helpers[c]&&a.isFunction(f.helpers[c][b])&&f.helpers[c][b](e,d)}),a.event.trigger(b+".fb")}},isImage:function(a){return a&&a.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(a){return a&&a.match(/\.(swf)(.*)?$/i)},_start:function(b){var e,g,h,i,c={},d=f.group[b]||null;return d&&"object"==typeof d&&(d.nodeType||d instanceof a)&&(e=!0,a.metadata&&(c=a(d).metadata())),c=a.extend(!0,{},f.opts,{index:b,element:d},a.isPlainObject(d)?d:c),a.each(["href","title","content","type"],function(b,g){c[g]=f.opts[g]||e&&a(d).attr(g)||c[g]||null}),"number"==typeof c.margin&&(c.margin=[c.margin,c.margin,c.margin,c.margin]),c.modal&&a.extend(!0,c,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),f.coming=c,!1===f.trigger("beforeLoad")?(f.coming=null,void 0):(h=c.type,g=c.href,h||(e&&(i=a(d).data("fancybox-type"),!i&&d.className&&(i=d.className.match(/fancybox\.(\w+)/),h=i?i[1]:null)),!h&&g&&(f.isImage(g)?h="image":f.isSWF(g)?h="swf":g.match(/^#/)&&(h="inline")),h||(h=e?"inline":"html"),c.type=h),"inline"===h||"html"===h?(c.content=c.content||("inline"===h&&g?a(g):a(d)),c.content.length||(h=null)):(c.href=g||d,c.href||(h=null)),c.group=f.group,c.isDom=e,"image"===h?f._loadImage():"ajax"===h?f._loadAjax():h?f._afterLoad():f._error("type"),void 0)},_error:function(b){f.hideLoading(),a.extend(f.coming,{type:"html",autoSize:!0,minHeight:0,hasError:b,content:f.coming.tpl.error}),f._afterLoad()},_loadImage:function(){f.imgPreload=new Image,f.imgPreload.onload=function(){this.onload=this.onerror=null,f.coming.width=this.width,f.coming.height=this.height,f._afterLoad()},f.imgPreload.onerror=function(){this.onload=this.onerror=null,f._error("image")},f.imgPreload.src=f.coming.href,f.imgPreload.width||f.showLoading()},_loadAjax:function(){f.showLoading(),f.ajaxLoad=a.ajax(a.extend({},f.coming.ajax,{url:f.coming.href,error:function(a,b){"abort"!==b?f._error("ajax",a):f.hideLoading()},success:function(a,b){"success"===b&&(f.coming.content=a,f._afterLoad())}}))},_preload:function(){var b=f.group,c=f.current.index;b.length>1&&((new Image).src=a(b[c+1]||b[0]).attr("href"),(new Image).src=a(b[c-1]||b[b.length-1]).attr("href"))},_afterLoad:function(){return f.hideLoading(),f.coming&&!1!==f.trigger("afterLoad",f.current)?(f.isOpened?(a(".fancybox-item").remove(),f.wrap.stop(!0).removeClass("fancybox-opened"),f.inner.css("overflow","hidden"),f.transitions[f.current.prevMethod]()):(a(".fancybox-wrap").stop().trigger("onReset").remove(),f.trigger("afterClose")),f.unbindEvents(),f.isOpen=!1,f.current=f.coming,f.coming=!1,f.wrap=a(f.current.tpl.wrap).addClass("fancybox-tmp "+f.current.wrapCSS).appendTo("body"),f.outer=a(".fancybox-outer",f.wrap).css("padding",f.current.padding+"px"),f.inner=a(".fancybox-inner",f.wrap),f._setContent(),void 0):(f.coming=!1,void 0)},_setContent:function(){var b,c,e=f.current,g=e.type;switch(g){case"inline":case"ajax":case"html":b=e.content,"inline"===g&&b instanceof a&&(b=b.show().detach(),b.parent().hasClass("fancybox-inner")&&b.parents(".fancybox-wrap").trigger("onReset").remove(),a(f.wrap).bind("onReset",function(){b.appendTo("body").hide()})),e.autoSize&&(c=a('<div class="fancybox-tmp"></div>').appendTo("body").append(b),e.width=c.width(),e.height=c.height(),c.width(f.current.width),c.height()>e.height&&(c.width(e.width+1),e.width=c.width(),e.height=c.height()),b=c.contents().detach(),c.remove());break;case"image":b=e.tpl.image.replace("{href}",e.href),e.aspectRatio=!0;break;case"swf":b=e.tpl.swf.replace(/\{width\}/g,e.width).replace(/\{height\}/g,e.height).replace(/\{href\}/g,e.href)}if("iframe"===g){if(b=a(e.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr({scrolling:e.scrolling,src:e.href}).appendTo(f.inner),e.scrolling="auto",e.autoSize){return f.wrap.width(e.width),f.showLoading(),b.data("ready",!1).bind("load",function(){var c,b=a(this);try{this.contentWindow.document.location&&(c=b.contents().find("body").height()+12,b.height(c))}catch(d){e.autoSize=!1}b.data("ready")===!1?(f.hideLoading(),c&&(f.current.height=c),f._beforeShow(),b.data("ready",!0)):c&&f.update()}),void 0}}else{("image"===g||"swf"===g)&&(e.autoSize=!1,e.scrolling="visible"),f.inner.append(b)}f._beforeShow()},_beforeShow:function(){f.trigger("beforeShow"),f._setDimension(),f.wrap.hide().removeClass("fancybox-tmp"),f.bindEvents(),f._preload(),f.transitions[f.isOpened?f.current.nextMethod:f.current.openMethod]()},_setDimension:function(){var p,q,r,b=f.wrap,c=f.outer,d=f.inner,e=f.current,g=f.getViewport(),h=e.margin,i=2*e.padding,j=e.width,k=e.height,l=e.maxWidth,m=e.maxHeight,n=e.minWidth,o=e.minHeight;if(g.w-=h[1]+h[3],g.h-=h[0]+h[2],j.toString().indexOf("%")>-1&&(j=(g.w-i)*parseFloat(j)/100),k.toString().indexOf("%")>-1&&(k=(g.h-i)*parseFloat(k)/100),p=j/k,j+=i,k+=i,e.fitToView&&(l=Math.min(g.w,l),m=Math.min(g.h,m)),n=Math.min(j,n),o=Math.min(k,o),l=Math.max(n,l),m=Math.max(o,m),e.aspectRatio?(j>l&&(j=l,k=(j-i)/p+i),k>m&&(k=m,j=(k-i)*p+i),n>j&&(j=n,k=(j-i)/p+i),o>k&&(k=o,j=(k-i)*p+i)):(j=Math.max(n,Math.min(j,l)),k=Math.max(o,Math.min(k,m))),j=Math.round(j),k=Math.round(k),a(b.add(c).add(d)).width("auto").height("auto"),d.width(j-i).height(k-i),b.width(j),q=b.height(),j>l||q>m){for(;(j>l||q>m)&&j>n&&q>o;){k-=10,e.aspectRatio?(j=Math.round((k-i)*p+i),n>j&&(j=n,k=(j-i)/p+i)):j-=10,d.width(j-i).height(k-i),b.width(j),q=b.height()}}e.dim={width:j,height:q},e.canGrow=e.autoSize&&k>o&&m>k,e.canShrink=!1,e.canExpand=!1,j-i<e.width||k-i<e.height?e.canExpand=!0:(j>g.w||q>g.h)&&j>n&&k>o&&(e.canShrink=!0),r=q-i,f.innerSpace=r-d.height(),f.outerSpace=r-c.height()},_getPosition:function(a){var b=f.current,c=f.getViewport(),d=b.margin,e=f.wrap.width()+d[1]+d[3],g=f.wrap.height()+d[0]+d[2],h={position:"absolute",top:d[0]+c.y,left:d[3]+c.x};return b.fixed&&(!a||a[0]===!1)&&g<=c.h&&e<=c.w&&(h={position:"fixed",top:d[0],left:d[3]}),h.top=Math.ceil(Math.max(h.top,h.top+(c.h-g)*b.topRatio))+"px",h.left=Math.ceil(Math.max(h.left,h.left+0.5*(c.w-e)))+"px",h},_afterZoomIn:function(){var b=f.current,c=b.scrolling;f.isOpen=f.isOpened=!0,f.wrap.addClass("fancybox-opened").css("overflow","visible"),f.update(),f.inner.css("overflow","yes"===c?"scroll":"no"===c?"hidden":c),(b.closeClick||b.nextClick)&&f.inner.css("cursor","pointer").bind("click.fb",b.nextClick?f.next:f.close),b.closeBtn&&a(b.tpl.closeBtn).appendTo(f.wrap).bind("click.fb",f.close),b.arrows&&f.group.length>1&&((b.loop||b.index>0)&&a(b.tpl.prev).appendTo(f.wrap).bind("click.fb",f.prev),(b.loop||b.index<f.group.length-1)&&a(b.tpl.next).appendTo(f.wrap).bind("click.fb",f.next)),f.trigger("afterShow"),f.opts.autoPlay&&!f.player.isActive&&(f.opts.autoPlay=!1,f.play())},_afterZoomOut:function(){f.trigger("afterClose"),f.wrap.trigger("onReset").remove(),a.extend(f,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),f.transitions={getOrigPosition:function(){var j,b=f.current,c=b.element,d=b.padding,e=a(b.orig),g={},h=50,i=50;return !e.length&&b.isDom&&a(c).is(":visible")&&(e=a(c).find("img:first"),e.length||(e=a(c))),e.length?(g=e.offset(),e.is("img")&&(h=e.outerWidth(),i=e.outerHeight())):(j=f.getViewport(),g.top=j.y+0.5*(j.h-i),g.left=j.x+0.5*(j.w-h)),g={top:Math.ceil(g.top-d)+"px",left:Math.ceil(g.left-d)+"px",width:Math.ceil(h+2*d)+"px",height:Math.ceil(i+2*d)+"px"}},step:function(a,b){var c,d,e;("width"===b.prop||"height"===b.prop)&&(d=e=Math.ceil(a-2*f.current.padding),"height"===b.prop&&(c=(a-b.start)/(b.end-b.start),b.start>b.end&&(c=1-c),d-=f.innerSpace*c,e-=f.outerSpace*c),f.inner[b.prop](d),f.outer[b.prop](e))},zoomIn:function(){var d,e,b=f.wrap,c=f.current,g=c.dim;"elastic"===c.openEffect?(e=a.extend({},g,f._getPosition(!0)),delete e.position,d=this.getOrigPosition(),c.openOpacity&&(d.opacity=0,e.opacity=1),f.outer.add(f.inner).width("auto").height("auto"),b.css(d).show().animate(e,{duration:c.openSpeed,easing:c.openEasing,step:this.step,complete:f._afterZoomIn})):(b.css(a.extend({},g,f._getPosition())),"fade"===c.openEffect?b.fadeIn(c.openSpeed,f._afterZoomIn):(b.show(),f._afterZoomIn()))},zoomOut:function(){var c,a=f.wrap,b=f.current;"elastic"===b.closeEffect?("fixed"===a.css("position")&&a.css(f._getPosition(!0)),c=this.getOrigPosition(),b.closeOpacity&&(c.opacity=0),a.animate(c,{duration:b.closeSpeed,easing:b.closeEasing,step:this.step,complete:f._afterZoomOut})):a.fadeOut("fade"===b.closeEffect?b.closeSpeed:0,f._afterZoomOut)},changeIn:function(){var c,a=f.wrap,b=f.current;"elastic"===b.nextEffect?(c=f._getPosition(!0),c.opacity=0,c.top=parseInt(c.top,10)-200+"px",a.css(c).show().animate({opacity:1,top:"+=200px"},{duration:b.nextSpeed,complete:f._afterZoomIn})):(a.css(f._getPosition()),"fade"===b.nextEffect?a.hide().fadeIn(b.nextSpeed,f._afterZoomIn):(a.show(),f._afterZoomIn()))},changeOut:function(){var b=f.wrap,c=f.current,d=function(){a(this).trigger("onReset").remove()};b.removeClass("fancybox-opened"),"elastic"===c.prevEffect?b.animate({opacity:0,top:"+=200px"},{duration:c.prevSpeed,complete:d}):b.fadeOut("fade"===c.prevEffect?c.prevSpeed:0,d)}},f.helpers.overlay={overlay:null,update:function(){var b,f,g;this.overlay.width(0).height(0),a.browser.msie?(f=Math.max(c.documentElement.scrollWidth,c.body.scrollWidth),g=Math.max(c.documentElement.offsetWidth,c.body.offsetWidth),b=g>f?d.width():f):b=e.width(),this.overlay.width(b).height(e.height())},beforeShow:function(b){this.overlay||(b=a.extend(!0,{speedIn:"fast",closeClick:!0,opacity:1,css:{background:"black"}},b),this.overlay=a('<div id="fancybox-overlay"></div>').css(b.css).appendTo("body"),this.update(),b.closeClick&&this.overlay.bind("click.fb",f.close),d.bind("resize.fb",a.proxy(this.update,this)),this.overlay.fadeTo(b.speedIn,b.opacity))},onUpdate:function(){this.update()},afterClose:function(b){this.overlay&&this.overlay.fadeOut(b.speedOut||0,function(){a(this).remove()}),this.overlay=null}},f.helpers.title={beforeShow:function(b){var c,d=f.current.title;d&&(c=a('<div class="fancybox-title fancybox-title-'+b.type+'-wrap">'+d+"</div>").appendTo("body"),"float"===b.type&&(c.width(c.width()),c.wrapInner('<span class="child"></span>'),f.current.margin[2]+=Math.abs(parseInt(c.css("margin-bottom"),10))),c.appendTo("over"===b.type?f.inner:"outside"===b.type?f.wrap:f.outer))}},a.fn.fancybox=function(b){var g,c=a(this),d=this.selector||"",h=function(e){var h=this,i="rel",j=h[i],k=g;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault(),j||(i="data-fancybox-group",j=a(h).attr("data-fancybox-group")),j&&""!==j&&"nofollow"!==j&&(h=d.length?a(d):c,h=h.filter("["+i+'="'+j+'"]'),k=h.index(this)),b.index=k,f.open(h,b))};return b=b||{},g=b.index||0,d?e.undelegate(d,"click.fb-start").delegate(d,"click.fb-start",h):c.unbind("click.fb-start").bind("click.fb-start",h),this}}(window,document)};c(),b.resolveWith(c)};FD31.module("fancybox",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/widget").done(function(){var a=function(){!function(a){a.widget("ui.stars",{_create:function(){function e(a,d){if(-1!=a){var e=d?c.starHoverClass:c.starOnClass,g=d?c.starOnClass:c.starHoverClass;b.$stars.eq(a).prevAll("."+c.starClass).andSelf().removeClass(g).addClass(e),b.$stars.eq(a).nextAll("."+c.starClass).removeClass(c.starHoverClass+" "+c.starOnClass),b._showCap(c.id2title[a])}else{f()}}function f(){b.$stars.removeClass(c.starOnClass+" "+c.starHoverClass),b._showCap("")}var b=this,c=this.options,d=0;c.isSelect="select"==c.inputType,this.$form=a(this.element).closest("form"),this.$selec=c.isSelect?a("select",this.element):null,this.$rboxs=c.isSelect?a("option",this.$selec):a(":radio",this.element),this.$stars=this.$rboxs.map(function(e){var f={value:this.value,title:(c.isSelect?this.text:this.title)||this.value,isDefault:c.isSelect&&this.defaultSelected||this.defaultChecked};if(0==e&&(c.split="number"!=typeof c.split?0:c.split,c.val2id=[],c.id2val=[],c.id2title=[],c.name=c.isSelect?b.$selec.get(0).name:this.name,c.disabled=c.disabled||(c.isSelect?a(b.$selec).attr("disabled"):a(this).attr("disabled"))),f.value==c.cancelValue){return c.cancelTitle=f.title,null}c.val2id[f.value]=d,c.id2val[d]=f.value,c.id2title[d]=f.title,f.isDefault&&(c.checked=d,c.value=c.defaultValue=f.value,c.title=f.title);var g=a("<div/>").addClass(c.starClass),h=a("<a/>").attr("title",c.showTitles?f.title:"").text(f.value);if(c.split){var i=d%c.split,j=Math.floor(c.starWidth/c.split);g.width(j),h.css("margin-left","-"+i*j+"px")}return d++,g.append(h).get(0)}),c.items=d,c.isSelect?this.$selec.remove():this.$rboxs.remove(),this.$cancel=a("<div/>").addClass(c.cancelClass).append(a("<a/>").attr("title",c.showTitles?c.cancelTitle:"").text(c.cancelValue)),c.cancelShow&=!c.disabled&&!c.oneVoteOnly,c.cancelShow&&this.element.append(this.$cancel),this.element.append(this.$stars),void 0===c.checked&&(c.checked=-1,c.value=c.defaultValue=c.cancelValue,c.title=""),this.$value=a('<input type="hidden" name="'+c.name+'" value="'+c.value+'" />'),this.element.append(this.$value),this.$stars.bind("click.stars",function(a){if(!c.forceSelect&&c.disabled){return !1}var d=b.$stars.index(this);c.checked=d,c.value=c.id2val[d],c.title=c.id2title[d],b.$value.attr({disabled:c.disabled?"disabled":"",value:c.value}),e(d,!1),b._disableCancel(),!c.forceSelect&&b.callback(a,"star")}).bind("mouseover.stars",function(){if(c.disabled){return !1}var a=b.$stars.index(this);e(a,!0)}).bind("mouseout.stars",function(){return c.disabled?!1:(e(b.options.checked,!1),void 0)}),this.$cancel.bind("click.stars",function(a){return c.forceSelect||!c.disabled&&c.value!=c.cancelValue?(c.checked=-1,c.value=c.cancelValue,c.title="",b.$value.val(c.value).attr({disabled:"disabled"}),f(),b._disableCancel(),!c.forceSelect&&b.callback(a,"cancel"),void 0):!1}).bind("mouseover.stars",function(){return b._disableCancel()?!1:(b.$cancel.addClass(c.cancelHoverClass),f(),b._showCap(c.cancelTitle),void 0)}).bind("mouseout.stars",function(){return b._disableCancel()?!1:(b.$cancel.removeClass(c.cancelHoverClass),b.$stars.triggerHandler("mouseout.stars"),void 0)}),this.$form.bind("reset.stars",function(){!c.disabled&&b.select(c.defaultValue)}),a(window).unload(function(){b.$cancel.unbind(".stars"),b.$stars.unbind(".stars"),b.$form.unbind(".stars"),b.$selec=b.$rboxs=b.$stars=b.$value=b.$cancel=b.$form=null}),this.select(c.value),c.disabled&&this.disable()},_disableCancel:function(){var a=this.options,b=a.disabled||a.oneVoteOnly||a.value==a.cancelValue;return b?this.$cancel.removeClass(a.cancelHoverClass).addClass(a.cancelDisabledClass):this.$cancel.removeClass(a.cancelDisabledClass),this.$cancel.css("opacity",b?0.5:1),b},_disableAll:function(){var a=this.options;this._disableCancel(),a.disabled?this.$stars.filter("div").addClass(a.starDisabledClass):this.$stars.filter("div").removeClass(a.starDisabledClass)},_showCap:function(a){var b=this.options;b.captionEl&&b.captionEl.text(a)},value:function(){return this.options.value},select:function(a){var b=this.options,c=a==b.cancelValue?this.$cancel:this.$stars.eq(b.val2id[a]);b.forceSelect=!0,c.triggerHandler("click.stars"),b.forceSelect=!1},selectID:function(a){var b=this.options,c=-1==a?this.$cancel:this.$stars.eq(a);b.forceSelect=!0,c.triggerHandler("click.stars"),b.forceSelect=!1},enable:function(){this.options.disabled=!1,this._disableAll()},disable:function(){this.options.disabled=!0,this._disableAll()},destroy:function(){this.options.isSelect?this.$selec.appendTo(this.element):this.$rboxs.appendTo(this.element),this.$form.unbind(".stars"),this.$cancel.unbind(".stars").remove(),this.$stars.unbind(".stars").remove(),this.$value.remove(),this.element.unbind(".stars").removeData("stars")},callback:function(a,b){var c=this.options;c.callback&&c.callback(this,b,c.value,a),c.oneVoteOnly&&!c.disabled&&this.disable()}}),a.extend(a.ui.stars.prototype,{version:"2.1.1",options:{inputType:"radio",split:0,disabled:!1,cancelTitle:"Cancel Rating",cancelValue:0,cancelShow:!0,oneVoteOnly:!1,showTitles:!1,captionEl:null,callback:null,starWidth:16,cancelClass:"ui-stars-cancel",starClass:"ui-stars-star",starOnClass:"ui-stars-star-on",starHoverClass:"ui-stars-star-hover",starDisabledClass:"ui-stars-star-disabled",cancelHoverClass:"ui-stars-cancel-hover",cancelDisabledClass:"ui-stars-cancel-disabled"}})}(c)};a(),b.resolveWith(a)})};FD31.module("ui/stars",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,b.href&&e&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var c=0,d=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b){return this.css("zIndex",c)}if(this.length){for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f)){return f}d=d.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return !!a.data(c,b)}}):function(b,c,d){return !!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart" in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d){f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])}},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType){for(d=0;d<e.length;d++){a.options[e[d][0]]&&e[d][1].apply(a.element,c)}}}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow")){return !1}var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}),a(function(){a("body > #fd_.ui").length>0||a(document.createElement("div")).attr("id","fd_").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0}).appendTo("body")})}(c)};d(),b.resolveWith(d)};FD31.module("ui/core",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++){try{a(d).triggerHandler("remove")}catch(f){}}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return !!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++){for(h in e[f]){i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i)}}return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length){return a.widget.extend({},this.options)}if("string"==typeof c){if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++){g[f[h]]=g[f[h]]||{},g=g[f[h]]}if(c=f.pop(),d===b){return g[c]===b?null:g[c]}g[c]=d}else{if(d===b){return this.options[c]===b?null:this.options[c]}e[c]=d}}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a){this._setOption(b,a[b])}return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent){for(e in f){e in c||(c[e]=f[e])}}return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(c)};d(),b.resolveWith(d)};FD31.module("ui/widget",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/widget","ui/position","ui/menu").done(function(){var a=function(){!function(a){var c=0;a.widget("ui.autocomplete",{version:"1.10.4pre",defaultElement:"<input>",options:{appendTo:"#fd_.ui",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly")){return b=!0,d=!0,c=!0,void 0}b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b){return b=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault(),void 0}if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){return this.menu.blur(),this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),void 0}var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(c),function(a){function d(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(b){return d.test(a("<div>").html(b.label||b.value||b).text())})}var b=a.ui.autocomplete.prototype,c=b._initSource;a.extend(b,{_initSource:function(){this.options.html&&a.isArray(this.options.source)?this.source=function(a,b){b(d(this.options.source,a.term))}:c.call(this)},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>")[this.options.html?"html":"text"](c.label)).appendTo(b)}})}(c)};a(),b.resolveWith(a)})};FD31.module("ui/autocomplete",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/widget").done(function(){var a=function(){!function(a){a.widget("ui.menu",{version:"1.10.4pre",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function i(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c,d,e,f,g,h=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:h=!1,d=this.previousFilter||"",e=String.fromCharCode(b.keyCode),f=!1,clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,g=new RegExp("^"+i(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())}),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),g=new RegExp("^"+i(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())})),c.length?(this.focus(b,c),c.length>1?(this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter):delete this.previousFilter}h&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(b),void 0)},previousPage:function(b){var c,d,e;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(b),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(c)};a(),b.resolveWith(a)})};FD31.module("ui/menu",a)}()}),FD31.installer("Komento","definitions",function(b){b.module(["komento/admin.comment.actions","komento/komento.common","komento/komento.language","komento/syntaxhighlighter","komento/admin.language","komento/admin.database","komento/admin.integrations.customsmileys","komento/admin.report.actions","komento/dashboard.comment.item","komento/dashboard.flag.item","komento/komento.admincomments","komento/komento.bbcode","komento/komento.commentform","komento/komento.commentitem","komento/komento.commentlist","komento/sharelinks","komento/markitup","komento/komento.commenttools","komento/komento.famelist","komento/komento.insertvideo","komento/komento","komento/komento.profile","komento/komento.ratings","komento/komento.upload","komento/location","komento/migrator.actions","komento/migrator.common","komento/migrator.custom","komento/migrator.progress"]),b.require.template.loader(["komento/dialogs/error","komento/dialogs/delete.affectchild","komento/comment/edit.form","komento/dialogs/unpublish.affectchild","komento/dialogs/delete.single","komento/comment/item/edit.form","komento/dialogs/delete.attachment","komento/notifications/new.comment","komento/comment/form/uploadrow"]),b.require.language.loader(["COM_KOMENTO_ERROR","COM_KOMENTO_LOADING","COM_KOMENTO_UNPUBLISHED","COM_KOMENTO_PUBLISHED","COM_KOMENTO_NOFLAG","COM_KOMENTO_SPAM","COM_KOMENTO_OFFENSIVE","COM_KOMENTO_OFFTOPIC","COM_KOMENTO_COMMENTS_LOADING","COM_KOMENTO_COMMENT_EDIT","COM_KOMENTO_COMMENT_EDIT_CANCEL","COM_KOMENTO_COMMENT_EDITTED_BY","COM_KOMENTO_COMMENT_REPLY","COM_KOMENTO_COMMENT_REPLY_CANCEL","COM_KOMENTO_COMMENT_REPORT","COM_KOMENTO_COMMENT_REPORTED","COM_KOMENTO_COMMENT_SHARE","COM_KOMENTO_COMMENT_SHARE_CANCEL","COM_KOMENTO_COMMENT_LIKE","COM_KOMENTO_COMMENT_UNLIKE","COM_KOMENTO_COMMENT_STICK","COM_KOMENTO_COMMENT_UNSTICK","COM_KOMENTO_COMMENT_WHERE_ARE_YOU","COM_KOMENTO_COMMENT_PEOPLE_WHO_LIKED_THIS","COM_KOMENTO_FORM_LEAVE_YOUR_COMMENTS","COM_KOMENTO_FORM_IN_REPLY_TO","COM_KOMENTO_FORM_SUBMIT","COM_KOMENTO_FORM_REPLY","COM_KOMENTO_FORM_NOTIFICATION_SUBMITTED","COM_KOMENTO_FORM_NOTIFICATION_PENDING","COM_KOMENTO_FORM_NOTIFICATION_COMMENT_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_COMMENT_TOO_SHORT","COM_KOMENTO_FORM_TNC","COM_KOMENTO_FORM_AGREE_TNC","COM_KOMENTO_FORM_OR_DROP_FILES_HERE","COM_KOMENTO_FORM_NOTIFICATION_NOTIFICATION_USERNAME_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_NAME_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_EMAIL_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_EMAIL_INVALID","COM_KOMENTO_FORM_NOTIFICATION_WEBSITE_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_WEBSITE_INVALID","COM_KOMENTO_FORM_NOTIFICATION_TNC_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_CAPTCHA_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBED","COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBE_CONFIRMATION_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBE_ERROR","COM_KOMENTO_FORM_NOTIFICATION_UNSUBSCRIBED","COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_SIZE","COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_ITEM","COM_KOMENTO_FORM_NOTIFICATION_FILE_EXTENSION","COM_KOMENTO_FORM_NOTIFICATION_UPLOAD_NOT_ALLOWED","COM_KOMENTO_FORM_LOCATION_AUTODETECT","COM_KOMENTO_FORM_LOCATION_DETECTING","COM_KOMENTO_BBCODE_BOLD","COM_KOMENTO_BBCODE_ITALIC","COM_KOMENTO_BBCODE_UNDERLINE","COM_KOMENTO_BBCODE_LINK","COM_KOMENTO_BBCODE_LINK_TEXT","COM_KOMENTO_BBCODE_PICTURE","COM_KOMENTO_BBCODE_VIDEO","COM_KOMENTO_BBCODE_BULLETLIST","COM_KOMENTO_BBCODE_NUMERICLIST","COM_KOMENTO_BBCODE_BULLET","COM_KOMENTO_BBCODE_QUOTE","COM_KOMENTO_BBCODE_CLEAN","COM_KOMENTO_BBCODE_SMILE","COM_KOMENTO_BBCODE_HAPPY","COM_KOMENTO_BBCODE_SURPRISED","COM_KOMENTO_BBCODE_TONGUE","COM_KOMENTO_BBCODE_UNHAPPY","COM_KOMENTO_BBCODE_WINK","COM_KOMENTO_INSERT_VIDEO","COM_KOMENTO_CONFIRM_DELETE_AFFECT_ALL_CHILD","COM_KOMENTO_CONFIRM_DELETE","COM_KOMENTO_DELETE_COMMENT","COM_KOMENTO_DELETE_ALL_CHILD","COM_KOMENTO_DELETE_MOVE_CHILD_UP","COM_KOMENTO_DELETING","COM_KOMENTO_CONFIRM_PUBLISH_AFFECT_ALL_CHILD","COM_KOMENTO_PUBLISH_ALL_CHILD","COM_KOMENTO_PUBLISH_SINGLE","COM_KOMENTO_CHILD_UNPUBLISHED","COM_KOMENTO_PARENT_PUBLISHED","COM_KOMENTO_MIGRATORS_LOG_COMPLETE","COM_KOMENTO_MIGRATORS_PROGRESS_DONE","COM_KOMENTO_YES_OPTION","COM_KOMENTO_NO_OPTION","COM_KOMENTO_ACL_RECOMMENDED","COM_KOMENTO_PUBLISH_ITEM","COM_KOMENTO_UNPUBLISH_ITEM","COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_UPDATING","COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_COMPLETED","COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_ERROR","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_UPDATING_STAGE1","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_UPDATING_STAGE2","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_ERROR","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_COMPLETED"])}),FD31.installer("Komento","scripts",function($){Komento.module("admin.comment.actions",function(a){var b=this;Komento.require().library("dialog").script("komento.common","admin.language").done(function(){var c={};"1.5"==Komento.options.jversion?(c.published="images/tick.png",c.unpublished="images/publish_x.png"):(c.published="templates/bluestork/images/admin/tick.png",c.unpublished="templates/bluestork/images/admin/publish_x.png"),Komento.actions={loadReplies:function(b){var c=a(".kmt-row").length;Komento.ajax("admin.views.comments.loadreplies",{parentId:b,startCount:c},{success:function(c){a("#kmt-"+b).after(c).find(".linked-cell").text("-"),a(".kmt-row").each(function(a,b){var c=a%2;b.removeClass("row1","row0").addClass("row"+c)}),Komento.options.jversion<"3.0"&&a("#toggle").attr("onClick","checkAll("+a(".kmt-row").length+");")}})},submit:function(b,c){0!=a(".foundryDialog").length&&a(".foundryDialog").controller().close(),Komento.actions.affectchild=c;var d=new Array,e=new Array;a('input[type="checkbox"]:checked').each(function(c,f){if(""!=f.value){d.push(f.value),e.push(a("#kmt-"+f.value));var g;g="unstick"==b||"stick"==b?"sticked":"published",a("#kmt-"+f.value).find("."+g+"-cell a img").attr("src",Komento.options.spinner)}}),Komento.ajax("admin.views.comments."+b,{ids:d,affectchild:c},{success:function(){var c=[],d=[];a.each(e,function(a,e){Komento.actions[b](e),e.attr("childs")>0&&c.push(1),0!=e.attr("parentid")&&d.push(1)}),("publish"==b&&d.length>0||"publish"!=b&&c.length>0)&&Komento.actions[b+"Dialog"]()},fail:function(){}})},publish:function(b){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish").replace("publish","unpublish");b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_UNPUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.published):b.find(".published-cell i").removeClass("icon-unpublish").addClass("icon-publish"),Komento.actions.publishParent(b),Komento.actions.publishChild(b)},publishParent:function(b){if(b.exists()){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish").replace("publish","unpublish");b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_UNPUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.published):b.find(".published-cell i").removeClass("icon-unpublish").addClass("icon-publish"),0!=b.attr("parentid")&&Komento.actions.publishParent(a("#kmt-"+b.attr("parentid")))}},publishChild:function(b){if(b.exists()){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish").replace("publish","unpublish");if(b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_UNPUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.published):b.find(".published-cell i").removeClass("icon-unpublish").addClass("icon-publish"),1==Komento.actions.affectchild&b.attr("childs")>0){var e=b.attr("id").split("-")[1];Komento.actions.publishChild(a('.kmt-row[parentid="'+e+'"]'))}}},publishDialog:function(){a.dialog("<p>"+a.language("COM_KOMENTO_PARENT_PUBLISHED")+"</p>")},publishParentDialog:function(){a.dialog("<p>"+a.language("COM_KOMENTO_PARENT_PUBLISHED")+"</p>")},unpublish:function(b){if(b.exists()){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish");if(b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_PUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.unpublished):b.find(".published-cell i").removeClass("icon-publish").addClass("icon-unpublish"),b.attr("childs")>0){var e=b.attr("id").split("-")[1];Komento.actions.unpublish(a('.kmt-row[parentid="'+e+'"]'))}}},unpublishDialog:function(){a.dialog("<p>"+a.language("COM_KOMENTO_CHILD_UNPUBLISHED")+"</p>")},stick:function(a){var b=a.find(".sticked-cell a").attr("onclick").replace("stick","unstick");a.find(".sticked-cell a").attr("onclick",b),Komento.options.jversion<"3.0"?a.find(".sticked-cell a img").attr("src","components/com_komento/assets/images/sticked.png"):a.find(".sticked-cell i").removeClass("icon-star-empty").addClass("icon-star")},stickDialog:function(){},unstick:function(a){var b=a.find(".sticked-cell a").attr("onclick").replace("unstick","stick");a.find(".sticked-cell a").attr("onclick",b),Komento.options.jversion<"3.0"?a.find(".sticked-cell a img").attr("src","components/com_komento/assets/images/unsticked.png"):a.find(".sticked-cell i").removeClass("icon-star").addClass("icon-star-empty")},unstickDialog:function(){}},Komento.prepare={checkChild:function(){var b=[];return a('input[type="checkbox"]:checked').each(function(c,d){""!=d.value&&a("#kmt-"+d.value).attr("childs")>0&&b.push(1)}),b.length>0?!0:!1},remove:function(){var b,c;Komento.prepare.checkChild()?(b=a.language("COM_KOMENTO_CONFIRM_DELETE_AFFECT_ALL_CHILD"),c='<button onclick="Komento.prepare.removeall()">'+a.language("COM_KOMENTO_DELETE_ALL_CHILD")+"</button>",c+='<button onclick="Komento.prepare.removesingle()">'+a.language("COM_KOMENTO_DELETE_MOVE_CHILD_UP")+"</button>"):(b=a.language("COM_KOMENTO_CONFIRM_DELETE"),c='<button onclick="Komento.prepare.removeall()">'+a.language("COM_KOMENTO_DELETE_COMMENT")+"</button>");var d='<div style="text-align: center;"><p>'+b+"</p>"+c+"</div>";a.dialog(d)},removeall:function(){prepareSubmit("remove",1)},removesingle:function(){prepareSubmit("remove",0)},publish:function(){if(Komento.prepare.checkChild()){var b=a.language("COM_KOMENTO_CONFIRM_PUBLISH_AFFECT_ALL_CHILD"),c='<button onclick="Komento.prepare.publishall()">'+a.language("COM_KOMENTO_PUBLISH_ALL_CHILD")+"</button>";c+='<button onclick="Komento.prepare.publishsingle()">'+a.language("COM_KOMENTO_PUBLISH_SINGLE")+"</button>";var d='<div style="text-align: center;"><p>'+b+"</p>"+c+"</div>";a.dialog(d)}else{Komento.actions.submit("publish",1)}},publishall:function(){Komento.actions.submit("publish",1)},publishsingle:function(){Komento.actions.submit("publish",0)},unpublish:function(){Komento.actions.submit("unpublish",1)},stick:function(){Komento.actions.submit("stick",1)},unstick:function(){Komento.actions.submit("unstick",1)},saveColumns:function(){submitform("saveColumns")}},window.submitbutton=function(a){Komento.prepare[a]()},window.prepareSubmit=function(b,c){0!=a(".foundryDialog").length&&a(".foundryDialog").controller().close(),document.adminForm.affectchild.value=c,submitform(b)},window.listItemTask=function(a,b){var c=document.adminForm,d=c[a];if(d){for(var e=0;!0;e++){var f=c["cb"+e];if(!f){break}f.checked=!1}d.checked=!0,c.boxchecked.value=1,submitbutton(b)}return !1},b.resolve()})}),Komento.module("komento.common",function(a){var b=this;Komento.require().library("ui/effect","scrollTo").script("komento.language").done(function(){var c=a.fn.hide,d=a.fn.show,e=function(b){a.scrollTo(b,500)};a.fn.hide=function(){return c.apply(this,arguments),this.addClass("hidden"),this},a.fn.show=function(){return d.apply(this,arguments),this.removeClass("hidden"),this},a.fn.scroll=function(){e(this)},a.fn.highlight=function(){return this.effect("highlight",{color:"#FDFFE0"},2000),this},a.fn.enable=function(){return this.removeClass("disabled"),this},a.fn.disable=function(){return this.addClass("disabled"),this},a.fn.switchOn=function(){return this.removeClass("cancel"),this},a.fn.switchOff=function(){return this.addClass("cancel"),this},a.fn.checkSwitch=function(){return this.hasClass("cancel")?!1:!0},a.fn.checkClick=function(){return this.hasClass("disabled")?!1:(this.addClass("disabled"),!0)},a.fn.clearClick=function(){return this.removeClass("disabled"),this},a.fn.loading=function(){return this.addClass("loading"),this},a.fn.doneLoading=function(){return this.removeClass("loading"),this},a.fn.exists=function(){return this.length>0?!0:!1},a.fn.acl=function(a,b,c){Komento.ajax("site.views.komento.checkAcl",{component:a,rule:b},{success:function(){return c&&c()}})},a.fn.permission=function(a,b,c){Komento.ajax("site.views.komento.checkPermission",{id:a,action:b},{success:function(){return c&&c()}})},a.shortenlink=function(a,b){Komento.ajax("site.views.komento.shortenLink",{url:a},{success:function(a){return Komento.shortenLink=a,b&&b(a)}})},a.stripHtml=function(b){return a("<div>"+b+"</div>").text()},a.bugReport=function(b){Komento.require().library("dialog").view("dialogs/error").done(function(){a.dialog({title:a.language("COM_KOMENTO_ERROR"),width:500,customClass:"kmt-dialog",content:Komento.View("dialogs/error",{status:b.status,statusText:b.statusText,responseText:a.stripHtml(b.responseText)})})})},a.loadSHBrushes=function(){Komento.require().script("syntaxhighlighter").done(function(){a(".kmt-item pre code").each(function(a,b){hljs.highlightBlock(b)})})},b.resolve()})}),Komento.module("komento.language",function(){var b=this;Komento.require().language("COM_KOMENTO_ERROR","COM_KOMENTO_LOADING","COM_KOMENTO_UNPUBLISHED","COM_KOMENTO_PUBLISHED","COM_KOMENTO_NOFLAG","COM_KOMENTO_SPAM","COM_KOMENTO_OFFENSIVE","COM_KOMENTO_OFFTOPIC","COM_KOMENTO_COMMENTS_LOADING","COM_KOMENTO_COMMENT_EDIT","COM_KOMENTO_COMMENT_EDIT_CANCEL","COM_KOMENTO_COMMENT_EDITTED_BY","COM_KOMENTO_COMMENT_REPLY","COM_KOMENTO_COMMENT_REPLY_CANCEL","COM_KOMENTO_COMMENT_REPORT","COM_KOMENTO_COMMENT_REPORTED","COM_KOMENTO_COMMENT_SHARE","COM_KOMENTO_COMMENT_SHARE_CANCEL","COM_KOMENTO_COMMENT_LIKE","COM_KOMENTO_COMMENT_UNLIKE","COM_KOMENTO_COMMENT_STICK","COM_KOMENTO_COMMENT_UNSTICK","COM_KOMENTO_COMMENT_WHERE_ARE_YOU","COM_KOMENTO_COMMENT_PEOPLE_WHO_LIKED_THIS","COM_KOMENTO_FORM_LEAVE_YOUR_COMMENTS","COM_KOMENTO_FORM_IN_REPLY_TO","COM_KOMENTO_FORM_SUBMIT","COM_KOMENTO_FORM_REPLY","COM_KOMENTO_FORM_NOTIFICATION_SUBMITTED","COM_KOMENTO_FORM_NOTIFICATION_PENDING","COM_KOMENTO_FORM_NOTIFICATION_COMMENT_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_COMMENT_TOO_SHORT","COM_KOMENTO_FORM_TNC","COM_KOMENTO_FORM_AGREE_TNC","COM_KOMENTO_FORM_OR_DROP_FILES_HERE","COM_KOMENTO_FORM_NOTIFICATION_NOTIFICATION_USERNAME_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_NAME_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_EMAIL_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_EMAIL_INVALID","COM_KOMENTO_FORM_NOTIFICATION_WEBSITE_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_WEBSITE_INVALID","COM_KOMENTO_FORM_NOTIFICATION_TNC_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_CAPTCHA_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBED","COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBE_CONFIRMATION_REQUIRED","COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBE_ERROR","COM_KOMENTO_FORM_NOTIFICATION_UNSUBSCRIBED","COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_SIZE","COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_ITEM","COM_KOMENTO_FORM_NOTIFICATION_FILE_EXTENSION","COM_KOMENTO_FORM_NOTIFICATION_UPLOAD_NOT_ALLOWED","COM_KOMENTO_FORM_LOCATION_AUTODETECT","COM_KOMENTO_FORM_LOCATION_DETECTING","COM_KOMENTO_BBCODE_BOLD","COM_KOMENTO_BBCODE_ITALIC","COM_KOMENTO_BBCODE_UNDERLINE","COM_KOMENTO_BBCODE_LINK","COM_KOMENTO_BBCODE_LINK_TEXT","COM_KOMENTO_BBCODE_PICTURE","COM_KOMENTO_BBCODE_VIDEO","COM_KOMENTO_BBCODE_BULLETLIST","COM_KOMENTO_BBCODE_NUMERICLIST","COM_KOMENTO_BBCODE_BULLET","COM_KOMENTO_BBCODE_QUOTE","COM_KOMENTO_BBCODE_CLEAN","COM_KOMENTO_BBCODE_SMILE","COM_KOMENTO_BBCODE_HAPPY","COM_KOMENTO_BBCODE_SURPRISED","COM_KOMENTO_BBCODE_TONGUE","COM_KOMENTO_BBCODE_UNHAPPY","COM_KOMENTO_BBCODE_WINK","COM_KOMENTO_INSERT_VIDEO").done(function(){b.resolve()})}),Komento.module("syntaxhighlighter",function(){var b=this,c=new function(){function a(a){return a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function b(a,b,c){return RegExp(b,"m"+(a.cI?"i":"")+(c?"g":""))}function d(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if("CODE"==c.nodeName){return c}if(3!=c.nodeType||!c.nodeValue.match(/\s+/)){break}}}function e(a,b){for(var c="",d=0;d<a.childNodes.length;d++){if(3==a.childNodes[d].nodeType){var f=a.childNodes[d].nodeValue;b&&(f=f.replace(/\n/g,"")),c+=f}else{c+="BR"==a.childNodes[d].nodeName?"\n":e(a.childNodes[d])}}return/MSIE [678]/.test(navigator.userAgent)&&(c=c.replace(/\r/g,"\n")),c}function f(a){var b=a.className.split(/\s+/);b=b.concat(a.parentNode.className.split(/\s+/));for(var c=0;c<b.length;c++){var d=b[c].replace(/^language-/,"");if(p[d]||"no-highlight"==d){return d}}}function g(a){var b=[];return function c(a,d){for(var e=0;e<a.childNodes.length;e++){3==a.childNodes[e].nodeType?d+=a.childNodes[e].nodeValue.length:"BR"==a.childNodes[e].nodeName?d+=1:1==a.childNodes[e].nodeType&&(b.push({event:"start",offset:d,node:a.childNodes[e]}),d=c(a.childNodes[e],d),b.push({event:"stop",offset:d,node:a.childNodes[e]}))}return d}(a,0),b}function h(b,c,d){function h(){return b.length&&c.length?b[0].offset!=c[0].offset?b[0].offset<c[0].offset?b:c:"start"==c[0].event?b:c:b.length?b:c}function i(b){for(var c="<"+b.nodeName.toLowerCase(),d=0;d<b.attributes.length;d++){var e=b.attributes[d];c+=" "+e.nodeName.toLowerCase(),void 0!==e.value&&e.value!==!1&&null!==e.value&&(c+='="'+a(e.value)+'"')}return c+">"}for(var e=0,f="",g=[];b.length||c.length;){var j=h().splice(0,1)[0];if(f+=a(d.substr(e,j.offset-e)),e=j.offset,"start"==j.event){f+=i(j.node),g.push(j.node)}else{if("stop"==j.event){var k,l=g.length;do{l--,k=g[l],f+="</"+k.nodeName.toLowerCase()+">"}while(k!=j.node);for(g.splice(l,1);l<g.length;){f+=i(g[l]),l++}}}}return f+a(d.substr(e))}function i(){function a(d,e,f){function i(a,b){for(var c=b.split(" "),d=0;d<c.length;d++){var e=c[d].split("|");h[e[0]]=[a,e[1]?Number(e[1]):1],g.push(e[0])}}if(!d.compiled){var g=[];if(d.k){var h={};if(d.lR=b(e,d.l||c.IR,!0),"string"==typeof d.k){i("keyword",d.k)}else{for(var j in d.k){d.k.hasOwnProperty(j)&&i(j,d.k[j])}}d.k=h}f||(d.bWK&&(d.b="\\b("+g.join("|")+")\\s"),d.bR=b(e,d.b?d.b:"\\B|\\b"),d.e||d.eW||(d.e="\\B|\\b"),d.e&&(d.eR=b(e,d.e))),d.i&&(d.iR=b(e,d.i)),void 0===d.r&&(d.r=1),d.c||(d.c=[]),d.compiled=!0;for(var k=0;k<d.c.length;k++){"self"==d.c[k]&&(d.c[k]=d),a(d.c[k],e,!1)}d.starts&&a(d.starts,e,!1)}}for(var d in p){p.hasOwnProperty(d)&&a(p[d].dM,p[d],!0)}}function j(c,d){function e(a,b){for(var c=0;c<b.c.length;c++){var d=b.c[c].bR.exec(a);if(d&&0==d.index){return b.c[c]}}}function f(a,b){if(u[a].e&&u[a].eR.test(b)){return 1}if(u[a].eW){var c=f(a-1,b);return c?c+1:0}return 0}function g(a,b){return b.i&&b.iR.test(a)}function h(a,c){for(var d=[],e=0;e<a.c.length;e++){d.push(a.c[e].b)}var f=u.length-1;do{u[f].e&&d.push(u[f].e),f--}while(u[f+1].eW);return a.i&&d.push(a.i),d.length?b(c,d.join("|"),!0):null}function l(a,b){var c=u[u.length-1];void 0===c.t&&(c.t=h(c,t));var d;return c.t&&(c.t.lastIndex=b,d=c.t.exec(a)),d?[a.substr(b,d.index-b),d[0],!1]:[a.substr(b),"",!0]}function m(a,b){var c=t.cI?b[0].toLowerCase():b[0],d=a.k[c];return d&&d instanceof Array?d:!1}function n(b,c){if(b=a(b),!c.k){return b}var d="",e=0;c.lR.lastIndex=0;for(var f=c.lR.exec(b);f;){d+=b.substr(e,f.index-e);var g=m(c,f);g?(w+=g[1],d+='<span class="'+g[0]+'">'+f[0]+"</span>"):d+=f[0],e=c.lR.lastIndex,f=c.lR.exec(b)}return d+b.substr(e)}function o(a,b){var c;return c=""==b.sL?k(a):j(b.sL,a),b.r>0&&(w+=c.keyword_count,v+=c.r),'<span class="'+c.language+'">'+c.value+"</span>"}function q(a,b){return b.sL&&p[b.sL]||""==b.sL?o(a,b):n(a,b)}function r(b,c){var d=b.cN?'<span class="'+b.cN+'">':"";b.rB?(x+=d,b.buffer=""):b.eB?(x+=a(c)+d,b.buffer=""):(x+=d,b.buffer=c),u.push(b),v+=b.r}function s(b,c,d){var h=u[u.length-1];if(d){return x+=q(h.buffer+b,h),!1}var i=e(c,h);if(i){return x+=q(h.buffer+b,h),r(i,c),i.rB}var j=f(u.length-1,c);if(j){var k=h.cN?"</span>":"";for(x+=h.rE?q(h.buffer+b,h)+k:h.eE?q(h.buffer+b,h)+k+a(c):q(h.buffer+b+c,h)+k;j>1;){k=u[u.length-2].cN?"</span>":"",x+=k,j--,u.length--}var l=u[u.length-1];return u.length--,u[u.length-1].buffer="",l.starts&&r(l.starts,""),h.rE}if(g(c,h)){throw"Illegal"}}i.called||(i(),i.called=!0);var t=p[c],u=[t.dM],v=0,w=0,x="";try{var y,z=0;t.dM.buffer="";do{y=l(d,z);var A=s(y[0],y[1],y[2]);z+=y[0].length,A||(z+=y[1].length)}while(!y[2]);return{r:v,keyword_count:w,value:x,language:c}}catch(B){if("Illegal"==B){return{r:0,keyword_count:0,value:a(d)}}throw B}}function k(b){var c={keyword_count:0,r:0,value:a(b)},d=c;for(var e in p){if(p.hasOwnProperty(e)){var f=j(e,b);f.language=e,f.keyword_count+f.r>d.keyword_count+d.r&&(d=f),f.keyword_count+f.r>c.keyword_count+c.r&&(d=c,c=f)}}return d.language&&(c.second_best=d),c}function l(a,b,c){return b&&(a=a.replace(/^((<[^>]+>|\t)+)/gm,function(a,c){return c.replace(/\t/g,b)})),c&&(a=a.replace(/\n/g,"<br>")),a}function m(a,b,c){var m,n,d=e(a,c),i=f(a);if("no-highlight"!=i){i?m=j(i,d):(m=k(d),i=m.language);var o=g(a);o.length&&(n=document.createElement("pre"),n.innerHTML=m.value,m.value=h(o,g(n),d)),m.value=l(m.value,b,c);var p=a.className;if(p.match("(\\s|^)(language-)?"+i+"(\\s|$)")||(p=p?p+" "+i:i),/MSIE [678]/.test(navigator.userAgent)&&"CODE"==a.tagName&&"PRE"==a.parentNode.tagName){n=a.parentNode;var q=document.createElement("div");q.innerHTML="<pre><code>"+m.value+"</code></pre>",a=q.firstChild.firstChild,q.firstChild.cN=n.cN,n.parentNode.replaceChild(q.firstChild,n)}else{a.innerHTML=m.value}a.className=p,a.result={language:i,kw:m.keyword_count,re:m.r},m.second_best&&(a.second_best={language:m.second_best.language,kw:m.second_best.keyword_count,re:m.second_best.r})}}function n(){if(!n.called){n.called=!0;for(var a=document.getElementsByTagName("pre"),b=0;b<a.length;b++){var e=d(a[b]);e&&m(e,c.tabReplace)}}}function o(){window.addEventListener?(window.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):window.attachEvent?window.attachEvent("onload",n):window.onload=n}var p={};this.LANGUAGES=p,this.highlight=j,this.highlightAuto=k,this.fixMarkup=l,this.highlightBlock=m,this.initHighlighting=n,this.initHighlightingOnLoad=o,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\.",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.inherit=function(a,b){var c={};for(var d in a){c[d]=a[d]}if(b){for(var d in b){c[d]=b[d]}}return c}};c.LANGUAGES.bash=function(a){var b="true false",c={cN:"variable",b:"\\$([a-zA-Z0-9_]+)\\b"},d={cN:"variable",b:"\\$\\{(([^}])|(\\\\}))+\\}",c:[a.CNM]},e={cN:"string",b:'"',e:'"',i:"\\n",c:[a.BE,c,d],r:0},f={cN:"string",b:"'",e:"'",c:[{b:"''"}],r:0},g={cN:"test_condition",b:"",e:"",c:[e,f,c,d,a.CNM],k:{literal:b},r:0};return{dM:{k:{keyword:"if then else fi for break continue while in do done echo exit return set declare",literal:b},c:[{cN:"shebang",b:"(#!\\/bin\\/bash)|(#!\\/bin\\/sh)",r:10},c,d,a.HCM,a.CNM,e,f,a.inherit(g,{b:"\\[ ",e:" \\]",r:0}),a.inherit(g,{b:"\\[\\[ ",e:" \\]\\]"})]}}}(c),c.LANGUAGES.cs=function(a){return{dM:{k:"abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while ascending descending from get group into join let orderby partial select set value var where yield",c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},a.CLCM,a.CBLCLM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},a.ASM,a.QSM,a.CNM]}}}(c),c.LANGUAGES.ruby=function(a){var b="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?",c="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",d={keyword:"and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or def",keymethods:"__id__ __send__ abort abs all? allocate ancestors any? arity assoc at at_exit autoload autoload? between? binding binmode block_given? call callcc caller capitalize capitalize! casecmp catch ceil center chomp chomp! chop chop! chr class class_eval class_variable_defined? class_variables clear clone close close_read close_write closed? coerce collect collect! compact compact! concat const_defined? const_get const_missing const_set constants count crypt default default_proc delete delete! delete_at delete_if detect display div divmod downcase downcase! downto dump dup each each_byte each_index each_key each_line each_pair each_value each_with_index empty? entries eof eof? eql? equal? eval exec exit exit! extend fail fcntl fetch fileno fill find find_all first flatten flatten! floor flush for_fd foreach fork format freeze frozen? fsync getc gets global_variables grep gsub gsub! has_key? has_value? hash hex id include include? included_modules index indexes indices induced_from inject insert inspect instance_eval instance_method instance_methods instance_of? instance_variable_defined? instance_variable_get instance_variable_set instance_variables integer? intern invert ioctl is_a? isatty iterator? join key? keys kind_of? lambda last length lineno ljust load local_variables loop lstrip lstrip! map map! match max member? merge merge! method method_defined? method_missing methods min module_eval modulo name nesting new next next! nil? nitems nonzero? object_id oct open pack partition pid pipe pop popen pos prec prec_f prec_i print printf private_class_method private_instance_methods private_method_defined? private_methods proc protected_instance_methods protected_method_defined? protected_methods public_class_method public_instance_methods public_method_defined? public_methods push putc puts quo raise rand rassoc read read_nonblock readchar readline readlines readpartial rehash reject reject! remainder reopen replace require respond_to? reverse reverse! reverse_each rewind rindex rjust round rstrip rstrip! scan seek select send set_trace_func shift singleton_method_added singleton_methods size sleep slice slice! sort sort! sort_by split sprintf squeeze squeeze! srand stat step store strip strip! sub sub! succ succ! sum superclass swapcase swapcase! sync syscall sysopen sysread sysseek system syswrite taint tainted? tell test throw times to_a to_ary to_f to_hash to_i to_int to_io to_proc to_s to_str to_sym tr tr! tr_s tr_s! trace_var transpose trap truncate tty? type ungetc uniq uniq! unpack unshift untaint untrace_var upcase upcase! update upto value? values values_at warn write write_nonblock zero? zip"},e={cN:"yardoctag",b:"@[A-Za-z]+"},f=[{cN:"comment",b:"#",e:"$",c:[e]},{cN:"comment",b:"^\\=begin",e:"^\\=end",c:[e],r:10},{cN:"comment",b:"^__END__",e:"\\n$"}],g={cN:"subst",b:"#\\{",e:"}",l:b,k:d},h=[a.BE,g],i=[{cN:"string",b:"'",e:"'",c:h,r:0},{cN:"string",b:'"',e:'"',c:h,r:0},{cN:"string",b:"%[qw]?\\(",e:"\\)",c:h},{cN:"string",b:"%[qw]?\\[",e:"\\]",c:h},{cN:"string",b:"%[qw]?{",e:"}",c:h},{cN:"string",b:"%[qw]?<",e:">",c:h,r:10},{cN:"string",b:"%[qw]?/",e:"/",c:h,r:10},{cN:"string",b:"%[qw]?%",e:"%",c:h,r:10},{cN:"string",b:"%[qw]?-",e:"-",c:h,r:10},{cN:"string",b:"%[qw]?\\|",e:"\\|",c:h,r:10}],j={cN:"function",b:"\\bdef\\s+",e:" |$|;",l:b,k:d,c:[{cN:"title",b:c,l:b,k:d},{cN:"params",b:"\\(",e:"\\)",l:b,k:d}].concat(f)},k={cN:"identifier",b:b,l:b,k:d,r:0},l=f.concat(i.concat([{cN:"class",bWK:!0,e:"$|;",k:"class module",c:[{cN:"title",b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",r:0},{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+a.IR+"::)?"+a.IR}]}].concat(f)},j,{cN:"constant",b:"(::)?([A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:i.concat([k]),r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"number",b:"\\?\\w"},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},k,{b:"("+a.RSR+")\\s*",c:f.concat([{cN:"regexp",b:"/",e:"/[a-z]*",i:"\\n",c:[a.BE]}]),r:0}]));return g.c=l,j.c[1].c=l,{dM:{l:b,k:d,c:l}}}(c),c.LANGUAGES.diff=function(){return{cI:!0,dM:{c:[{cN:"chunk",b:"^\\@\\@ +\\-\\d+,\\d+ +\\+\\d+,\\d+ +\\@\\@$",r:10},{cN:"chunk",b:"^\\*\\*\\* +\\d+,\\d+ +\\*\\*\\*\\*$",r:10},{cN:"chunk",b:"^\\-\\-\\- +\\d+,\\d+ +\\-\\-\\-\\-$",r:10},{cN:"header",b:"Index: ",e:"$"},{cN:"header",b:"=====",e:"=====$"},{cN:"header",b:"^\\-\\-\\-",e:"$"},{cN:"header",b:"^\\*{3} ",e:"$"},{cN:"header",b:"^\\+\\+\\+",e:"$"},{cN:"header",b:"\\*{5}",e:"\\*{5}$"},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}}(c),c.LANGUAGES.javascript=function(a){return{dM:{k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete",literal:"true false null undefined NaN Infinity"},c:[a.ASM,a.QSM,a.CLCM,a.CBLCLM,a.CNM,{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",c:[{b:"\\\\/"}]}],r:0},{cN:"function",bWK:!0,e:"{",k:"function",c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[a.CLCM,a.CBLCLM],i:"[\"'\\(]"}],i:"\\[|%"}]}}}(c),c.LANGUAGES.css=function(a){var b={cN:"function",b:a.IR+"\\(",e:"\\)",c:[{eW:!0,eE:!0,c:[a.NM,a.ASM,a.QSM]}]};return{cI:!0,dM:{i:"[=/|']",c:[a.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",eE:!0,k:"import page media charset",c:[b,a.ASM,a.QSM,a.NM]},{cN:"tag",b:a.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[a.CBLCLM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[b,a.NM,a.QSM,a.ASM,a.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}}(c),c.LANGUAGES.xml=function(){var b="[A-Za-z0-9\\._:-]+",c={eW:!0,c:[{cN:"attribute",b:b,r:0},{b:'="',rB:!0,e:'"',c:[{cN:"value",b:'"',eW:!0}]},{b:"='",rB:!0,e:"'",c:[{cN:"value",b:"'",eW:!0}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:!0,dM:{c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[c],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[c],starts:{e:"<\/script>",rE:!0,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},c]}]}}}(c),c.LANGUAGES.http=function(){return{dM:{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}}(c),c.LANGUAGES.java=function(a){return{dM:{k:"false synchronized int abstract float private char boolean static null if const for true while long throw strictfp finally protected import native final return void enum else break transient new catch instanceof byte super volatile case assert short package default double public try this switch continue throws",c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},a.CLCM,a.CBLCLM,a.ASM,a.QSM,{cN:"class",bWK:!0,e:"{",k:"class interface",i:":",c:[{bWK:!0,k:"extends implements",r:10},{cN:"title",b:a.UIR}]},a.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}}}(c),c.LANGUAGES.php=function(a){var b={cN:"variable",b:"\\$+[a-zA-Z_-\xff][a-zA-Z0-9_-\xff]*"},c=[a.inherit(a.ASM,{i:null}),a.inherit(a.QSM,{i:null}),{cN:"string",b:'b"',e:'"',c:[a.BE]},{cN:"string",b:"b'",e:"'",c:[a.BE]}],d=[a.CNM,a.BNM],e={cN:"title",b:a.UIR};return{cI:!0,dM:{k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return implements parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception php_user_filter default die require __FUNCTION__ enddeclare final try this switch continue endfor endif declare unset true false namespace trait goto instanceof insteadof __DIR__ __NAMESPACE__ __halt_compiler",c:[a.CLCM,a.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"}]},{cN:"comment",eB:!0,b:"__halt_compiler.+?;",eW:!0},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[a.BE]},{cN:"preprocessor",b:"<\\?php",r:10},{cN:"preprocessor",b:"\\?>"},b,{cN:"function",bWK:!0,e:"{",k:"function",i:"\\$|\\[|%",c:[e,{cN:"params",b:"\\(",e:"\\)",c:["self",b,a.CBLCLM].concat(c).concat(d)}]},{cN:"class",bWK:!0,e:"{",k:"class",i:"[:\\(\\$]",c:[{bWK:!0,eW:!0,k:"extends",c:[e]},e]},{b:"=>"}].concat(c).concat(d)}}}(c),c.LANGUAGES.python=function(a){var b=[{cN:"string",b:"(u|b)?r?'''",e:"'''",r:10},{cN:"string",b:'(u|b)?r?"""',e:'"""',r:10},{cN:"string",b:"(u|r|ur)'",e:"'",c:[a.BE],r:10},{cN:"string",b:'(u|r|ur)"',e:'"',c:[a.BE],r:10},{cN:"string",b:"(b|br)'",e:"'",c:[a.BE]},{cN:"string",b:'(b|br)"',e:'"',c:[a.BE]}].concat([a.ASM,a.QSM]),c={cN:"title",b:a.UIR},d={cN:"params",b:"\\(",e:"\\)",c:["self",a.CNM].concat(b)},e={bWK:!0,e:":",i:"[${=;\\n]",c:[c,d],r:10};return{dM:{k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10",built_in:"None True False Ellipsis NotImplemented"},i:"(</|->|\\?)",c:b.concat([a.HCM,a.inherit(e,{cN:"function",k:"def"}),a.inherit(e,{cN:"class",k:"class"}),a.CNM,{cN:"decorator",b:"@",e:"$"},{b:"\\b(print|exec)\\("}])}}}(c),c.LANGUAGES.sql=function(a){return{cI:!0,dM:{i:"[^\\s]",c:[{cN:"operator",b:"(begin|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma|grant)\\b",e:";",eW:!0,k:{keyword:"all partial global month current_timestamp using go revoke smallint indicator end-exec disconnect zone with character assertion to add current_user usage input local alter match collate real then rollback get read timestamp session_user not integer bit unique day minute desc insert execute like ilike|2 level decimal drop continue isolation found where constraints domain right national some module transaction relative second connect escape close system_user for deferred section cast current sqlstate allocate intersect deallocate numeric public preserve full goto initially asc no key output collation group by union session both last language constraint column of space foreign deferrable prior connection unknown action commit view or first into float year primary cascaded except restrict set references names table outer open select size are rows from prepare distinct leading create only next inner authorization schema corresponding option declare precision immediate else timezone_minute external varying translation true case exception join hour default double scroll value cursor descriptor values dec fetch procedure delete and false int is describe char as at in varchar null trailing any absolute current_time end grant privileges when cross check write current_date pad begin temporary exec time update catalog user sql date on identity timezone_hour natural whenever interval work order cascade diagnostics nchar having left call do handler load replace truncate start lock show pragma",aggregate:"count sum min max avg"},c:[{cN:"string",b:"'",e:"'",c:[a.BE,{b:"''"}],r:0},{cN:"string",b:'"',e:'"',c:[a.BE,{b:'""'}],r:0},{cN:"string",b:"`",e:"`",c:[a.BE]},a.CNM]},a.CBLCLM,{cN:"comment",b:"--",e:"$"}]}}}(c),c.LANGUAGES.ini=function(a){return{cI:!0,dM:{i:"[^\\s]",c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9_\\[\\]]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[a.QSM,a.NM]}]}]}}}(c),c.LANGUAGES.perl=function(a){var b="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0",c={cN:"subst",b:"[$@]\\{",e:"\\}",k:b,r:10},d={cN:"variable",b:"\\$\\d"},e={cN:"variable",b:"[\\$\\%\\@\\*](\\^\\w\\b|#\\w+(\\:\\:\\w+)*|[^\\s\\w{]|{\\w+}|\\w+(\\:\\:\\w*)*)"},f=[a.BE,c,d,e],g={b:"->",c:[{b:a.IR},{b:"{",e:"}"}]},h={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},i=[d,e,a.HCM,h,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:!0},g,{cN:"string",b:"q[qwxr]?\\s*\\(",e:"\\)",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\[",e:"\\]",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\{",e:"\\}",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\|",e:"\\|",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\<",e:"\\>",c:f,r:5},{cN:"string",b:"qw\\s+q",e:"q",c:f,r:5},{cN:"string",b:"'",e:"'",c:[a.BE],r:0},{cN:"string",b:'"',e:'"',c:f,r:0},{cN:"string",b:"`",e:"`",c:[a.BE]},{cN:"string",b:"{\\w+}",r:0},{cN:"string",b:"-?\\w+\\s*\\=\\>",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"("+a.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[a.HCM,h,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[a.BE],r:0}]},{cN:"sub",bWK:!0,e:"(\\s*\\(.*?\\))?[;{]",k:"sub",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return c.c=i,g.c[1].c=i,{dM:{k:b,c:i}}}(c),c.LANGUAGES.json=function(a){var b={literal:"true false null"},c=[a.QSM,a.CNM],d={cN:"value",e:",",eW:!0,eE:!0,c:c,k:b},e={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[a.BE],i:"\\n",starts:d}],i:"\\S"},f={b:"\\[",e:"\\]",c:[a.inherit(d,{cN:null})],i:"\\S"};return c.splice(c.length,0,e,f),{dM:{c:c,k:b,i:"\\S"}}}(c),c.LANGUAGES.cpp=function(a){var b={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long throw volatile static protected bool template mutable if public friend do return goto auto void enum else break new extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr"};return{dM:{k:b,i:"</",c:[a.CLCM,a.CBLCLM,a.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},a.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:b,r:10,c:["self"]}]}}}(c),window.hljs=c,b.resolve()}),Komento.module("admin.language",function(){var b=this;Komento.require().language("COM_KOMENTO_CONFIRM_DELETE_AFFECT_ALL_CHILD","COM_KOMENTO_CONFIRM_DELETE","COM_KOMENTO_DELETE_COMMENT","COM_KOMENTO_DELETE_ALL_CHILD","COM_KOMENTO_DELETE_MOVE_CHILD_UP","COM_KOMENTO_DELETING","COM_KOMENTO_CONFIRM_PUBLISH_AFFECT_ALL_CHILD","COM_KOMENTO_PUBLISH_ALL_CHILD","COM_KOMENTO_PUBLISH_SINGLE","COM_KOMENTO_CHILD_UNPUBLISHED","COM_KOMENTO_PARENT_PUBLISHED","COM_KOMENTO_MIGRATORS_LOG_COMPLETE","COM_KOMENTO_MIGRATORS_PROGRESS_DONE","COM_KOMENTO_YES_OPTION","COM_KOMENTO_NO_OPTION","COM_KOMENTO_ACL_RECOMMENDED","COM_KOMENTO_PUBLISH_ITEM","COM_KOMENTO_UNPUBLISH_ITEM").done(function(){b.resolve()})}),Komento.module("admin.database",function(){var b=this;Komento.require().language("COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_UPDATING","COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_COMPLETED","COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_ERROR","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_UPDATING_STAGE1","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_UPDATING_STAGE2","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_ERROR","COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_COMPLETED").done(function(a){Komento.Controller("Database.DepthMaintenance",{defaultOptions:{"{start}":".start","{status}":".status","{total}":".total","{count}":".count","{statusWrapper}":".statusWrapper","{totalWrapper}":".totalWrapper","{countWrapper}":".countWrapper"}},function(b){return{init:function(){},"{start} click":function(c){c.enabled()&&(b.counter=0,c.disabled(!0),b.statusWrapper().show(),b.totalWrapper().show(),b.countWrapper().show(),b.status().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_UPDATING")),b.totalArticle(0),b.countArticle(0),Komento.ajax("admin.views.system.getArticleStatistics").done(function(a){b.totalArticle(a.length),b.articles=a,b.populateDepth()}).fail(function(){b.status().html(a.language("COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_ERROR"))}))},populateDepth:function(){var c=b.articles[b.counter];return void 0===c?(b.populateComplete(),void 0):(Komento.ajax("admin.views.system.populateDepth",{component:c.component,cid:c.cid}).done(function(){b.counter++,b.countArticle(parseInt(b.countArticle())+1),b.populateDepth()}).fail(function(){b.status().html(a.language("COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_ERROR"))}),void 0)},totalArticle:function(a){return void 0===a?b.total().html():b.total().html(a)},countArticle:function(a){return void 0===a?b.count().html():b.count().html(a)},populateComplete:function(){b.status().html(a.language("COM_KOMENTO_SETTINGS_DATABASE_POPULATE_DEPTH_STATUS_COMPLETED")),b.start().enabled(!0)}}}),Komento.Controller("Database.FixStructure",{defaultOptions:{"{component}":".componentSelection","{article}":".articleSelection","{start}":".start","{status}":".status","{total}":".total","{count}":".count","{statusWrapper}":".statusWrapper","{totalWrapper}":".totalWrapper","{countWrapper}":".countWrapper"}},function(b){return{init:function(){},"{component} change":function(c){var d=c.val();b.article().html(b.createOption("all","*")),"all"!==d&&Komento.ajax("admin.views.system.getArticles",{component:d}).done(function(c){a.each(c,function(a,c){b.article().append(b.createOption(c,c))})})},createOption:function(b,c){var d=a("<option></option>");return d.attr("value",b),d.text(c),d},"{start} click":function(c){if(c.enabled()){b.counter=0,c.disabled(!0),b.statusWrapper().show(),b.totalWrapper().show(),b.countWrapper().show(),b.status().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_UPDATING_STAGE1")),b.totalArticle(0),b.countArticle(0);var d=b.component().val(),e=b.article().val();Komento.ajax("admin.views.system.getArticleStatistics",{component:d,cid:e}).done(function(a){b.totalArticle(a.length),b.articles=a,b.normalizeStructure()}).fail(function(){b.status().html(a.language("COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_ERROR"))})}},normalizeStructure:function(){var c=b.articles[b.counter];return void 0===c?(b.status().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_UPDATING_STAGE2")),b.countArticle(0),b.counter=0,b.fixStructure(),void 0):(Komento.ajax("admin.views.system.normalizeStructure",{component:c.component,cid:c.cid}).done(function(){b.counter++,b.countArticle(parseInt(b.countArticle())+1),b.normalizeStructure()}),void 0)},fixStructure:function(){var c=b.articles[b.counter];return void 0===c?(b.fixComplete(),void 0):(Komento.ajax("admin.views.system.fixStructure",{component:c.component,cid:c.cid}).done(function(){b.counter++,b.countArticle(parseInt(b.countArticle())+1),b.fixStructure()}).fail(function(){b.status().html(a.language("COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_ERROR"))}),void 0)},totalArticle:function(a){return void 0===a?b.total().html():b.total().html(a)},countArticle:function(a){return void 0===a?b.count().html():b.count().html(a)},fixComplete:function(){b.status().html(a.language("COM_KOMENTO_SETTINGS_DATABASE_FIX_STRUCTURE_STATUS_COMPLETED")),b.start().enabled(!0)}}}),b.resolve()})}),Komento.module("admin.integrations.customsmileys",function(){var b=this;Komento.Controller("CustomSmileys",{defaultOptions:{"{smiley}":"[data-smiley]","{addRow}":"[data-smiley-add-row]","{add}":"[data-smiley-add-button]","{delete}":"[data-smiley-delete-button]"}},function(a){return{init:function(){},"{add} click":function(){var b=a.smiley().eq(0).clone();b.find("input").val(""),a.addRow().before(b)},"{delete} click":function(b){var c=b.parent("[data-smiley]");a.smiley().length>1?c.remove():c.find("input").val("")}}}),b.resolve()}),Komento.module("admin.report.actions",function(a){var b=this;Komento.require().library("dialog").script("komento.common","admin.language").done(function(){var c={};"1.5"==Komento.options.jversion?(c.published="images/tick.png",c.unpublished="images/publish_x.png"):(c.published="templates/bluestork/images/admin/tick.png",c.unpublished="templates/bluestork/images/admin/publish_x.png"),Komento.actions={submit:function(b,c){0!=a(".foundryDialog").length&&a(".foundryDialog").controller().close(),Komento.actions.affectchild=c;var d=new Array,e=new Array;a('input[type="checkbox"]:checked').each(function(c,f){if(""!=f.value){d.push(f.value),e.push(a("#kmt-"+f.value));var g;g="unstick"==b||"stick"==b?"sticked":"published",a("#kmt-"+f.value).find("."+g+"-cell a img").attr("src",Komento.options.spinner)}}),Komento.ajax("admin.views.comments."+b,{ids:d,affectchild:c},{success:function(){var c=[],d=[];a.each(e,function(a,e){Komento.actions[b](e),e.attr("childs")>0&&c.push(1),0!=e.attr("parentid")&&d.push(1)}),("publish"==b&&d.length>0||"publish"!=b&&c.length>0)&&Komento.actions[b+"Dialog"]()},fail:function(){}})},publish:function(b){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish").replace("publish","unpublish");b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_UNPUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.published):b.find(".published-cell i").removeClass("icon-unpublish").addClass("icon-publish"),Komento.actions.publishParent(b),Komento.actions.publishChild(b)},publishParent:function(b){if(b.exists()){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish").replace("publish","unpublish");b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_UNPUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.published):b.find(".published-cell i").removeClass("icon-unpublish").addClass("icon-publish"),0!=b.attr("parentid")&&Komento.actions.publishParent(a("#kmt-"+b.attr("parentid")))}},publishChild:function(b){if(b.exists()){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish").replace("publish","unpublish");if(b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_UNPUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.published):b.find(".published-cell i").removeClass("icon-unpublish").addClass("icon-publish"),1==Komento.actions.affectchild&b.attr("childs")>0){var e=b.attr("id").split("-")[1];Komento.actions.publishChild(a('.kmt-row[parentid="'+e+'"]'))}}},publishDialog:function(){a.dialog("<p>"+a.language("COM_KOMENTO_PARENT_PUBLISHED")+"</p>")},publishParentDialog:function(){a.dialog("<p>"+a.language("COM_KOMENTO_PARENT_PUBLISHED")+"</p>")},unpublish:function(b){if(b.exists()){var d=b.find(".published-cell a").attr("onclick").replace("unpublish","publish");if(b.find(".published-cell a").attr("onclick",d).attr("title",a.language("COM_KOMENTO_PUBLISH_ITEM")),Komento.options.jversion<"3.0"?b.find(".published-cell a img").attr("src",c.unpublished):b.find(".published-cell i").removeClass("icon-publish").addClass("icon-unpublish"),b.attr("childs")>0){var e=b.attr("id").split("-")[1];Komento.actions.unpublish(a('.kmt-row[parentid="'+e+'"]'))}}},unpublishDialog:function(){a.dialog("<p>"+a.language("COM_KOMENTO_CHILD_UNPUBLISHED")+"</p>")}},Komento.prepare={checkChild:function(){var b=[];return a('input[type="checkbox"]:checked').each(function(c,d){""!=d.value&&a("#kmt-"+d.value).attr("childs")>0&&b.push(1)}),b.length>0?!0:!1},remove:function(){var b,c;Komento.prepare.checkChild()?(b=a.language("COM_KOMENTO_CONFIRM_DELETE_AFFECT_ALL_CHILD"),c='<button onclick="Komento.prepare.removeall()">'+a.language("COM_KOMENTO_DELETE_ALL_CHILD")+"</button>",c+='<button onclick="Komento.prepare.removesingle()">'+a.language("COM_KOMENTO_DELETE_MOVE_CHILD_UP")+"</button>"):(b=a.language("COM_KOMENTO_CONFIRM_DELETE"),c='<button onclick="Komento.prepare.removeall()">'+a.language("COM_KOMENTO_DELETE_COMMENT")+"</button>");var d='<div style="text-align: center;"><p>'+b+"</p>"+c+"</div>";a.dialog(d)},removeall:function(){prepareSubmit("remove",1)},removesingle:function(){prepareSubmit("remove",0)},publish:function(){if(Komento.prepare.checkChild()){var b=a.language("COM_KOMENTO_CONFIRM_PUBLISH_AFFECT_ALL_CHILD"),c='<button onclick="Komento.prepare.publishall()">'+a.language("COM_KOMENTO_PUBLISH_ALL_CHILD")+"</button>";c+='<button onclick="Komento.prepare.publishsingle()">'+a.language("COM_KOMENTO_PUBLISH_SINGLE")+"</button>";var d='<div style="text-align: center;"><p>'+b+"</p>"+c+"</div>";a.dialog(d)}else{Komento.actions.submit("publish",1)}},publishall:function(){Komento.actions.submit("publish",1)},publishsingle:function(){Komento.actions.submit("publish",0)},unpublish:function(){Komento.actions.submit("unpublish",1)},clear:function(){submitform("clear")}},window.submitbutton=function(a){Komento.prepare[a]()},window.prepareSubmit=function(b,c){0!=a(".foundryDialog").length&&a(".foundryDialog").controller().close(),document.adminForm.affectchild.value=c,submitform(b)},window.listItemTask=function(a,b){var c=document.adminForm,d=c[a];if(d){for(var e=0;!0;e++){var f=c["cb"+e];if(!f){break}f.checked=!1}d.checked=!0,c.boxchecked.value=1,submitbutton(b)}return !1},b.resolve()})}),Komento.module("dashboard.comment.item",function(a){Komento.require().library("dialog").view("dialogs/delete.affectchild","comment/edit.form").done(function(){Komento.Controller("Dashboard.CommentItem",{defaults:{commentId:0,view:{editForm:"comment/edit.form",affectChild:"dialogs/delete.affectchild"}}},function(b){return{init:function(){},unpublishComment:function(){var c=b.options.commentId,d=c.split("-")[1];Komento.ajax("site.views.komento.unpublish",{id:d},{success:function(){b.closeDialog(),b.unpublishChild(b.element.attr("id")),b.statusButton().text(a.language("COM_KOMENTO_UNPUBLISHED")),b.publishButton().show(),b.unpublishButton().hide(),b.statusOptions().hide()},fail:function(){}})},unpublishChild:function(c){var d=a.language("COM_KOMENTO_UNPUBLISHED");a('li[parentid="'+c+'"]').each(function(){a(this).find(".kmt-status").text(d),a(this).find(".kmt-unpublish").hide(),a(this).find(".kmt-publish").show(),b.unpublishChild(a(this).attr("id"))})}}})})}),Komento.module("dashboard.flag.item",function(a){var b=this;Komento.require().library("ui/effect","dialog").language("COM_KOMENTO_UNPUBLISHED").view("dialogs/delete.affectchild","dialogs/unpublish.affectchild","comment/edit.form").done(function(){Komento.Controller("Dashboard.FlagItem",{defaults:{commentId:0,permalink:0,"{commentText}":".kmt-text","{commentInfo}":".kmt-info","{commentStatus}":".kmt-status","{noflagButton}":".kmt-noflag","{spamButton}":".kmt-spam","{offensiveButton}":".kmt-offensive","{offtopicButton}":".kmt-offtopic","{publishButton}":".kmt-publish","{unpublishButton}":".kmt-unpublish","{deleteButton}":".kmt-delete",view:{editForm:"comment/edit.form",deleteDialog:"dialogs/delete.affectchild",unpublishDialog:"dialogs/unpublish.affectchild"}}},function(b){return{init:function(){},closeDialog:function(){a(".foundryDialog").controller().close()},"{noflagButton} click":function(){b.markComment("0")},"{spamButton} click":function(){b.markComment("1")},"{offensiveButton} click":function(){b.markComment("2")},"{offtopicButton} click":function(){b.markComment("3")},"{publishButton} click":function(){b.publishComment()},"{unpublishButton} click":function(){b.showUnpublishDialog()},"{deleteButton} click":function(){b.showDeleteDialog()},markComment:function(a){var c=b.options.commentId,d=c.split("-")[1];Komento.ajax("site.views.komento.mark",{id:d,type:a},{success:function(){b.element.hide("fade",function(){b.element.remove()})},fail:function(){}})},showPublishDialog:function(){},publishComment:function(){var a=b.options.commentId,c=a.split("-")[1];Komento.ajax("site.views.komento.publish",{id:c,affectChild:0},{success:function(){b.element.hide("fade",function(){b.element.remove()})},fail:function(){}})},showUnpublishDialog:function(){a.dialog({content:b.view.unpublishDialog(!0),afterShow:function(){a(".foundryDialog").find(".unpublish-affectChild").click(function(){b.unpublishComment()})}})},unpublishComment:function(){var c=b.options.commentId,d=c.split("-")[1];Komento.ajax("site.views.komento.unpublish",{id:d},{success:function(){b.closeDialog(),b.unpublishChild(b.element.attr("id")),b.commentStatus().text(a.language("COM_KOMENTO_UNPUBLISHED")),b.unpublishButton().parent().hide("drop")},fail:function(){}})},unpublishChild:function(c){a('tr[parentid="'+c+'"]').each(function(){a(this).find(".kmt-unpublish").parent().hide("drop"),a(this).find(".kmt-status").text(a.language("COM_KOMENTO_UNPUBLISHED")),b.unpublishChild(a(this).attr("id"))})},showDeleteDialog:function(){a.dialog({content:b.view.deleteDialog(!0),afterShow:function(){a(".foundryDialog").find(".delete-affectChild").click(function(){b.deleteComment(1)}),a(".foundryDialog").find(".delete-moveChild").click(function(){b.deleteComment(0)})}})},deleteComment:function(a){var c=b.options.commentId,d=c.split("-")[1];Komento.ajax("site.views.komento.deletecomment",{id:d,affectChild:a},{success:function(){b.closeDialog(),a&&b.deleteChild(b.element.attr("id")),b.element.hide("fade",function(){b.element.remove()})},fail:function(){}})},deleteChild:function(c){a('tr[parentid="'+c+'"]').each(function(){b.deleteChild(a(this).attr("id"))}).hide("fade",function(){a(this).remove()})}}}),b.resolve()})}),Komento.module("komento.admincomments",function(){var b=this;Komento.require().library("dialog").done(function(){Komento.Controller("AdminComments",{defaults:{}},function(){return{init:function(){}}}),b.resolve()})}),Komento.module("komento.bbcode",function(a){var b=this;a.getBBcodeSettings=function(){var b={previewParserVar:"data",markupSet:[]};return 1==Komento.options.config.bbcode_bold&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_BOLD"),key:"B",openWith:"[b]",closeWith:"[/b]",className:"kmt-markitup-bold"}),1==Komento.options.config.bbcode_italic&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_ITALIC"),key:"I",openWith:"[i]",closeWith:"[/i]",className:"kmt-markitup-italic"}),1==Komento.options.config.bbcode_underline&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_UNDERLINE"),key:"U",openWith:"[u]",closeWith:"[/u]",className:"kmt-markitup-underline"}),(1==Komento.options.config.bbcode_bold||1==Komento.options.config.bbcode_italic||1==Komento.options.config.bbcode_underline)&&b.markupSet.push({separator:"---------------"}),1==Komento.options.config.bbcode_link&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_LINK"),key:"L",openWith:'[url="[![Link:!:http://]!]"(!( title="[![Title]!]")!)]',closeWith:"[/url]",placeHolder:a.language("COM_KOMENTO_BBCODE_LINK_TEXT"),className:"kmt-markitup-link"}),1==Komento.options.config.bbcode_picture&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_PICTURE"),key:"P",replaceWith:"[img][![Url]!][/img]",className:"kmt-markitup-picture"}),1==Komento.options.config.bbcode_video&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_VIDEO"),replaceWith:function(b){Komento.ajax("site.views.komento.showVideoDialog",{caretPosition:b.caretPosition,element:a(b.textarea).attr("id")},{success:function(b){Komento.require().library("dialog").done(function(){a.dialog({content:b,title:a.language("COM_KOMENTO_INSERT_VIDEO"),width:400,afterShow:function(){a(".foundryDialog").find(".videoUrl").focus()}})})}})},className:"kmt-markitup-video"}),(1==Komento.options.config.bbcode_link||1==Komento.options.config.bbcode_picture)&&b.markupSet.push({separator:"---------------"}),1==Komento.options.config.bbcode_bulletlist&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_BULLETLIST"),openWith:"[list]\n",closeWith:"\n[/list]",className:"kmt-markitup-bullet"}),1==Komento.options.config.bbcode_numericlist&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_NUMERICLIST"),openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]",className:"kmt-markitup-numeric"}),1==Komento.options.config.bbcode_bullet&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_BULLET"),openWith:"[*]",closeWith:"[/*]",className:"kmt-markitup-list"}),(1==Komento.options.config.bbcode_bulletlist||1==Komento.options.config.bbcode_numericlist||1==Komento.options.config.bbcode_bullet)&&b.markupSet.push({separator:"---------------"}),1==Komento.options.config.bbcode_quote&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_QUOTE"),openWith:"[quote]",closeWith:"[/quote]",className:"kmt-markitup-quote"}),1==Komento.options.config.bbcode_code&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_CODE"),openWith:'[code type="xml"]',closeWith:"[/code]",className:"kmt-markitup-code"}),1==Komento.options.config.bbcode_clean&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_CLEAN"),className:"clean",replaceWith:function(a){return a.selection.replace(/\[(.*?)\]/g,"")},className:"kmt-markitup-clean"}),(1==Komento.options.config.bbcode_quote||Komento.options.config.bbcode_code||1==Komento.options.config.bbcode_clean)&&b.markupSet.push({separator:"---------------"}),1==Komento.options.config.bbcode_smile&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_SMILE"),openWith:":)",className:"kmt-markitup-smile"}),1==Komento.options.config.bbcode_happy&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_HAPPY"),openWith:":D",className:"kmt-markitup-happy"}),1==Komento.options.config.bbcode_surprised&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_SURPRISED"),openWith:":o",className:"kmt-markitup-surprised"}),1==Komento.options.config.bbcode_tongue&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_TONGUE"),openWith:":p",className:"kmt-markitup-tongue"}),1==Komento.options.config.bbcode_unhappy&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_UNHAPPY"),openWith:":(",className:"kmt-markitup-unhappy"}),1==Komento.options.config.bbcode_wink&&b.markupSet.push({name:a.language("COM_KOMENTO_BBCODE_WINK"),openWith:";)",className:"kmt-markitup-wink"}),a.isArray(Komento.options.config.smileycode)&&a.each(Komento.options.config.smileycode,function(a,c){b.markupSet.push({name:c,openWith:c,className:"kmt-markitup-custom-"+a})}),b},b.resolve()}),Komento.module("komento.commentform",function(a){var b=this,c=Komento.require(),d=new Array;d.push("komento.common"),d.push("komento.upload"),1==Komento.options.config.enable_bbcode&&d.push("komento.bbcode"),1==Komento.options.config.show_location&&d.push("location"),c.script.apply(c,d).image(Komento.options.spinner).library("dialog","markitup").done(function(){Komento.Controller("CommentForm",{defaults:{"{addCommentButton}":".addCommentButton","{formArea}":".formArea","{commentInput}":"#commentInput","{markItUpButtons}":".markItUpButton a","{submitButton}":".submitButton","{parentId}":'input[name="parent"]',"{formAuthor}":".formAuthor","{usernameInput}":"#register-username","{nameInput}":"#register-name","{emailInput}":"#register-email","{websiteInput}":"#register-website","{registerCheckbox}":"#register-checkbox","{tncCheckbox}":".tncCheckbox","{ratings}":"[data-rating-value]","{tncRead}":".tncRead","{subscribeForm}":".subscribeForm","{subscribeCheckbox}":".subscribeCheckbox","{unsubscribeButton}":".unsubscribeButton","{locationForm}":".locationForm","{formAlert}":".formAlert","{recaptchaChallenge}":"#recaptcha_challenge_field","{recaptchaResponse}":"#recaptcha_response_field","{captchaImage}":"#captcha-image","{captchaResponse}":"#captcha-response","{recaptchaResponse}":"#recaptcha_response_field","{captchaId}":"#captcha-id","{captchaReload}":".kmt-captcha-reload","{locationInput}":".locationInput","{locationLatitude}":".locationLatitude","{locationLongitude}":".locationLongitude","{parentLink}":".parentLink","{parentContainer}":".parentContainer","{cancelStaticReplyButton}":".cancelStaticReply","{commentLength}":".commentLength","{commentLengthCount}":".commentLengthCount","{uploaderWrap}":".uploaderWrap","{pageItemId}":".pageItemId"}},function(b){return{init:function(){b.parentid=0,b.commentInput().val(""),1==Komento.options.config.enable_bbcode&&(b.commentInput().markItUp(a.getBBcodeSettings()),a.isArray(Komento.options.config.smileycode)&&a.each(Komento.options.config.smileycode,function(b){var d=".kmt-markitup-custom-"+b+" a",e=Komento.options.config.smileypath[b];a.cssRule(d,{"background-image":"url('"+e+"') !important"})})),1==Komento.options.config.show_location&&b.locationForm().exists()&&b.locationForm().implement("Komento.Controller.Location.Form.Simple"),1==Komento.options.config.upload_enable&&1==Komento.options.acl.upload_attachment&&b.uploaderWrap().exists()&&(Komento.options.element.commentupload=a(".uploaderWrap").addController("Komento.Controller.UploadForm"),Komento.options.element.commentupload.kmt=Komento.options.element)},"{commentInput} textChange":function(){b.commentLengthCheck(),b.experimentalValidateComment()},"{commentInput} keyup":function(){b.commentLengthCheck(),b.experimentalValidateComment()},"{nameInput} keyup":function(){b.experimentalValidateComment()},"{emailInput} keyup":function(){b.experimentalValidateComment()},"{websiteInput} keyup":function(){b.experimentalValidateComment()},"{subscribeCheckbox} click":function(){b.experimentalValidateComment()},"{tncCheckbox} click":function(){b.experimentalValidateComment()},"{captchaResponse} keyup":function(){b.experimentalValidateComment()},"{recaptchaResponse} keyup":function(){b.experimentalValidateComment()},"{tncRead} click":function(){var b="<p>"+Komento.options.config.tnc_text.replace(/\n/g,"<br />")+"</p>";a.dialog({title:a.language("COM_KOMENTO_FORM_TNC"),customClass:"kmt-dialog",width:500,showOverlay:!1,content:b})},"{submitButton} click":function(a){a.checkClick()&&a.html('<img src="'+Komento.options.spinner+'" />'),b.validateComment()},"{unsubscribeButton} click":function(a){a.checkClick()&&(a.html('<img src="'+Komento.options.spinner+'" />'),b.unsubscribe())},"{captchaReload} click":function(){b.reloadCaptcha()},"{parentLink} mouseover":function(){b.parentContainer().show()},"{parentLink} mouseout":function(){b.parentContainer().hide()},"{cancelStaticReplyButton} click":function(){b.cancelStaticReply()},"{addCommentButton} click":function(){b.loadForm()},loadForm:function(){1==Komento.options.config.form_toggle_button&&(b.addCommentButton().hide(),b.formArea().show(),1==Komento.options.config.enable_upload&&b.kmt.commentupload&&b.kmt.commentupload.plupload.refresh())},hideForm:function(){1==Komento.options.config.form_toggle_button&&(b.addCommentButton().show(),b.formArea().hide())},commentLengthCheck:function(){1==Komento.options.config.antispam_max_length_enable&&b.commentInput().val().length>Komento.options.config.antispam_max_length&&b.commentInput().val(b.commentInput().val().slice(0,Komento.options.config.antispam_max_length)),b.commentLengthCount().text(b.commentInput().val().length)},validateComment:function(){if(b.clearNotification(),0==Komento.options.konfig.enable_js_form_validation){return b.kmt.commentupload?b.kmt.commentupload.startUpload():b.postComment(),void 0}var c=a.trim(b.nameInput().val()),d=a.trim(b.emailInput().val()),e=a.trim(b.websiteInput().val()),f=a.trim(b.commentInput().val()),g=a.trim(b.captchaResponse().val()),h=a.trim(b.recaptchaResponse().val()),i=[];0==f.length?(b.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_COMMENT_REQUIRED")),i.push("1")):1==Komento.options.config.antispam_min_length_enable&&Komento.options.config.antispam_min_length>0&&f.length<Komento.options.config.antispam_min_length&&(b.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_COMMENT_TOO_SHORT")),i.push("1")),(b.captchaResponse().exists()&&0==g.length||b.recaptchaResponse().exists()&&0==h.length)&&(b.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_CAPTCHA_REQUIRED")),i.push("1")),0==c.length&&(2==Komento.options.config.show_name&&2==Komento.options.config.require_name||1==Komento.options.guest&&Komento.options.config.show_name>0&&1==Komento.options.config.require_name)?(0==b.nameInput().siblings("span").length?b.nameInput().after('<span class="help-inline">'+a.language("COM_KOMENTO_FORM_NOTIFICATION_NAME_REQUIRED")+"</span>"):b.nameInput().siblings("span").show(),b.nameInput().parents("li").addClass("error"),i.push("1")):(b.nameInput().siblings("span").hide(),b.nameInput().parents("li").removeClass("error")),b.emailInput().siblings("span").remove(),0==d.length&&(2==Komento.options.config.show_email&&(2==Komento.options.config.require_email||b.subscribeCheckbox().prop("checked"))||1==Komento.options.guest&&Komento.options.config.show_email>0&&(1==Komento.options.config.require_email||b.subscribeCheckbox().prop("checked")))?(b.emailInput().after('<span class="help-inline">'+a.language("COM_KOMENTO_FORM_NOTIFICATION_EMAIL_REQUIRED")+"</span>"),b.emailInput().parents("li").addClass("error"),i.push("1")):d.length>0&&!b.validateEmail(d)?(b.emailInput().after('<span class="help-inline">'+a.language("COM_KOMENTO_FORM_NOTIFICATION_EMAIL_INVALID")+"</span>"),b.emailInput().parents("li").addClass("error"),i.push("1")):b.emailInput().parents("li").removeClass("error"),b.websiteInput().siblings("span").remove(),0==e.length&&(2==Komento.options.config.show_website&&2==Komento.options.config.require_website||1==Komento.options.guest&&Komento.options.config.show_website>0&&1==Komento.options.config.require_website)?(b.websiteInput().after('<span class="help-inline">'+a.language("COM_KOMENTO_FORM_NOTIFICATION_WEBSITE_REQUIRED")+"</span>"),b.websiteInput().parents("li").addClass("error"),i.push("1")):e.length>0&&!b.validateWebsite(e)?(b.websiteInput().after('<span class="help-inline">'+a.language("COM_KOMENTO_FORM_NOTIFICATION_WEBSITE_INVALID")+"</span>"),b.websiteInput().parents("li").addClass("error"),i.push("1")):b.websiteInput().parents("li").removeClass("error"),1==Komento.options.config.show_tnc&&0==b.tncCheckbox().prop("checked")&&(b.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_TNC_REQUIRED")),i.push("1")),(""==b.locationLongitude().val()||""==b.locationLatitude().val()||""==b.locationInput().val())&&b.locationInput().val(""),0==i.length?b.kmt.commentupload?b.kmt.commentupload.startUpload():b.postComment():0==b.parentid?b.submitButton().text(a.language("COM_KOMENTO_FORM_SUBMIT")):b.submitButton().text(a.language("COM_KOMENTO_FORM_REPLY"))},experimentalValidateComment:function(){if(0==Komento.options.konfig.enable_live_form_validation){return b.submitButton().enable(),!0}var c=a.trim(b.nameInput().val()),d=a.trim(b.emailInput().val()),e=a.trim(b.websiteInput().val()),f=a.trim(b.commentInput().val()),g=a.trim(b.captchaResponse().val()),h=a.trim(b.recaptchaResponse().val()),i=[];0==b.commentInput().val().length?i.push("1"):1==Komento.options.config.antispam_min_length_enable&&Komento.options.config.antispam_min_length>0&&f.length<Komento.options.config.antispam_min_comment_length&&i.push("1"),(b.captchaResponse().exists()&&0==g.length||b.recaptchaResponse().exists()&&0==h.length)&&i.push("1"),0==c.length&&(2==Komento.options.config.show_name&&2==Komento.options.config.require_name||1==Komento.options.guest&&Komento.options.config.show_name>0&&Komento.options.config.require_name>0)&&i.push("1"),0==d.length&&(2==Komento.options.config.show_email&&(2==Komento.options.config.require_email||b.subscribeCheckbox().prop("checked"))||1==Komento.options.guest&&Komento.options.config.show_email>0&&(Komento.options.config.require_email>0||b.subscribeCheckbox().prop("checked")))&&i.push("1"),0==e.length&&(2==Komento.options.config.show_website&&2==Komento.options.config.require_website||1==Komento.options.guest&&Komento.options.config.show_website>0&&Komento.options.config.require_website>0)&&i.push("1"),1==Komento.options.config.show_tnc&&0==b.tncCheckbox().prop("checked")&&i.push("1"),0==i.length?b.submitButton().enable():b.submitButton().disable()},validateEmail:function(b){if(1==Komento.options.config.enable_email_regex){var c=Komento.options.config.email_regex;a.isArray(Komento.options.config.email_regex)&&(c=decodeURIComponent(Komento.options.config.email_regex[0]));var d=new RegExp(c);return d.test(b)}return !0},validateWebsite:function(b){if(1==Komento.options.config.enable_website_regex){var c=Komento.options.config.website_regex;a.isArray(Komento.options.config.website_regex)&&(c=decodeURIComponent(Komento.options.config.website_regex[0]));var d=new RegExp(c);return d.test(b)}return !0},postComment:function(){b.submitButton().disable();var c=[];b.kmt.commentupload&&(c=b.kmt.commentupload.options.uploadedId),Komento.ajax("site.views.komento.addcomment",{component:Komento.component,cid:Komento.cid,comment:b.commentInput().val(),parent_id:b.parentid,depth:b.depth,username:b.usernameInput().val(),name:b.nameInput().val(),email:b.emailInput().val(),website:b.websiteInput().val(),subscribe:b.subscribeCheckbox().prop("checked"),register:b.registerCheckbox().prop("checked"),tnc:b.tncCheckbox().prop("checked"),recaptchaChallenge:b.recaptchaChallenge().val(),recaptchaResponse:b.recaptchaResponse().val(),captchaResponse:b.captchaResponse().val(),captchaId:b.captchaId().val(),latitude:b.locationLatitude().val(),longitude:b.locationLongitude().val(),address:b.locationInput().val(),contentLink:Komento.contentLink,attachments:c,pageItemId:b.pageItemId().val(),ratings:b.ratings().val()},{success:function(c,d,e){var f=a.buildHTML(d);1==e?(1==Komento.options.acl.read_comment&&b.kmt.commentlist.addComment(c,f),b.successNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_SUBMITTED"))):b.successNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_PENDING")),(0!=b.captchaId().length||0!=a("#recaptcha_table").length)&&b.reloadCaptcha(),0!=b.parentid&&b.kmt.commentlist.cancelReply(),b.commentInput().val(""),b.commentLengthCount().text("0"),b.locationForm().length>0&&b.locationForm().controller().removeLocation(),0==b.parentid?b.submitButton().text(a.language("COM_KOMENTO_FORM_SUBMIT")):b.submitButton().text(a.language("COM_KOMENTO_FORM_REPLY")),b.kmt.commentupload&&(b.kmt.commentupload.options.uploadedId=[]),b.ratings().trigger("clear")},fail:function(c){b.errorNotification(c),b.submitButton().text(a.language("COM_KOMENTO_ERROR"))},captcha:function(c){1==Komento.options.config.antispam_captcha_type?Recaptcha.reload():(b.captchaImage().attr("src",c.image),b.captchaId().val(c.id),b.captchaResponse().val("")),0==b.parentid?b.submitButton().text(a.language("COM_KOMENTO_FORM_SUBMIT")):b.submitButton().text(a.language("COM_KOMENTO_FORM_REPLY"))},subscribe:function(){b.subscribeForm().text(a.language("COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBED")).addClass("subscribed")},confirmSubscribe:function(){b.subscribeForm().text(a.language("COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBE_CONFIRMATION_REQUIRED")).addClass("subscribed")},subscribeError:function(){b.subscribeForm().text(a.language("COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBE_ERROR"))},notification:function(a){b.notification(a)},error:function(c){b.errorNotification(c.statusText),a.bugReport(c),b.submitButton().text(a.language("COM_KOMENTO_ERROR"))}})},reloadCaptcha:function(){1==Komento.options.config.antispam_captcha_type?void 0!==Recaptcha&&Recaptcha.reload():Komento.ajax("site.views.komento.reloadCaptcha",{component:Komento.component},{success:function(a){b.captchaImage().attr("src",a.image),b.captchaId().val(a.id),b.captchaResponse().val("")}})},staticReply:function(c){var d=c.parentid.split("-")[1];b.parentid=d,b.depth=parseInt(c.depth)+1;var e=a("#"+parentid),f=e.find(".kmt-avatar:not(.parentContainer > .kmt-avatar)").clone(),g=e.find(".kmt-author:not(.parentContainer > .kmt-author)").clone(),h=e.find(".kmt-time:not(.parentContainer > .kmt-time)").clone(),i=e.find(".commentText:not(.parentContainer > .commentText)").clone(),j='<a href="javascript:void(0);" class="cancelStaticReply">x</a>'+a.language("COM_KOMENTO_FORM_IN_REPLY_TO")+'<a href="'+Komento.contentLink+"#"+parentid+'" class="parentLink kmt-parent-link">#'+d+"</a>",k=a('<span class="parentContainer hidden"></span>');k.html("").append(f).append(g).append(h).append(i),b.element.find("h3.kmt-title").html("").append(j).append(k),b.submitButton().text(a.language("COM_KOMENTO_FORM_REPLY")),b.element.scroll()},cancelStaticReply:function(){b.parentid=0,b.depth=0,b.element.find("h3.kmt-title").text(a.language("COM_KOMENTO_FORM_LEAVE_YOUR_COMMENTS"))},reply:function(c){b.loadForm(),b.parentid=c.id,b.depth=parseInt(c.depth)+1,b.element.find("h3.kmt-title").text(a.language("COM_KOMENTO_FORM_REPLY")),b.element.find(".submitButton").text(a.language("COM_KOMENTO_FORM_REPLY")),c.mine.append(b.element).scroll()},cancelReply:function(){b.hideForm(),b.element.find("h3.kmt-title").text(a.language("COM_KOMENTO_FORM_LEAVE_YOUR_COMMENTS")),b.parentid=0,b.depth=0,b.element.find(".submitButton").text(a.language("COM_KOMENTO_FORM_SUBMIT")),0==Komento.options.config.form_position?0==Komento.options.config.tabbed_comments?a(".commentTools").before(b.element):a(".fameList").before(b.element):0==Komento.options.config.tabbed_comments?a(".commentList").after(b.element):a(".fameList").after(b.element)},unsubscribe:function(){Komento.ajax("site.views.komento.unsubscribe",{component:Komento.component,cid:Komento.cid},{success:function(){b.subscribeForm().text(a.language("COM_KOMENTO_FORM_NOTIFICATION_UNSUBSCRIBED")).removeClass("subscribed")},fail:function(){b.subscribeForm().text(a.language("COM_KOMENTO_ERROR"))}})},errorNotification:function(a){b.formAlert().removeClass("success").addClass("error"),b.notification(a)},successNotification:function(a){b.formAlert().removeClass("error").addClass("success");var c=parseInt(Komento.options.config.autohide_form_notification);b.notification(a,c)},notification:function(a,c){b.formAlert().show(),b.formAlert().append("<li>"+a+"</li>"),1==c&&setTimeout(function(){b.closeNotification()},5000)},closeNotification:function(){b.formAlert().hide()},clearNotification:function(){b.formAlert().html("").removeClass("error").hide()}}}),b.resolve()})}),Komento.module("komento.commentitem",function(a){var b=this;a.fn.itemset=function(b){var c=a(this),d=a(c).parents(".kmt-item").data();if(!d.item){var e={};e.mine=a(c).parents(".kmt-item"),e.commentid=e.mine.attr("id"),e.both=a("."+e.commentid),e.id=e.commentid.split("-")[1],e.parentid=e.mine.attr("parentid"),e.depth=e.mine.attr("depth"),e.childs=e.mine.attr("childs"),e.published=e.mine.attr("published"),e.element={},e.element.mine={},e.element.both={},e.element.mine.commentText=e.mine.find(b["{commentText}"]),e.element.mine.commentInfo=e.mine.find(b["{commentInfo}"]),e.element.mine.commentForm=e.mine.find(b["{commentForm}"]),e.element.mine.stickButton=e.mine.find(b["{stickButton}"]),e.element.mine.replyButton=e.mine.find(b["{replyButton}"]),e.element.mine.reportButton=e.mine.find(b["{reportButton}"]),e.element.mine.likeButton=e.mine.find(b["{likeButton}"]),e.element.mine.likesCounter=e.mine.find(b["{likesCounter}"]),e.element.mine.editButton=e.mine.find(b["{editButton}"]),e.element.mine.saveEditButton=e.mine.find(b["{saveEditButton}"]),e.element.mine.deleteButton=e.mine.find(b["{deleteButton}"]),e.element.mine.publishButton=e.mine.find(b["{publishButton}"]),e.element.mine.unpublishButton=e.mine.find(b["{unpublishButton}"]),e.element.mine.parentLink=e.mine.find(b["{parentLink}"]),e.element.mine.parentContainer=e.mine.find(b["{parentContainer}"]),e.element.mine.attachmentWrap=e.mine.find(b["{attachmentWrap}"]),e.element.mine.attachmentFile=e.mine.find(b["{attachmentFile}"]),e.element.both.commentText=e.both.find(b["{commentText}"]),e.element.both.commentInfo=e.both.find(b["{commentInfo}"]),e.element.both.stickButton=e.both.find(b["{stickButton}"]),e.element.both.replyButton=e.both.find(b["{replyButton}"]),e.element.both.reportButton=e.both.find(b["{reportButton}"]),e.element.both.likeButton=e.both.find(b["{likeButton}"]),e.element.both.likesCounter=e.both.find(b["{likesCounter}"]),e.element.both.parentLink=e.both.find(b["{parentLink}"]),e.element.both.parentContainer=e.both.find(b["{parentContainer}"]),e.element.both.attachmentWrap=e.both.find(b["{attachmentWrap}"]),e.element.both.attachmentFile=e.both.find(b["{attachmentFile}"]),e.mine.data("item",e),d.item=e}return d.item},b.resolve()}),Komento.module("komento.commentlist",function(a){var b=this;Komento.require().library("ui/effect","fancybox","dialog").image(Komento.options.spinner).script("sharelinks","markitup","komento.common","komento.commentitem","komento.bbcode","komento.language").view("dialogs/delete.single","dialogs/delete.affectchild","dialogs/unpublish.affectchild","comment/item/edit.form","dialogs/delete.attachment").done(function(){Komento.Controller("CommentList",{defaults:{"{commentList}":".kmt-list","{commentItem}":".kmt-item","{noComment}":".kmt-empty-comment","{loadMore}":".loadMore","{commentText}":".commentText","{commentInfo}":".commentInfo","{commentForm}":".commentForm","{deleteButton}":".deleteButton","{editButton}":".editButton","{saveEditButton}":".saveEditButton","{cancelEditButton}":".cancelEditButton","{editForm}":".editForm","{editInput}":".editInput","{replyButton}":".replyButton","{shareBox}":".shareBox","{reportButton}":".reportButton","{statusButton}":".statusButton","{statusOptions}":".statusOptions","{publishButton}":".publishButton","{unpublishButton}":".unpublishButton","{stickButton}":".stickButton","{likeButton}":".likeButton","{likesCounter}":".likesCounter","{parentLink}":".parentLink","{parentContainer}":".parentContainer","{socialButton}":".socialButton","{attachmentWrap}":".attachmentWrap","{attachmentList}":".attachmentList","{attachmentFile}":".attachmentFile","{attachmentDelete}":".attachmentDelete","{attachmentImage}":".attachmentImage","{attachmentImageLink}":".attachmentImageLink",view:{editForm:"comment/item/edit.form",deleteSingle:"dialogs/delete.single",deleteChilds:"dialogs/delete.affectchild",publishDialog:"dialogs/publish.affectchild",unpublishDialog:"dialogs/unpublish.affectchild",deleteAttachment:"dialogs/delete.attachment"}}},function(b){return{init:function(){if(0==b.noComment().length){if(b.generateSharelinks(),1==Komento.options.konfig.enable_ajax_permalink){for(var d,c=document.location.href.split("#"),e=0;e<c.length;e++){if("kmt-"==c[e].substring(0,4)){d=c[e];break}}d&&b.finditem(d),1==Komento.options.config.upload_image_fancybox&&b.attachmentImageLink().fancybox({type:"image",helpers:{overlay:1==Komento.options.config.upload_image_overlay?!0:!1}})}1==Komento.options.config.enable_syntax_highlighting&&a.loadSHBrushes()}},generateSharelinks:function(){var c=function(){b.socialButton().each(function(b,c){a(c).sharelinks()})};b.generateShortLinks(c)},generateShortLinks:function(c){var d=function(d){b.socialButton().each(function(b,c){if(!a(c).attr("loaded")){var e=a(c).attr("commentid"),f=d+"#kmt"+e;a(c).attr("url",f),a(c).parents(".kmt-share-balloon").find(".short-url").val(f)}}),c&&c()};Komento.shortenLink?d(Komento.shortenLink):a.shortenlink(Komento.contentLink,d)},finditem:function(c){0==a("#"+c).length?b.loadMore().is(":hidden")||0==b.loadMore().length||b.loadMoreComments(function(){b.finditem(c)}):(a("#"+c).scroll(),a("#"+c).highlight())},"{loadMore} click":function(a){a.checkClick()&&(a.loading(),b.loadMoreComments())},addComment:function(c,d){var f=d.filter("li").attr("id"),g=0;if(0!=b.noComment().length){b.noComment().remove(),b.commentList().append(d),g=1}else{if(0==c||0==Komento.options.config.enable_threaded){1==Komento.options.config.load_previous?("oldest"==Komento.sort&&(b.commentList().append(d),g=1),"latest"!=Komento.sort||0!=b.loadMore().length&&!b.loadMore().is(":hidden")||(b.commentList().prepend(d),g=1)):("oldest"!=Komento.sort||0!=b.loadMore().length&&!b.loadMore().is(":hidden")||(b.commentList().append(d),g=1),"latest"==Komento.sort&&(b.commentList().prepend(d),g=1))}else{if("oldest"==Komento.sort&&("kmt-form"==b.commentList().find("#kmt-"+c).next().attr("id")?(b.commentList().find("#kmt-"+c).next().after(d),g=1):(b.commentList().find("#kmt-"+c).after(d),g=1)),"latest"==Komento.sort){var h=b.commentList().find("#"+d.attr("parentid"));h.attr("id")==="kmt-"+c?"kmt-form"==b.commentList().find("#kmt-"+c).next().attr("id")?b.commentList().find("#kmt-"+c).next().after(d):b.commentList().find("#kmt-"+c).after(d):b.commentList().find("#kmt-"+c).before(d),g=1}}}if(g){if(Komento.loadedCount++,0!=c&&b.addChildCount(a("#"+f).attr("parentid")),b.generateSharelinks(),1==Komento.options.config.scroll_to_comment){var i=a("#"+f);i.highlight(),i.scroll()}1==Komento.options.config.enable_syntax_highlighting&&a.loadSHBrushes()}b.kmt.tools.addCommentCounter(),Komento.totalCount++},addChildCount:function(c){var d=parseInt(a("."+c).attr("childs"));a("."+c).attr("childs",d+1),a("."+c).exists()&&parseInt(a("li."+c).attr("parentid").split("-")[1])>0&&b.addChildCount(a("."+c).attr("parentid"))},loadMoreComments:function(c){var d,e=parseInt(Komento.options.config.max_comments_per_page);1==Komento.options.config.load_previous?(d=Komento.totalCount-Komento.loadedCount-e,0>d&&(e+=d,d=0)):d=Komento.loadedCount,Komento.ajax("site.views.komento.loadmorecomments",{component:Komento.component,cid:Komento.cid,start:d,limit:e,sort:Komento.sort,contentLink:Komento.contentLink},{success:function(d,f,g){var h=a(d).filter("li");if(1==Komento.options.config.load_previous?b.commentList().prepend(h):b.commentList().append(h),h.highlight(),Komento.loadedCount=f,b.loadMore().removeClass("loading"),1==g){b.loadMore().removeClass("disabled");var i;1==Komento.options.config.load_previous?(i=Komento.totalCount-Komento.loadedCount-e,0>i&&(e+=i,i=0)):i=Komento.loadedCount,b.loadMore().attr("href","#!kmt-start="+i)}else{b.loadMore().hide()}c&&c()},fail:function(){}})},set:function(a){b.item=a.itemset(b.options)},"{deleteButton} click":function(a,c){c.stopPropagation(),b.set(a),b.showDeleteDialog()},"{editButton} click":function(a,c){c.stopPropagation(),b.set(a),a.checkClick()&&(a.checkSwitch()?b.edit(a):b.cancelEdit(a))},"{saveEditButton} click":function(a,c){c.stopPropagation(),b.set(a),b.saveEdit(a)},"{cancelEditButton} click":function(a,c){c.stopPropagation(),b.set(a),b.cancelEdit(a)},"{replyButton} click":function(a,c){c.stopPropagation(),b.set(a),1==Komento.options.konfig.enable_inline_reply?a.checkSwitch()?b.reply():b.cancelReply():b.kmt.form.staticReply(b.item)},"{reportButton} click":function(a,c){c.stopPropagation(),b.set(a),a.checkClick()&&(a.checkSwitch()?b.reportComment(a):b.cancelreportComment(a))},"{publishButton} click":function(a,c){c.stopPropagation(),b.set(a),b.item.childs>0?b.showPublishDialog(a):b.publishComment(a)},"{unpublishButton} click":function(a,c){c.stopPropagation(),b.set(a),b.item.childs>0?b.showUnpublishDialog(a):b.unpublishComment(a)},"{stickButton} click":function(a,c){c.stopPropagation(),b.set(a),a.checkClick()&&(a.checkSwitch()?b.stick(a):b.unstick(a))},"{likesCounter} click":function(a,c){c.stopPropagation(),b.set(a),b.showLikesDialog(a)},"{likeButton} click":function(a,c){c.stopPropagation(),b.set(a),a.checkClick()&&(a.checkSwitch()?b.like(a):b.unlike(a))},"{parentLink} mouseover":function(c){b.set(c),1==Komento.options.config.enable_threaded?a("#"+b.item.parentid).addClass("kmt-highlight"):(b.item.element.mine.parentContainer.show(),0==b.item.element.mine.parentContainer.attr("loaded")&&(b.item.element.mine.parentContainer.html('<img src="'+Komento.options.spinner+'" />'),b.loadParent()))},"{parentLink} mouseout":function(c){b.set(c),1==Komento.options.config.enable_threaded?a("#"+b.item.parentid).removeClass("kmt-highlight"):b.item.element.mine.parentContainer.hide()},"{parentLink} click":function(c){b.set(c);var d=a("."+b.item.parentid);d.highlight()},"{attachmentDelete} click":function(a,c){c.stopPropagation(),b.set(a),b.showAttachmentDeleteDialog(a)},"{attachmentImage} click":function(){},closeDialog:function(){a(".foundryDialog").length>0&&a(".foundryDialog").controller().close()},edit:function(){var c=b.item.mine.find("#"+b.item.commentid+"-edit");0==c.length?Komento.ajax("site.views.komento.getcommentraw",{id:b.item.id},{success:function(c){b.item.element.mine.editButton.text(a.language("COM_KOMENTO_COMMENT_EDIT_CANCEL")).switchOff().enable();var d=b.view.editForm({commentId:b.item.commentid,commentText:c});b.item.element.mine.commentText.after(d),b.item.element.mine.editForm=a(d),b.item.element.mine.editInput=b.item.element.mine.editForm.find(".editInput"),b.item.mine.data("item",b.item),1==Komento.options.config.enable_bbcode&&b.item.element.mine.editInput.markItUp(a.getBBcodeSettings())},fail:function(){b.item.element.mine.editButton.text(a.language("COM_KOMENTO_ERROR"))}}):(c.show(),b.item.element.mine.editButton.text(a.language("COM_KOMENTO_COMMENT_EDIT_CANCEL")).switchOff().enable())},cancelEdit:function(){b.item.element.mine.editButton.text(a.language("COM_KOMENTO_COMMENT_EDIT")).switchOn().enable(),b.item.element.mine.editForm.hide()},saveEdit:function(){Komento.ajax("site.views.komento.editcomment",{id:b.item.id,edittedComment:b.item.element.mine.editInput.val()},{success:function(c,d,e){b.item.element.both.commentText.html(c),1==Komento.options.config.enable_info&&b.item.element.both.commentInfo.text(a.language("COM_KOMENTO_COMMENT_EDITTED_BY",d,e)).show().css("display",""),1==Komento.options.config.enable_syntax_highlighting&&a.loadSHBrushes(),b.cancelEdit()},fail:function(b){a.dialog({content:b})}})},reply:function(){a(".formAlert").hide().text(""),a(b.options["{replyButton}"]).switchOn().find("span").text(a.language("COM_KOMENTO_COMMENT_REPLY")),b.item.element.mine.replyButton.switchOff().find("span").text(a.language("COM_KOMENTO_COMMENT_REPLY_CANCEL")),b.kmt.form.reply(b.item)},cancelReply:function(){a(b.options["{replyButton}"]).switchOn().find("span").text(a.language("COM_KOMENTO_COMMENT_REPLY")),b.kmt.form&&b.kmt.form.cancelReply()},showDeleteDialog:function(){b.item.childs>0?a.dialog({height:150,content:b.view.deleteChilds(!0,{childs:b.item.childs}),afterShow:function(){a(".foundryDialog").find(".delete-affectChild").click(function(){b.deleteComment(1)}),a(".foundryDialog").find(".delete-moveChild").click(function(){b.deleteComment(0)})}}):a.dialog({height:150,content:b.view.deleteSingle(!0),afterShow:function(){a(".foundryDialog").find(".delete-affectChild").click(function(){b.deleteComment(1)})}})},deleteComment:function(c){a(".foundryDialog").find(".kmt-delete-status").show(),Komento.ajax("site.views.komento.deletecomment",{id:b.item.id,affectChild:c},{success:function(){b.closeDialog(),1==c?b.deleteChild(b.item.commentid):b.moveChildUp(b.item.commentid,b.item.parentid),b.item.both.hide("fade",function(){b.item.both.remove()}),b.kmt.tools.deductCommentCounter()},fail:function(){a(".foundryDialog").find(".kmt-delete-status").text(a.language("COM_KOMENTO_ERROR"))}})},deleteChild:function(c){a('li[parentid="'+c+'"]').each(function(){b.deleteChild(a(this).attr("id"))}).hide("fade",function(){a(this).remove()});var d=a('li[parentid="'+c+'"]').length;b.kmt.tools.deductCommentCounter(d)},moveChildUp:function(c,d){a('li[parentid="'+c+'"]').attr("parentid",d).each(function(){a(this).removeClass("kmt-child-"+a(this).attr("depth")).addClass("kmt-child-"+(a(this).attr("depth")-1)),a(this).attr("depth",a(this).attr("depth")-1),b.moveChildUp(a(this).attr("id"))})},reportComment:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"report",action:"add"},{success:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_COMMENT_REPORTED")).switchOff().enable()},fail:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_ERROR"))}})},cancelreportComment:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"report",action:"remove"},{success:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_COMMENT_REPORT")).switchOn().enable()},fail:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_ERROR"))}})},showUnpublishDialog:function(){a.dialog({height:150,content:b.view.unpublishDialog(!0,{childs:b.item.childs}),afterShow:function(){a(".foundryDialog").find(".unpublish-affectChild").click(function(){b.unpublishComment()})}})},unpublishComment:function(){Komento.ajax("site.views.komento.unpublish",{id:b.item.id},{success:function(){b.closeDialog(),b.unpublishChild(b.item.commentid),b.item.both.hide("fade",function(){b.item.both.remove()}),b.kmt.tools.deductCommentCounter()},fail:function(){}})},unpublishChild:function(c){a('li[parentid="'+c+'"]').each(function(){b.unpublishChild(a(this).attr("id"))}).hide("fade",function(){a(this).remove()});var d=a('li[parentid="'+c+'"]').length;b.kmt.tools.deductCommentCounter(d)},showPublishDialog:function(){},publishComment:function(){},publishChild:function(){},stick:function(){Komento.ajax("site.views.komento.stick",{id:b.item.id},{success:function(){b.item.element.mine.stickButton.text(a.language("COM_KOMENTO_COMMENT_UNSTICK")).switchOff().enable(),b.item.mine.addClass("kmt-sticked"),b.kmt.famelist.stickComment(b.item.mine.clone())},fail:function(){b.item.element.mine.stickButton.text(a.language("COM_KOMENTO_ERROR"))}})},unstick:function(){Komento.ajax("site.views.komento.unstick",{id:b.item.id},{success:function(){b.item.element.both.stickButton.text(a.language("COM_KOMENTO_COMMENT_STICK")).switchOn().enable(),b.item.both.removeClass("kmt-sticked"),b.kmt.famelist.unstickComment(b.item.commentid)},fail:function(){b.stickButton.text(a.language("COM_KOMENTO_ERROR"))}})},like:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"likes",action:"add"},{success:function(){b.item.element.both.likeButton.switchOff().enable().find("span").text(a.language("COM_KOMENTO_COMMENT_UNLIKE"));var c=parseInt(b.item.element.mine.likesCounter.find("span").text())+1;b.item.element.both.likesCounter.find("span").text(c)},fail:function(a){b.item.element.both.likesCounter.find("span").text(a)}})},unlike:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"likes",action:"remove"},{success:function(){b.item.element.both.likeButton.switchOn().enable().find("span").text(a.language("COM_KOMENTO_COMMENT_LIKE"));var c=parseInt(b.item.element.mine.likesCounter.find("span").text())-1;b.item.element.both.likesCounter.find("span").text(c)},fail:function(){b.item.element.both.likesCounter.find("span").text(a.language("COM_KOMENTO_ERROR"))}})},showLikesDialog:function(){Komento.ajax("site.views.komento.getLikedUsers",{id:b.item.id},{success:function(b){a.dialog({title:a.language("COM_KOMENTO_COMMENT_PEOPLE_WHO_LIKED_THIS"),content:b})}})},loadParent:function(){var c=a("#"+b.item.parentid);if(0!=c.length){var d=c.find(".kmt-avatar:not(.parentContainer > .kmt-avatar)").clone(),e=c.find(".kmt-author:not(.parentContainer > .kmt-author)").clone(),f=c.find(".kmt-time:not(.parentContainer > .kmt-time)").clone(),g=c.find(".commentText:not(.parentContainer > .commentText)").clone();b.item.element.both.parentContainer.html("").append(d).append(e).append(f).append(g)}else{var h=b.item.parentid.split("-")[1];Komento.ajax("site.views.komento.getcomment",{id:h},{success:function(a){b.item.element.both.parentContainer.html(a)},fail:function(){}})}b.item.element.both.parentContainer.attr("loaded",1)},showAttachmentDeleteDialog:function(c){var d=a(c).parents(".attachmentFile").attr("attachmentid"),e=a(c).parents(".attachmentFile").attr("attachmentname");a.dialog({content:b.view.deleteAttachment(!0,{attachmentname:e}),afterShow:function(){a(".foundryDialog").find(".delete-attachment").click(function(){b.closeDialog(),b.deleteFile(d)}),a(".foundryDialog").find(".delete-attachment-cancel").click(function(){b.closeDialog()})}})},deleteFile:function(a){var c=b.item.id;Komento.ajax("site.views.komento.deleteAttachment",{id:c,attachmentid:a},{success:function(){b.item.element.both.attachmentFile.filter(".file-"+a).remove(),0==b.item.mine.find(".attachmentFile").length&&b.item.element.both.attachmentWrap.remove()},fail:function(c){c='<p class="error">'+c+"</p>",b.item.element.both.attachmentFile.filter(".file-"+a).append(c)}})}}}),b.resolve()})}),Komento.module("sharelinks",function(a){var b=this;a.sharelinks=function(b,c,d,e){this[c].call(a(b),c,d,e)},a.fn.sharelinks=function(b,c){var e=this;if(!e.attr("loaded")){if(e.attr("loaded",1),!b){var b=e.attr("type")}if(!c){var f,g,h;e.attr("url")&&(f=encodeURIComponent(e.attr("url"))),e.attr("title")&&(g=encodeURIComponent(e.attr("title"))),e.attr("content")&&(h=encodeURIComponent(e.attr("content")));var c={url:f,title:g,content:h}}a(document).ready(function(){var d=function(b,c,d){a.sharelinks.cleanup.call(b),b.bind("click",function(){a.sharelinks.popup.call(b,d,c)})};a.sharelinks[b].call(e,b,c,d)})}},a.sharelinks.facebook=function(a,b,c){var f,g,h,i,d=this,e="http://www.facebook.com/sharer.php?s=100";b.url&&(f=b.url),b.title?(g=b.title,b.content&&(h=b.content)):b.content&&(g="Comments",h=b.content),b.image&&(i=b.image),e+="&p[url]="+f+"&p[title]="+g+"&p[summary]="+h+"&p[images]="+i,c(d,e,a)},a.sharelinks.twitter=function(a,b,c){var f,g,d=this,e="http://twitter.com/intent/tweet";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="?url="+f+"&text="+g,c(d,e,a)},a.sharelinks.googleplus=function(a,b,c){var f,d=this,e="http://plus.google.com/share";b.url&&(f=b.url),e+="?url="+f,c(d,e,a)},a.sharelinks.linkedin=function(a,b,c){var f,g,h,d=this,e="http://linkedin.com/shareArticle?mini=true";b.url&&(f=b.url),b.title?(g=b.title,b.content&&(h=b.content)):b.content&&(g=b.content),e+="&url="+f+"&title="+g+"&summary="+h,c(d,e,a)},a.sharelinks.pinterest=function(a,b,c){var f,g,d=this,e="http://pinterest.com/pin/create/button/",h=b.image;b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="?media="+h+"&url="+f+"&description="+g,c(d,e,a)},a.sharelinks.tumblr=function(a,b,c){var f,g,h,d=this,e="http://www.tumblr.com/share/link";b.url&&(f=b.url),b.title?(g=b.title,b.content&&(h=b.content)):b.content&&(g=b.content),e+="?url="+f+"&name="+g+"&description="+h,c(d,e,a)},a.sharelinks.digg=function(a,b,c){var f,g,d=this,e="http://digg.com/submit";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="?url="+f+"&title="+g,c(d,e,a)},a.sharelinks.delicious=function(a,b,c){var f,g,d=this,e="http://delicious.com/post";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="?url="+f+"&title="+g,c(d,e,a)},a.sharelinks.reddit=function(a,b,c){var f,g,d=this,e="http://reddit.com/submit";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="?url="+f+"&title="+g,c(d,e,a)},a.sharelinks.stumbleupon=function(a,b,c){var f,g,d=this,e="http://www.stumbleupon.com/submit";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="?url="+f+"&title="+g,c(d,e,a)},a.sharelinks.indentica=function(a,b,c){var f,g,d=this,e="http://identi.ca/pages?action=bookmarkpopup";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="&url="+f+"&title="+g,c(d,e,a)},a.sharelinks.stumpedia=function(a,b,c){var f,d=this,e="http://www.stumpedia.com/submit";b.url&&(f=b.url),e+="?url="+f,c(d,e,a)},a.sharelinks.technorati=function(a,b,c){var d=this,e="http://technorati.com/faves";b.url&&(add=b.url),e+="?add="+url,c(d,e,a)},a.sharelinks.blogmarks=function(a,b,c){var f,g,d=this,e="http://blogmarks.net/my/new.php?mini=1";b.url&&(f=b.url),b.title?g=b.title:b.content&&(g=b.content),e+="&url="+f+"&title="+g,c(d,e,a)},a.sharelinks.dialog=function(b){Komento.require().library("dialog").done(function(){a.dialog(b)})},a.sharelinks.cleanup=function(){var a=this;a.removeAttr("url").removeAttr("type").removeAttr("title").removeAttr("content").removeAttr("image").removeAttr("commentid").attr("loaded",1)},a.sharelinks.popup=function(a,b){var c="menubar=0,resizable=0,scrollbars=0,";c+="width=660,height=320",window.open(b,"",c)},b.resolve()}),Komento.module("markitup",function($){var module=this;$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;return ctrlKey=shiftKey=altKey=!1,options={id:"",nameSpace:"",root:"",previewInWindow:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,extraSettings),options.root||$("script").each(function(a,b){miuScript=$(b).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])}),this.each(function(){function localize(a,b){return b?a.replace(/("|')~\//g,"$1"+options.root):a.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),options.resizeHandle===!0&&$.browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(a){var d,e,b=$$.height(),c=a.clientY;d=function(a){return $$.css("height",Math.max(20,a.clientY+b-c)+"px"),!1},e=function(){return $("html").unbind("mousemove",d).unbind("mouseup",e),!1},$("html").bind("mousemove",d).bind("mouseup",e)}),footer.append(resizeHandle)),$$.keydown(keyPressed).keyup(keyPressed),$$.bind("insertion",function(a,b){b.target!==!1&&get(),textarea===$.markItUp.focused&&markup(b)}),$$.focus(function(){$.markItUp.focused=this})}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{for(i++,j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu",function(){return !1}).click(function(){return !1}).mousedown(function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).hover(function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})},function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul}function magicMarkups(a){return a?(a=a.toString(),a=a.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(a,b){var c=b.split("|!|");return altKey===!0?void 0!==c[1]?c[1]:c[0]:void 0===c[1]?"":c[0]}),a=a.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(a,b){var c=b.split(":!:");return abort===!0?!1:(value=prompt(c[0],c[1]?c[1]:""),null===value&&(abort=!0),value)})):""}function prepare(a){return $.isFunction(a)&&(a=a(hash)),magicMarkups(a)}function build(a){return openWith=prepare(clicked.openWith),placeHolder=prepare(clicked.placeHolder),replaceWith=prepare(clicked.replaceWith),closeWith=prepare(clicked.closeWith),block=""!==replaceWith?openWith+replaceWith+closeWith:""===selection&&""!==placeHolder?openWith+placeHolder+closeWith:openWith+(a||selection)+closeWith,{block:block,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith}}function markup(a){var b,c,d,e;if(hash=clicked=a,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),ctrlKey===!0&&shiftKey===!0&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),ctrlKey===!0&&shiftKey===!0){for(lines=selection.split(/\r?\n/),c=0,d=lines.length,e=0;d>e;e++){""!==$.trim(lines[e])?($.extend(hash,{line:++c,selection:lines[e]}),lines[e]=build(lines[e]).block):lines[e]=""}string={block:lines.join("\n")},start=caretPosition,b=string.block.length+($.browser.opera?d:0)}else{ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,b-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,b=string.block.length,b-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,b=0,start-=fixIeBug(string.block))}""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,b)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),ctrlKey===!0&&shiftKey===!0&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(a){return $.browser.opera?a.length-a.replace(/\n*/g,"").length:0}function fixIeBug(a){return $.browser.msie?a.length-a.replace(/\r*/g,"").length:0}function insert(a){if(document.selection){var b=document.selection.createRange();b.text=a}else{$$.val($$.val().substring(0,caretPosition)+a+$$.val().substring(caretPosition+selection.length,$$.val().length))}$$.trigger("textChange",$$.val())}function set(a,b){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&0==b){return !1}range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",a),range.moveEnd("character",b),range.select()}else{textarea.setSelectionRange&&textarea.setSelectionRange(a,a+b)}textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection){if(selection=document.selection.createRange().text,$.browser.msie){var a=document.selection.createRange(),b=a.duplicate();for(b.moveToElementText(textarea),caretPosition=-1;b.inRange(a);){b.moveStart("character"),caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart,selection=$$.val().substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){!previewWindow||previewWindow.closed?options.previewInWindow?previewWindow=window.open("","preview",options.previewInWindow):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview()}function refreshPreview(){renderPreview()}function renderPreview(){return""!==options.previewParserPath?$.ajax({type:"POST",url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(a){writeInPreview(localize(a,1))}}):template||$.ajax({url:options.previewTemplatePath,success:function(a){writeInPreview(localize(a,1).replace(/<!-- content -->/g,$$.val()))}}),!1}function writeInPreview(a){if(previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(b){sp=0}previewWindow.document.open(),previewWindow.document.write(a),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}options.previewInWindow&&previewWindow.focus()}function keyPressed(a){if(shiftKey=a.shiftKey,altKey=a.altKey,ctrlKey=a.altKey&&a.ctrlKey?!1:a.ctrlKey,ctrlKey=!1,"keydown"===a.type){if(ctrlKey===!0&&(li=$("a[accesskey="+String.fromCharCode(a.keyCode)+"]",header).parent("li"),0!==li.length)){return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mousedown")},1),!1}if(13===a.keyCode||10===a.keyCode){return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault)}if(9===a.keyCode){return 1==shiftKey||1==ctrlKey||1==altKey?!1:-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),init()})},$.fn.markItUpRemove=function(){return this.each(function(){var a=$(this).unbind().removeClass("markItUpEditor");a.parent("div").parent("div.markItUp").parent("div").replaceWith(a)})},$.markItUp=function(a){var b={target:!1};return $.extend(b,a),b.target?$(b.target).each(function(){$(this).focus(),$(this).trigger("insertion",[b])}):($("textarea").trigger("insertion",[b]),void 0)},module.resolve()}),Komento.module("komento.commenttools",function(a){var b=this;Komento.require().script("komento.commentlist","komento.common","komento.language").library("dialog").view("notifications/new.comment").done(function(){Komento.Controller("CommentTools",{defaults:{"{commentCounter}":".commentCounter","{sortOldest}":".sortOldest a","{sortLatest}":".sortLatest a","{sortButton}":".kmt-sorting a","{adminButton}":".adminMode a","{subscribeEmail}":".subscribeEmail a","{addYours}":".kmt-addyours",view:{newComment:"notifications/new.comment"}}},function(b){return{init:function(){1==Komento.options.acl.read_comment&&1==Komento.options.konfig.enable_ajax_load_list&&b.loadCommentList(),1==Komento.options.config.enable_live_notification&&(b.hasNew=0,b.newCount=0,b.checkNewComment())},loadCommentList:function(){b.reloadComments(Komento.sort)},"{addYours} click":function(){b.kmt.form&&b.kmt.form.loadForm()},"{sortOldest} click":function(a){b.sortButton().checkClick()&&(b.sortButton().removeClass("selected"),a.loading().addClass("selected"),b.reloadComments("oldest"))},"{sortLatest} click":function(a){b.sortButton().checkClick()&&(b.sortButton().removeClass("selected"),a.loading().addClass("selected"),b.reloadComments("latest"))},"{sortLikes} click":function(a){b.sortButton().checkClick()&&(b.sortButton().removeClass("selected"),a.loading().addClass("selected"),b.reloadComments("likes"))},"{adminButton} click":function(){b.reloadComments(Komento.sort,"all")},"{subscribeEmail} click":function(c){a.dialog({content:b.getSubscribeContent(),afterShow:function(){var d=a(".foundryDialog"),e=d.find(".subscribe"),f=d.find(".unsubscribe"),g=d.find(".subscribeName"),h=d.find(".subscribeEmail"),i=d.find(".subscribeUser"),j=d.find(".subscribeError");e.click(function(){if(i.length>0){Komento.ajax("site.views.komento.subscribeuser",{user:i.val(),component:Komento.component,cid:Komento.cid},{success:function(){b.kmt.form&&b.kmt.form.subscribeForm().text(a.language("COM_KOMENTO_FORM_NOTIFICATION_SUBSCRIBED")).addClass("subscribed"),a(".foundryDialog").controller().close()}})}else{if(""==g.val()||""==h.val()){return j.show(),!1}Komento.ajax("site.views.komento.subscribeguest",{name:g.val(),email:h.val(),component:Komento.component,cid:Komento.cid},{success:function(){a(".foundryDialog").controller().close(),c.remove()}})}}),f.click(function(){Komento.ajax("site.views.komento.unsubscribeuser",{user:i.val(),component:Komento.component,cid:Komento.cid},{success:function(){b.kmt.form&&b.kmt.form.subscribeForm().text(a.language("COM_KOMENTO_FORM_NOTIFICATION_UNSUBSCRIBED")).removeClass("subscribed"),a(".foundryDialog").controller().close()}})})}})},getSubscribeContent:function(){var b=a.Deferred();return Komento.ajax("site.views.komento.getsubscribecontent",{component:Komento.component,cid:Komento.cid},{success:function(a){b.resolve(a)}}),b},reloadComments:function(c,d){b.kmt&&b.kmt.commentlist.cancelReply(),a(".commentList").html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_COMMENTS_LOADING")),Komento.ajax("site.views.komento.reloadcomments",{component:Komento.component,cid:Komento.cid,contentLink:Komento.contentLink,options:{sort:c,published:d}},{success:function(d,e,f){Komento.sort=c,Komento.loadedCount=e,Komento.totalCount=f,b.setCommentCounter(e);var g=a(d);a(".commentList").html(g).controller().init(),b.sortButton().enable().doneLoading(),a(".kmt-notification").remove()},fail:function(){a(".commentList").text(a.language("COM_KOMENTO_ERROR"))}})},checkNewComment:function(){var c=Komento.options.config.live_notification_interval?1000*parseInt(Komento.options.config.live_notification_interval):30000;setTimeout(function(){Komento.ajax("site.views.komento.checknewcomment",{component:Komento.component,cid:Komento.cid,total:Komento.totalCount},{success:function(c,d){if(1==c&&d>b.newCount){a(".kmt-notification").remove();var e=b.view.newComment({count:d});e.find(".reloadComments").bind("click",function(){b.kmt.tools.reloadComments(Komento.sort)}),a("body").append(e)}b.newCount=d,b.hasNew=c},fail:function(){},complete:function(){b.kmt.tools.checkNewComment()}})},c)},addCommentCounter:function(){var a=b.commentCounter().text();b.commentCounter().text(parseInt(a)+1)},deductCommentCounter:function(a){void 0===a&&(a=1);var c=b.commentCounter().text();b.commentCounter().text(parseInt(c)-a),Komento.loadedCount-=a,Komento.totalCount-=a},setCommentCounter:function(a){void 0===a&&(a=0),b.commentCounter().text(a)}}}),b.resolve()})}),Komento.module("komento.famelist",function(a){var b=this;Komento.require().library("ui/effect","dialog").image(Komento.options.spinner).script("sharelinks","markitup","komento.common","komento.commentitem","komento.language").view("dialogs/delete.single","dialogs/delete.affectchild","dialogs/unpublish.affectchild","comment/item/edit.form","dialogs/delete.attachment").done(function(){Komento.Controller("FameList",{defaults:{"{commentList}":".kmt-list","{stickList}":".stickList .kmt-list","{loveList}":".loveList .kmt-list","{commentItem}":".kmt-item","{stickItem}":".stickList .kmt-list .kmt-item","{loveItem}":".loveList .kmt-list .kmt-item","{noComment}":".kmt-empty-comment","{loadMore}":".loadMore","{navs}":".navs","{tabs}":".kmt-tabs","{commentText}":".commentText","{commentInfo}":".commentInfo","{commentForm}":".commentForm","{deleteButton}":".deleteButton","{editButton}":".editButton","{saveEditButton}":".saveEditButton","{editForm}":".editForm","{editInput}":".editInput","{replyButton}":".replyButton","{shareBox}":".shareBox","{reportButton}":".reportButton","{statusButton}":".statusButton","{statusOptions}":".statusOptions","{publishButton}":".publishButton","{unpublishButton}":".unpublishButton","{stickButton}":".stickButton","{likeButton}":".likeButton","{likesCounter}":".likesCounter","{parentLink}":".parentLink","{parentContainer}":".parentContainer","{socialButton}":".socialButton",view:{editForm:"comment/item/edit.form",deleteDialog:"dialogs/delete.affectchild",publishDialog:"dialogs/publish.affectchild",unpublishDialog:"dialogs/unpublish.affectchild",deleteAttachment:"dialogs/delete.attachment"}}},function(b){return{init:function(){b.navs().length>0&&b.navs().eq(0).trigger("click")},ajaxinit:function(){b.generateSharelinks()},generateSharelinks:function(){var c=function(){b.socialButton().each(function(b,c){a(c).sharelinks()})};b.generateShortLinks(c)},generateShortLinks:function(c){var d=function(d){b.socialButton().each(function(b,c){if(!a(c).attr("loaded")){var e=a(c).attr("commentid"),f=d+"#kmt"+e;a(c).attr("url",f),a(c).parents(".kmt-share-balloon").find(".short-url").val(f)}}),c&&c()};Komento.shortenLink?d(Komento.shortenLink):a.shortenlink(Komento.contentLink,d)},"{navs} click":function(c){var d=a(c).attr("func"),e=a(c).attr("tab"),f=a("."+e);f.attr("loaded")||(b[d](),("stickList"==e&&"1"!=Komento.options.konfig.enforce_live_stickies||"loveList"==e&&"1"!=Komento.options.konfig.enforce_live_lovies)&&f.attr("loaded",1)),b.tabs().hide(),f.show(),b.navs().removeClass("active"),c.addClass("active")},loadMainList:function(){b.loadComments("main")},loadStickList:function(){1==Komento.options.acl.read_stickies&&1==Komento.options.config.enable_stickies&&1==Komento.options.konfig.enable_ajax_load_stickies&&b.loadComments("stickies")},loadLoveList:function(){1==Komento.options.acl.read_lovies&&1==Komento.options.config.enable_lovies&&1==Komento.options.konfig.enable_ajax_load_lovies&&b.loadComments("lovies")},loadComments:function(c){var d,e,f,g;switch(f=0,c){case"stickies":d=".stickList",e=1,g="default",limit=parseInt(Komento.options.config.max_stickies);break;case"lovies":d=".loveList",e="all",g="love",limit=parseInt(Komento.options.config.max_lovies);break;default:d=".mainList",e="all",g="default",limit=parseInt(Komento.options.config.max_comments_per_page)}a(d).html('<div class="loading"><img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_COMMENTS_LOADING")+"</div>"),Komento.ajax("site.views.komento.loadcomments",{type:c,component:Komento.component,cid:Komento.cid,sticked:e,threaded:f,sort:g,limit:limit,contentLink:Komento.contentLink},{success:function(c){var e=a(c);a(d).html(e),b.ajaxinit()},fail:function(){a(d).text(a.language("COM_KOMENTO_ERROR"))}})},stickComment:function(c){c=a(c),c.children(".kmt-wrap").attr("style","left-margin: 0px !important");var d=c.attr("id").split("-")[1],e=0;0==b.stickItem().length?b.loadStickList():b.stickItem().length<Komento.options.config.max_stickies&&(b.stickItem().each(function(b,f){return a(f).attr("id").split("-")[1]>d?(a(f).before(c),e=1,void 0):void 0}),0==e&&b.stickList().append(a(c)))},unstickComment:function(a){b.stickList().find("#"+a).remove()},set:function(a){b.item=a.itemset(b.options)},"{deleteButton} click":function(a){b.set(a),b.showDeleteDialog()},"{editButton} click":function(a){b.set(a),a.checkClick()&&(a.checkSwitch()?b.edit(a):b.cancelEdit(a))},"{saveEditButton} click":function(a){b.set(a),b.saveEdit(a)},"{replyButton} click":function(a){b.set(a),1==Komento.options.konfig.enable_inline_reply?a.checkSwitch()?b.reply(a):b.cancelReply(a):b.kmt.form.staticReply(b.item.parentid)},"{reportButton} click":function(a){b.set(a),a.checkClick()&&(a.checkSwitch()?b.reportComment(a):b.cancelreportComment(a))},"{unpublishButton} click":function(){b.set(el),b.childs>0?b.showUnpublishDialog(el):b.unpublishComment(el)},"{stickButton} click":function(a){b.set(a),a.checkClick()&&(a.checkSwitch()?b.stick(a):b.unstick(a))},"{likesCounter} click":function(a){b.set(a),b.showLikesDialog()},"{likeButton} click":function(a){b.set(a),a.checkClick()&&(a.checkSwitch()?b.like(a):b.unlike(a))},"{parentLink} mouseover":function(c){b.set(c),1==Komento.options.config.enable_threaded?a("#"+b.item.parentid).addClass("kmt-highlight"):(b.item.element.mine.parentContainer.show(),0==b.item.element.mine.parentContainer.attr("loaded")&&(b.item.element.mine.parentContainer.html('<img src="'+Komento.options.spinner+'" />'),b.loadParent()))},"{parentLink} mouseout":function(c){b.set(c),1==Komento.options.config.enable_threaded?a("#"+b.item.parentid).removeClass("kmt-highlight"):b.item.element.mine.parentContainer.hide()},"{parentLink} click":function(c){b.set(c);var d=a("."+b.item.parentid);d.highlight()},"{attachmentDelete} click":function(a){b.set(a),b.showAttachmentDeleteDialog(a)},closeDialog:function(){a(".foundryDialog").length>0&&a(".foundryDialog").controller().close()},edit:function(){var c=b.item.mine.find("#"+b.item.commentid+"-edit");0==c.length?Komento.ajax("site.views.komento.getcommentraw",{id:b.item.id},{success:function(c){b.item.element.mine.editButton.text(a.language("COM_KOMENTO_COMMENT_EDIT_CANCEL")).switchOff().enable();var d=b.view.editForm({commentId:b.item.commentid,commentText:c});b.item.element.mine.commentText.after(d),b.item.element.mine.editForm=a(d),b.item.element.mine.editInput=b.item.element.mine.editForm.find(".editInput"),b.item.mine.data("item",b.item),1==Komento.options.config.enable_bbcode&&b.item.element.mine.editInput.markItUp(a.getBBcodeSettings())},fail:function(){b.item.element.mine.editButton.text(a.language("COM_KOMENTO_ERROR"))}}):(c.show(),b.item.element.mine.editButton.text(a.language("COM_KOMENTO_COMMENT_EDIT_CANCEL")).switchOff().enable())},cancelEdit:function(){b.item.element.mine.editButton.text(a.language("COM_KOMENTO_COMMENT_EDIT")).switchOn().enable(),b.item.element.mine.editForm.hide()},saveEdit:function(){Komento.ajax("site.views.komento.editcomment",{id:b.item.id,edittedComment:b.item.element.mine.editInput.val()},{success:function(c,d,e){b.item.element.both.commentText.html(c),b.item.element.both.commentInfo.text(a.language("COM_KOMENTO_COMMENT_EDITTED_BY",d,e)).show(),1==Komento.options.config.enable_syntax_highlighting&&a.loadSHBrushes(),b.cancelEdit()},fail:function(){a.dialog({content:message})}})},reply:function(){a(".commentForm");a(".formAlert").hide().text(""),a(b.options["{replyButton}"]).switchOn().find("span").text(a.language("COM_KOMENTO_COMMENT_REPLY")),b.item.element.mine.replyButton.switchOff().find("span").text(a.language("COM_KOMENTO_COMMENT_REPLY_CANCEL")),b.kmt.form.reply(b.item)},cancelReply:function(){a(b.options["{replyButton}"]).switchOn().find("span").text(a.language("COM_KOMENTO_COMMENT_REPLY")),b.kmt.form.cancelReply()},showDeleteDialog:function(){a.dialog({height:150,content:b.view.deleteDialog(!0,{childs:b.childs}),afterShow:function(){a(".foundryDialog").find(".delete-affectChild").click(function(){b.deleteComment(1)}),a(".foundryDialog").find(".delete-moveChild").click(function(){b.deleteComment(0)})}})},deleteComment:function(c){a(".foundryDialog").find(".kmt-delete-status").show(),Komento.ajax("site.views.komento.deletecomment",{id:b.item.id,affectChild:c},{success:function(){b.closeDialog(),c?b.deleteChild(b.item.id):b.moveChildUp(b.item.id,b.item.parentid),b.item.both.hide("fade",function(){b.item.both.remove()})},fail:function(){a(".foundryDialog").find(".kmt-delete-status").text(a.language("COM_KOMENTO_ERROR"))}})},deleteChild:function(c){a('li[parentid="'+c+'"]').each(function(){b.deleteChild(a(this).attr("id"))}).hide("fade",function(){a(this).remove()})},moveChildUp:function(c,d){a('li[parentid="'+c+'"]').attr("parentid",d).each(function(){a(this).removeClass("kmt-child-"+a(this).attr("depth")).addClass("kmt-child-"+(a(this).attr("depth")-1)),a(this).attr("depth",a(this).attr("depth")-1),b.moveChildUp(a(this).attr("id"))})},reportComment:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"report",action:"add"},{success:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_COMMENT_REPORTED")).switchOff().enable()},fail:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_ERROR"))}})},cancelreportComment:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"report",action:"remove"},{success:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_COMMENT_REPORT")).switchOn().enable()},fail:function(){b.item.element.both.reportButton.text(a.language("COM_KOMENTO_ERROR"))}})},showUnpublishDialog:function(){a.dialog({height:150,content:b.view.unpublishDialog(!0,{childs:b.childs}),afterShow:function(){a(".foundryDialog").find(".unpublish-affectChild").click(function(){b.unpublishComment()})}})},unpublishComment:function(){Komento.ajax("site.views.komento.unpublish",{id:b.item.id},{success:function(){b.closeDialog(),b.unpublishChild(b.item.id),b.item.both.hide("fade",function(){b.item.both.remove()})},fail:function(){}})},unpublishChild:function(c){a('li[parentid="'+c+'"]').each(function(){b.unpublishChild(a(this).attr("id"))}).hide("fade",function(){a(this).remove()})},stick:function(){Komento.ajax("site.views.komento.stick",{id:b.item.id},{success:function(){b.item.element.mine.stickButton.text(a.language("COM_KOMENTO_COMMENT_UNSTICK")).switchOff().enable(),b.item.mine.addClass("kmt-sticked"),b.kmt.famelist.stickComment(b.item.mine.clone())},fail:function(){b.item.element.mine.stickButton.text(a.language("COM_KOMENTO_ERROR"))}})},unstick:function(){Komento.ajax("site.views.komento.unstick",{id:b.item.id},{success:function(){b.item.element.both.stickButton.text(a.language("COM_KOMENTO_COMMENT_STICK")).switchOn().enable(),b.item.both.removeClass("kmt-sticked"),b.unstickComment(b.item.commentid)},fail:function(){b.stickButton.text(a.language("COM_KOMENTO_ERROR"))}})},like:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"likes",action:"add"},{success:function(){b.item.element.both.likeButton.switchOff().enable().find("span").text(a.language("COM_KOMENTO_COMMENT_UNLIKE"));var c=parseInt(b.item.element.mine.likesCounter.find("span").text())+1;b.item.element.both.likesCounter.find("span").text(c)},fail:function(a){b.item.element.both.likesCounter.find("span").text(a)}})},unlike:function(){Komento.ajax("site.views.komento.action",{id:b.item.id,type:"likes",action:"remove"},{success:function(){b.item.element.both.likeButton.switchOn().enable().find("span").text(a.language("COM_KOMENTO_COMMENT_LIKE"));var c=parseInt(b.item.element.mine.likesCounter.find("span").text())-1;b.item.element.both.likesCounter.find("span").text(c)},fail:function(){b.item.element.both.likesCounter.find("span").text(a.language("COM_KOMENTO_ERROR"))}})},showLikesDialog:function(){Komento.ajax("site.views.komento.getLikedUsers",{id:b.item.id},{success:function(b){a.dialog({title:a.language("COM_KOMENTO_COMMENT_PEOPLE_WHO_LIKED_THIS"),content:b})}})},loadParent:function(){var c=a("#"+b.item.parentid);if(0!=c.length){var d=c.find(".kmt-avatar:not(.parentContainer > .kmt-avatar)").clone(),e=c.find(".kmt-author:not(.parentContainer > .kmt-author)").clone(),f=c.find(".kmt-time:not(.parentContainer > .kmt-time)").clone(),g=c.find(".commentText:not(.parentContainer > .commentText)").clone();b.item.element.both.parentContainer.html("").append(d).append(e).append(f).append(g)}else{var h=b.item.parentid.split("-")[1];Komento.ajax("site.views.komento.getcomment",{id:h},{success:function(a){b.item.element.both.parentContainer.html(a)},fail:function(){}})}b.item.element.both.parentContainer.attr("loaded",1)},showAttachmentDeleteDialog:function(c){var d=a(c).parents(".attachmentFile").attr("attachmentid"),e=a(c).parents(".attachmentFile").attr("attachmentname");a.dialog({height:150,content:b.view.deleteAttachment(!0,{attachmentname:e}),afterShow:function(){a(".foundryDialog").find(".delete-attachment").click(function(){b.closeDialog(),b.deleteFile(d)}),a(".foundryDialog").find(".delete-attachment-cancel").click(function(){b.closeDialog()})}})},deleteFile:function(a){var c=b.item.id;Komento.ajax("site.views.komento.deleteAttachment",{id:c,attachmentid:a},{success:function(){b.item.element.both.attachmentFile.filter(".file-"+a).remove(),0==b.item.mine.find(".attachmentFile").length&&b.item.element.both.attachmentWrap.remove()},fail:function(c){c='<p class="error">'+c+"</p>",b.item.element.both.attachmentFile.filter(".file-"+a).append(c)}})}}}),b.resolve()})}),Komento.module("komento.insertvideo",function(a){var b=this;Komento.Controller("InsertVideo",{defaults:{caretPosition:"",element:"","{videoUrl}":".videoUrl","{insertVideo}":".insertVideo","{cancelVideo}":".cancelVideo"}},function(b){return{init:function(){},"{insertVideo} click":function(){b.addVideoLink()},"{cancelVideo} click":function(){b.closeDialog()},"{videoUrl} keypress":function(a,c){13==c.keyCode&&(c.preventDefault(),b.addVideoLink())},addVideoLink:function(){var c=b.videoUrl().val();if(""!==c){var d=a("#"+b.options.element),e="[video]"+c+"[/video]",f=d.val();if(0==b.options.caretPosition){return d.val(e+f),a(".commentInput").focus(),a(".commentForm").controller().commentLengthCheck(),b.closeDialog(),!0}var f=d.val();d.val(f.substring(0,b.options.caretPosition)+e+f.substring(b.options.caretPosition,f.length)),a(".commentInput").focus(),a(".commentForm").controller().commentLengthCheck(),b.closeDialog()}},closeDialog:function(){a(".foundryDialog").controller().close()}}}),b.resolve()}),Komento.ready(function(a){Komento.options.responsive&&a(function(){a("#section-kmt").responsive([{at:600,switchTo:"w600"},{at:400,switchTo:"w600 w320"}])})}),Komento.module("komento.profile",function(a){var b=this;Komento.require().script("komento.common").done(function(){Komento.Controller("Profile",{defaults:{uid:0,"{navComments}":".navComments","{navActivities}":".navActivities","{navPopular}":".navPopular","{navSticked}":".navSticked","{navs}":".navs","{tabs}":".tabs","{commentsTab}":"#kmt-comments","{activitiesTab}":"#kmt-activities","{popularTab}":"#kmt-popular","{stickedTab}":"#kmt-sticked","{loadMore}":".loadMore"}},function(b){return{init:function(){b.navs(":eq(0)").trigger("click"),b.loaded={},b.total={}},"{navs} click":function(c){var d=a(c).attr("func"),e=a(c).attr("tab");b.tabs().hide(),a("#"+e).show(),b.navs().removeClass("active"),c.addClass("active"),b[d]&&b[d]()},"{loadMore} click":function(a){if(a.checkClick()){var c=a.parents(".tabs").attr("id").substring(4),d="loadMore"+c.charAt(0).toUpperCase()+c.slice(1);b[d]()}},loadComments:function(){b.commentsTab().attr("loaded")||(b.commentsTab().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getcomments",{uid:b.options.uid},{success:function(a,c,d){b.commentsTab().html(a),b.commentsTab().attr("loaded",!0),b.loaded.comments=parseInt(c),b.total.comments=parseInt(d)},fail:function(){}}))},loadMoreComments:function(){Komento.ajax("site.views.profile.getcomments",{loadMore:1,uid:b.options.uid,start:b.loaded.comments},{success:function(a,c){b.commentsTab().children("ul").append(a),b.loaded.comments+=parseInt(c),b.loaded.comments>=b.total.comments&&b.hideLoadMore("comments"),b.loadMore().enable()},fail:function(){}})},loadActivities:function(){b.activitiesTab().attr("loaded")||(b.activitiesTab().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getactivities",{uid:b.options.uid},{success:function(a,c,d){b.activitiesTab().html(a),b.activitiesTab().attr("loaded",!0),b.loaded.activities=parseInt(c),b.total.activities=parseInt(d)},fail:function(){}}))},loadMoreActivities:function(){Komento.ajax("site.views.profile.getactivities",{loadMore:1,uid:b.options.uid,start:b.loaded.activities},{success:function(a,c){b.activitiesTab().children("ul").append(a),b.loaded.activities+=parseInt(c),b.loaded.activities>=b.total.activities&&b.hideLoadMore("activities"),b.loadMore().enable()},fail:function(){}})},loadPopular:function(){b.popularTab().attr("loaded")||(b.popularTab().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getpopularcomments",{uid:b.options.uid},{success:function(a,c,d){b.popularTab().html(a),b.popularTab().attr("loaded",!0),b.loaded.popular=parseInt(c),b.total.popular=parseInt(d)},fail:function(){}}))},loadMorePopular:function(){Komento.ajax("site.views.profile.getpopularcomments",{loadMore:1,uid:b.options.uid,start:b.loaded.popular},{success:function(a,c){b.popularTab().children("ul").append(a),b.loaded.popular+=parseInt(c),b.loaded.popular>=b.total.popular&&b.hideLoadMore("popular"),b.loadMore().enable()},fail:function(){}})},loadSticked:function(){b.stickedTab().attr("loaded")||(b.stickedTab().html('<img src="'+Komento.options.spinner+'" />'+a.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getstickedcomments",{uid:b.options.uid},{success:function(a,c,d){b.stickedTab().html(a),b.stickedTab().attr("loaded",!0),b.loaded.sticked=parseInt(c),b.total.sticked=parseInt(d)},fail:function(){}}))},loadMoreSticked:function(){Komento.ajax("site.views.profile.getstickedcomments",{loadMore:1,uid:b.options.uid,start:b.loaded.sticked},{success:function(a,c){b.stickedTab().children("ul").append(a),b.loaded.sticked+=parseInt(c),b.loaded.sticked>=b.total.sticked&&b.hideLoadMore("sticked"),b.loadMore().enable()},fail:function(){}})},hideLoadMore:function(b){a("#kmt-"+b).find(".loadMore").remove()}}}),b.resolve()})}),Komento.module("komento.ratings",function(){var b=this;Komento.require().library("ui/stars").done(function(){Komento.Controller("Ratings.Item",{defaults:{"{input}":"[data-rating-value]"}},function(a){return{init:function(){a.element.stars({split:2,disabled:!0,showTitles:!0})}}}),Komento.Controller("Ratings.Form",{defaults:{"{input}":"[data-rating-value]","{cancel}":".ui-stars-cancel"}},function(a){return{init:function(){a.element.stars({split:2,disabled:!1,callback:function(b,c,d){a.input().val(d)}})},"{self} clear":function(){a.cancel().trigger("click.stars")}}}),b.resolve()})}),Komento.module("komento.upload",function(a){var b=this;Komento.require().view("comment/form/uploadrow").library("plupload").done(function(){Komento.Controller("UploadForm",{defaults:{uploadUrl:a.indexUrl+"?option=com_komento&controller=file&task=upload&component="+Komento.component,uploadedId:[],"{uploader}":".uploaderForm","{uploadButton}":".uploadButton","{uploadArea}":".uploadArea","{uploadQueue}":".uploadQueue","{queueHeader}":".queueHeader","{queueRow}":".queueRow","{dragDrop}":".dragDrop","{removeFile}":".removeFile","{fileCounter}":".fileCounter",view:{uploadrow:"comment/form/uploadrow"}}},function(b){return{init:function(){b.uploader().implement("plupload",{settings:{url:b.options.uploadUrl,drop_element:"uploadArea",max_file_size:Komento.options.config.upload_max_size+"mb",filters:[{title:"Allowed File Type",extensions:Komento.options.config.upload_allowed_extension}]},"{uploader}":".uploaderForm","{uploadButton}":".uploadButton"},function(){b.plupload=this.plupload,"html5"==b.plupload.runtime&&b.enableDragDrop()})},"{uploader} FilesAdded":function(a,c,d,e){b.addFiles(e)},"{uploader} UploadComplete":function(){a(".queueRow").each(function(c,d){b.removeRow(a(d).attr("id"))}),b.kmt.form.postComment()},"{uploader} FileUploaded":function(c,d,e,f,g){return 1==g.status&&b.options.uploadedId.push(g.id),"notallowed"==g.status?(b.plupload.stop(),b.kmt.form.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_UPLOAD_NOT_ALLOWED")),void 0):"exceedfilesize"==g.status?(b.plupload.stop(),b.kmt.form.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_SIZE",Komento.options.config.upload_max_size+"mb")),void 0):void 0},"{uploader} QueueChanged":function(a,c,d){b.fileCounter().text(d.files.length)},"{uploader} Error":function(c,d,e,f){switch(b.kmt.form.clearNotification(),f.code){case -600:b.kmt.form.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_SIZE",Komento.options.config.upload_max_size+"mb"));break;case -601:b.kmt.form.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_FILE_EXTENSION",Komento.options.config.upload_allowed_extension))}},"{removeFile} click":function(a){var c=a.parents(".queueRow").attr("id");b.removeRow(c)},enableDragDrop:function(){b.dragDrop().show()},startUpload:function(){b.plupload.files.length>0?b.plupload.start():b.kmt.form.postComment()},addFiles:function(c){a.each(c,function(c,d){if(b.kmt.form.clearNotification(),b.plupload.files.length>Komento.options.config.upload_max_file){return b.plupload.removeFile(d),b.kmt.form.errorNotification(a.language("COM_KOMENTO_FORM_NOTIFICATION_MAX_FILE_ITEM",Komento.options.config.upload_max_file)),!0}if(1!=d.status){return !0}var e=parseInt(d.size/1024),f=b.view.uploadrow({id:d.id,filename:d.name,size:e});f.data("fileitem",d),b.uploadQueue().append(f)})},removeRow:function(c){a("#"+c).remove();var d=b.plupload.getFile(c);b.plupload.removeFile(d)}}}),b.resolve()})}),Komento.module("location",function(a){var b=this;Komento.require().library("ui/autocomplete").done(function(){Komento.Controller("Location.Form.Simple",{defaultOptions:{language:"en",initialLocation:null,"{locationInput}":".locationInput","{locationLatitude}":".locationLatitude","{locationLongitude}":".locationLongitude","{autoDetectButton}":".autoDetectButton"}},function(b){return{init:function(){b.locationInput().val(a.language("COM_KOMENTO_COMMENT_WHERE_ARE_YOU")),b.locationLongitude().val(""),b.locationLatitude().val(""),b.locationInput().one("focus",function(){b.locationInput().val("")});var c=a.uid("ext");window[c]=function(){a.___GoogleMaps.resolve()},a.___GoogleMaps||(a.___GoogleMaps=a.Deferred(),void 0===window.google||void 0===window.google.maps?Komento.require().script({prefetch:!1},"https://maps.googleapis.com/maps/api/scripts?sensor=true&language="+b.options.language+"&callback="+c):a.___GoogleMaps.resolve()),a.___GoogleMaps.done(function(){b._init()})},_init:function(){b.geocoder=new google.maps.Geocoder,b.hasGeolocation=void 0!==navigator.geolocation,b.hasGeolocation?b.autoDetectButton().show():b.autoDetectButton().remove(),b.locationInput().autocomplete({delay:300,minLength:0,source:b.retrieveSuggestions,select:function(a,c){b.locationInput().autocomplete("close"),b.setLocation(c.item.location)}}).prop("disabled",!1),b.locationInput().addClass("location-suggestion");var c=a.trim(b.options.initialLocation);c&&b.getLocationByAddress(c,function(a){b.setLocation(a[0])}),b.busy(!1)},busy:function(a){b.locationInput().toggleClass("loading",a)},getUserLocations:function(a){b.getLocationAutomatically(function(c){b.userLocations=b.buildDataset(c),a&&a(c)})},getLocationByAddress:function(a,c){b.geocoder.geocode({address:a},c)},getLocationByCoords:function(a,c,d){b.geocoder.geocode({location:new google.maps.LatLng(a,c)},d)},getLocationAutomatically:function(a,c){return navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(c){b.getLocationByCoords(c.coords.latitude,c.coords.longitude,a)},c),void 0):c("ERRCODE","Browser does not support geolocation or do not have permission to retrieve location data.")},setLocation:function(a){a&&(b.locationResolved=!0,b.lastResolvedLocation=a,b.locationInput().val(a.formatted_address),b.locationLatitude().val(a.geometry.location.lat()),b.locationLongitude().val(a.geometry.location.lng()))},removeLocation:function(){b.locationResolved=!1,b.locationInput().val(""),b.locationLatitude().val(""),b.locationLongitude().val("")},buildDataset:function(b){var c=a.map(b,function(a){return{label:a.formatted_address,value:a.formatted_address,location:a}});return c},retrieveSuggestions:function(a,c){b.busy(!0);var d=a.term,e=function(a){c(a),b.busy(!1)};""==d?e(b.userLocations||[]):b.getLocationByAddress(d,function(a){e(b.buildDataset(a))})},suggestUserLocations:function(){b.hasGeolocation&&b.userLocations&&(b.removeLocation(),b.locationInput().autocomplete("search","")),b.autoDetectButton().text(a.language("COM_KOMENTO_FORM_LOCATION_AUTODETECT")),b.busy(!1)},"{locationInput} blur":function(){setTimeout(function(){var c=a.trim(b.locationInput().val());""==c?b.removeLocation():b.locationResolved?c!=b.lastResolvedLocation.formatted_address&&b.setLocation(b.lastResolvedLocation):b.removeLocation()},250)},"{autoDetectButton} click":function(){b.busy(!0),b.autoDetectButton().text(a.language("COM_KOMENTO_FORM_LOCATION_DETECTING")),b.hasGeolocation&&!b.userLocations?b.getUserLocations(b.suggestUserLocations):b.suggestUserLocations()},"{locationInput} keypress":function(a){a.keypress(function(a){return 13==a.which?!1:void 0})}}}),b.resolve()})}),Komento.module("migrator.actions",function(a){var b=this;Komento.require().script("admin.language","komento.common").done(function(){Komento.Controller("Migrator.Actions",{defaults:{"{migrateButton}":".migrateButton","{deleteButton}":".deleteButton"}},function(b){return{init:function(){b.progress=b.element.find(".migratorProgress"),b.migrator=b.element.find(".migratorTable")},"{migrateButton} click":function(a){a.checkClick()&&b.migrateStart()},migrateStart:function(){b.progress.controller().migratedComments().text("0"),b.progress.controller().progressBar().width("0%"),b.progress.controller().progressPercentage().text("0"),b.progress.controller().progressStatus().html('<img src="'+Komento.options.spinner+'" /> Migrating...'),b.migrator.controller().getStatistic()},migrateComplete:function(){b.progress.controller().progressStatus().text(a.language("COM_KOMENTO_MIGRATORS_PROGRESS_DONE")),b.progress.controller().log(a.language("COM_KOMENTO_MIGRATORS_LOG_COMPLETE")),b.migrateButton().enable()}}}),b.resolve()})}),Komento.module("migrator.common",function(a){var b=this;Komento.Controller("Migrator.Common",{defaults:{"{categoriesList}":"#category","{componentsList}":"#components","{publishingState}":"#publishingState","{migrateLikes}":"#migrateLikes"}},function(b){return{init:function(){b.migrationType=b.element.attr("migration-type"),b.migratorType=b.element.attr("migrator-type"),b.progress=b.element.find(".migratorProgress"),b.actions=b.element.parents(".tab")},getStatistic:function(){var c,d;switch(b.migrationType){case"component":d="components",c=b.componentsList().val();break;case"article":d="categories",c=b.categoriesList().val();break;case"custom":d="data",c=a(".migrator-custom-data").controller().getData()}var e={};e[d]=c,Komento.ajax("admin.views.migrators.getmigrator",{type:b.migratorType,"function":"getstatistic",params:e},{success:function(a,c){b.progress.controller().setTotalPosts(a.length),b.progress.controller().setTotalComments(c),c>0&&("custom"==b.migratorType?b.migrateCustom(e,0,c):b.migrate(a,0,a[0]))},log:function(a){b.progress.controller().log(a)}})},migrate:function(a,c,d){if(void 0===d){return b.actions.controller().migrateComplete(),void 0}switch(b.migrationType){case"article":var e=d;d={component:b.migratorType,cid:e}}var f=b.publishingState().val(),g=b.migrateLikes().is(":checked")?1:0;Komento.ajax("admin.views.migrators.getmigrator",{type:b.migratorType,"function":"migrate",params:{component:d.component,cid:d.cid,publishingState:f,migrateLikes:g}},{success:function(){b.migrate(a,c+1,a[c+1])},fail:function(a){b.progress.controller().log("error: "+a)},update:function(a){b.progress.controller().updateMigratedComments(a)},log:function(a){b.progress.controller().log(a)}})},migrateCustom:function(a,c,d){return c>=d?(b.actions.controller().migrateComplete(),void 0):(a.data.start=c,Komento.ajax("admin.views.migrators.getmigrator",{type:b.migratorType,"function":"migrate",params:a},{success:function(c){b.migrateCustom(a,c,d)},fail:function(a){b.progress.controller().log("error: "+a)},update:function(a){b.progress.controller().updateMigratedComments(a)},log:function(a){b.progress.controller().log(a)}}),void 0)}}}),b.resolve()}),Komento.module("migrator.custom",function(a){var b=this;Komento.Controller("Migrator.Custom",{defaults:{"{migrateTable}":"#migrate-table","{componentFilter}":"#migrate-component-filter","{tableColumns}":".table-columns","{cycleAmount}":"#migrate-cycle"}},function(b){return{init:function(){b.loadTableColumns()},"{migrateTable} change":function(){b.loadTableColumns()},loadTableColumns:function(){var c=b.migrateTable().val(),d={tableName:c};Komento.ajax("admin.views.migrators.getmigrator",{type:"custom","function":"getColumns",params:d},{success:function(c){b.tableColumns().each(function(b,d){var e=c;a(d).data("required")||(e='<option value="kmt-none">none</option>'+c),a(d).html(e)})}})},getData:function(){var c={};return c.table=b.migrateTable().val(),b.tableColumns().each(function(b,d){var e=a(d).attr("id").slice(15);c[e]=a(d).val()}),c.componentFilter=b.componentFilter().val(),c.cycle=b.cycleAmount().val(),c}}}),b.resolve()}),Komento.module("migrator.progress",function(){var b=this;Komento.require().script("admin.language","komento.common").done(function(){Komento.Controller("Migrator.Progress",{defaults:{"{progressBar}":".progressBar","{progressStatus}":".progressStatus","{progressPercentage}":".progressPercentage","{logList}":".logList","{clearLog}":".clearLog","{totalComments}":".totalComments","{totalPosts}":".totalPosts","{migratedComments}":".migratedComments"}},function(a){return{init:function(){},"{clearLog} click":function(){a.logList().html("")},setTotalPosts:function(b){a.totalPosts().text(b)},setTotalComments:function(b){a.totalComments().text(b)},updateMigratedComments:function(b){var c=a.migratedComments().text(),d=parseInt(c)+parseInt(b);a.migratedComments().text(d);var e=parseInt(a.totalComments().eq(0).text()),f=Math.ceil(d/e*100);a.progressBar().animate({width:f.toString()+"%"}),a.progressPercentage().text(f)},log:function(b){var c=new Date,d=c.getHours()>9?c.getHours():"0"+c.getHours(),e=c.getMinutes()>9?c.getMinutes():"0"+c.getMinutes(),f=c.getSeconds()>9?c.getSeconds():"0"+c.getSeconds(),g="["+d+":"+e+":"+f+"]",h="<li>"+g+" "+b+"</li>",i=a.logList()[0].scrollHeight;a.logList().append(h).scrollTop(i)}}}),b.resolve()})})});