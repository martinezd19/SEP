!function(f,e,h){"function"!=typeof Object.create&&(Object.create=function(d){function c(){}return c.prototype=d,new c});var g={init:function(i,b){var a=this;a.elem=b,a.$elem=f(b),b.H5Form=a,a.options=f.extend({},f.fn.h5f.options,i),a.field=e.createElement("input"),a.checkSupport(a),"form"===b.nodeName.toLowerCase()&&a.bindWithForm(a.elem,a.$elem)},bindWithForm:function(i,c){var n=this,m=!!c.attr("novalidate"),l=i.elements,k=l.length;for("onSubmit"===n.options.formValidationEvent&&c.on("submit",function(b){var d=this.H5Form.donotValidate!=h?this.H5Form.donotValidate:!1;d||m||n.validateForm(n)?c.find(":input").each(function(){n.placeholder(n,this,"submit")}):(b.preventDefault(),this.donotValidate=!1)}),c.on("focusout focusin",function(b){n.placeholder(n,b.target,b.type)}),c.on("focusout change",n.validateField),c.find("fieldset").on("change",function(){n.validateField(this)}),n.browser.isFormnovalidateNative||c.find(":submit[formnovalidate]").on("click",function(){n.donotValidate=!0});k--;){var j=l[k];n.polyfill(j),n.autofocus(n,j)}},polyfill:function(d){if("form"===d.nodeName.toLowerCase()){return !0}var c=d.form.H5Form;c.placeholder(c,d),c.numberType(c,d)},checkSupport:function(b){b.browser={},b.browser.isRequiredNative=!!("required" in b.field),b.browser.isPatternNative=!!("pattern" in b.field),b.browser.isPlaceholderNative=!!("placeholder" in b.field),b.browser.isAutofocusNative=!!("autofocus" in b.field),b.browser.isFormnovalidateNative=!!("formnovalidate" in b.field),b.field.setAttribute("type","email"),b.browser.isEmailNative="email"==b.field.type,b.field.setAttribute("type","url"),b.browser.isUrlNative="url"==b.field.type,b.field.setAttribute("type","number"),b.browser.isNumberNative="number"==b.field.type,b.field.setAttribute("type","range"),b.browser.isRangeNative="range"==b.field.type},validateForm:function(){var j=this,i=j.elem,o=i.elements,n=o.length,m=!0;i.isValid=!0;for(var l=0;n>l;l++){var k=o[l];k.isRequired=!!k.required,k.isDisabled=!!k.disabled,k.isDisabled||(m=j.validateField(k),i.isValid&&!m&&j.setFocusOn(k),i.isValid=m&&i.isValid)}return j.options.doRenderMessage&&j.renderErrorMessages(j,i),i.isValid},validateField:function(a){var n=a.target||a;if(n.form===h){return null}var m=n.form.H5Form,l=f(n),k=!1,j=!!f(n).attr("required");!!l.attr("disabled");if(n.isDisabled||(k=!m.browser.isRequiredNative&&j&&m.isValueMissing(m,n),isPatternMismatched=!m.browser.isPatternNative&&m.matchPattern(m,n)),n.validityState={valueMissing:k,patterMismatch:isPatternMismatched,valid:n.isDisabled||!(k||isPatternMismatched)},m.browser.isRequiredNative||(n.validityState.valueMissing?l.addClass(m.options.requiredClass):l.removeClass(m.options.requiredClass)),m.browser.isPatternNative||(n.validityState.patterMismatch?l.addClass(m.options.patternClass):l.removeClass(m.options.patternClass)),n.validityState.valid){l.removeClass(m.options.invalidClass);var c=m.findLabel(l);c.removeClass(m.options.invalidClass)}else{l.addClass(m.options.invalidClass);var c=m.findLabel(l);c.addClass(m.options.invalidClass)}return n.validityState.valid},isValueMissing:function(r,q){var p=f(q),o=/^submit$/i,n=p.val(),m=q.type!==h?q.type:q.tagName.toLowerCase(),c=/^(checkbox|radio|fieldset)$/i;if(c.test(m)||o.test(m)){if(c.test(m)){if("checkbox"===m){return !p.is(":checked")}var b;b="fieldset"===m?p.find("input"):e.getElementsByName(q.name);for(var a=0;a<b.length;a++){if(f(b[a]).is(":checked")){return !1}}return !0}}else{if(""===n){return !0}if(!r.browser.isPlaceholderNative&&p.hasClass(r.options.placeholderClass)){return !0}}return !1},matchPattern:function(a,p){var o=f(p),n=!a.browser.isPlaceholderNative&&o.attr("placeholder")&&o.hasClass(a.options.placeholderClass)?"":o.attr("value"),m=o.attr("pattern"),l=o.attr("type");if(""!==n){if("email"===l){var k=!0;if(o.attr("multiple")===h){return !a.options.emailPatt.test(n)}n=n.split(a.options.mutipleDelimiter);for(var c=0;c<n.length;c++){if(k=a.options.emailPatt.test(n[c].replace(/[ ]*/g,"")),!k){return !0}}}else{if("url"===l){return !a.options.urlPatt.test(n)}if("text"===l&&m!==h){return usrPatt=new RegExp("^(?:"+m+")$"),!usrPatt.test(n)}}}return !1},placeholder:function(r,q,p){var o=f(q),n={placeholder:o.attr("placeholder")},m=/^(focusin|submit)$/i,l=/^(input|textarea)$/i,c=/^password$/i,a=r.browser.isPlaceholderNative;a||!l.test(q.nodeName)||c.test(q.type)||n.placeholder===h||(""!==q.value||m.test(p)?q.value===n.placeholder&&m.test(p)&&(q.value="",o.removeClass(r.options.placeholderClass)):(q.value=n.placeholder,o.addClass(r.options.placeholderClass)))},numberType:function(v,u){var t=f(u);if(node=/^input$/i,type=t.attr("type"),node.test(u.nodeName)&&("number"==type&&!v.browser.isNumberNative||"range"==type&&!v.browser.isRangeNative)){var s,r=parseInt(t.attr("min")),q=parseInt(t.attr("max")),p=parseInt(t.attr("step")),o=parseInt(t.attr("value")),n=t.prop("attributes"),m=f("<select>");r=isNaN(r)?-100:r;for(var a=r;q>=a;a+=p){s=f("<option>").attr("value",a).text(a),(o==a||o>a&&a+p>o)&&s.attr("selected",""),m.append(s)}f.each(n,function(){m.attr(this.name,this.value)}),t.replaceWith(m)}},autofocus:function(n,m){var l=f(m),k=!!l.attr("autofocus"),j=/^(input|textarea|select|fieldset)$/i,b=/^submit$/i,a=n.browser.isAutofocusNative;!a&&j.test(m.nodeName)&&!b.test(m.type)&&k&&f(e).ready(function(){n.setFocusOn(m)})},findLabel:function(a){var k=f('label[for="'+a.attr("id")+'"]');if(k.length<=0){var j=a.parent(),i=j.get(0).tagName.toLowerCase();"label"==i&&(k=j)}return k},setFocusOn:function(a){"fieldset"===a.tagName.toLowerCase()?f(a).find(":first").focus():f(a).focus()},renderErrorMessages:function(a,n){var m=n.elements,l=m.length,k={};for(k.errors=new Array;l--;){var j=f(m[l]),i=a.findLabel(j);j.hasClass(a.options.requiredClass)&&(k.errors[l]=i.text().replace("*","")+a.options.requiredMessage),j.hasClass(a.options.patternClass)&&(k.errors[l]=i.text().replace("*","")+a.options.patternMessage)}k.errors.length>0&&Joomla.renderMessages(k)}};f.fn.h5f=function(b){return this.each(function(){var a=Object.create(g);a.init(b,this)})},f.fn.h5f.options={invalidClass:"invalid",requiredClass:"required",requiredMessage:" is required.",placeholderClass:"placeholder",patternClass:"pattern",patternMessage:" doesn't match pattern.",doRenderMessage:!1,formValidationEvent:"onSubmit",emailPatt:/^[a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,urlPatt:/[a-z][\-\.+a-z]*:\/\//i},f(function(){f("form").h5f({doRenderMessage:!0,requiredClass:"musthavevalue"})})}(jQuery,document);