var JFormValidator=function(){var m,h,j,b=function(n,i,l){l=""===l?!0:l,m[n]={enabled:l,exec:i}},d=function(l,o){var i,n=jQuery(o);return l?(i=n.find("#"+l+"-lbl"),i.length?i:(i=n.find('label[for="'+l+'"]'),i.length?i:!1)):!1},g=function(l,n){var i=n.data("label");void 0===i&&(i=d(n.attr("id"),n.get(0).form),n.data("label",i)),l===!1?(n.addClass("invalid").attr("aria-invalid","true"),i&&i.addClass("invalid")):(n.removeClass("invalid").attr("aria-invalid","false"),i&&i.removeClass("invalid"))},f=function(o){var i,l,q=jQuery(o);if(q.attr("disabled")){return g(!0,q),!0}if(q.attr("required")||q.hasClass("required")){if(i=q.prop("tagName").toLowerCase(),"fieldset"===i&&(q.hasClass("radio")||q.hasClass("checkboxes"))){if(!q.find("input:checked").length){return g(!1,q),!1}}else{if(!q.val()||q.hasClass("placeholder")||"checkbox"===q.attr("type")&&!q.is(":checked")){return g(!1,q),!1}}}return l=q.attr("class")&&q.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?q.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",""===l?(g(!0,q),!0):l&&"none"!==l&&m[l]&&q.val()&&m[l].exec(q.val(),q)!==!0?(g(!1,q),!1):(g(!0,q),!0)},k=function(z){var w,a,q,v,y,A,l=!0,x=[];for(w=jQuery(z).find("input, textarea, select, fieldset"),y=0,A=w.length;A>y;y++){f(w[y])===!1&&(l=!1,x.push(w[y]))}if(jQuery.each(j,function(i,n){n.exec()!==!0&&(l=!1)}),!l&&x.length>0){for(a=Joomla.JText._("JLIB_FORM_FIELD_INVALID"),q={error:[]},y=x.length-1;y>=0;y--){v=jQuery(x[y]).data("label"),v&&q.error.push(a+v.text().replace("*",""))}Joomla.renderMessages(q)}return l},p=function(q){var e,v=[],y=jQuery(q);e=y.find("input, textarea, select, fieldset, button");for(var l=0,u=e.length;u>l;l++){var x=jQuery(e[l]),w=x.prop("tagName").toLowerCase();"input"!==w&&"button"!==w||"submit"!==x.attr("type")&&"image"!==x.attr("type")?"button"===w||"input"===w&&"button"===x.attr("type")||(x.hasClass("required")&&x.attr("aria-required","true").attr("required","required"),"fieldset"!==w&&(x.on("blur",function(){return f(this)}),x.hasClass("validate-email")&&h&&(x.get(0).type="email")),v.push(x)):x.hasClass("validate")&&x.on("click",function(){return k(q)})}y.data("inputfields",v)},c=function(){m={},j=j||{},h=function(){var i=document.createElement("input");return i.setAttribute("type","email"),"text"!==i.type}(),b("username",function(l,n){var i=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return !i.test(l)}),b("password",function(l,n){var i=/^\S[\S ]{2,98}\S$/;return i.test(l)}),b("numeric",function(l,n){var i=/^(\d|-)?(\d|,)*\.?\d*$/;return i.test(l)}),b("email",function(l,n){l=punycode.toASCII(l);var i=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return i.test(l)});for(var o=jQuery("form.form-validate"),e=0,a=o.length;a>e;e++){p(o[e])}};return c(),{isValid:k,validate:f,setHandler:b,attachToForm:p,custom:j}};document.formvalidator=null,jQuery(function(){document.formvalidator=new JFormValidator});